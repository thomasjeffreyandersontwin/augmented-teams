MM3E CHARACTER CREATOR - DOMAIN INTERACTIONS

FUNCTIONAL PURPOSE:
Document how domain concepts interact to fulfill character creation business scenarios, showing transformations, lookups, and business rules at domain level.

═══════════════════════════════════════════════════════════════════════════
SCENARIO 1: Create New Character Foundation
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User initiates character creation

ACTORS:
- Character Identity
- Power Level
- Starting Power Points Budget
- Power Level Caps

BUSINESS FLOW:

1. Character Identity captures character name
   → Validates uniqueness against user's character collection
   → Business Rule: Character name must be unique (case-insensitive comparison)
   → If duplicate found: Displays warning "Character with this name already exists"
   → If unique: Enables proceeding to power level selection

2. Character Identity captures optional fields
   → Hero Identity (optional, max 100 chars)
   → Description (optional, max 2000 chars, multi-line preserved)

3. User selects Power Level from options
   → Transformation: Power Level Value → Starting Power Points Budget
   → Formula Applied: PL × 15 = Starting Points
   → Examples: PL 10 → 150 points, PL 12 → 180 points, PL 8 → 120 points

4. Power Level calculates all 6 caps
   → Transformation: PL Value → Cap Values
   → Formulas Applied:
      • Skill Cap = PL + 10
      • Attack+Effect Cap = PL × 2
      • 3 Defense Pair Caps = PL × 2 each
   → Example for PL 10: Skill Cap = 20, Attack+Effect = 20, Defense Pairs = 20

5. Character Foundation established
   → Character Identity stored (name, optional fields)
   → Power Level stored as immutable tier
   → Starting Budget allocated
   → All 6 Caps calculated and ready for validation
   → Status: Foundation Complete, Abilities configuration enabled

BUSINESS RULES:
- Character name uniqueness enforced (prevents duplicate names in collection)
- Power Level is immutable (represents character tier, rarely changes)
- Single point pool shared across ALL trait categories
- "Warn, Don't Prevent" philosophy: Warnings displayed but operations allowed

RESULT: Character exists with identity, budget, and caps ready for trait configuration

═══════════════════════════════════════════════════════════════════════════
SCENARIO 2: Configure Abilities and Cascade to Defenses
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User adjusts ability rank

ACTORS:
- The 8 Abilities (STR, STA, AGL, DEX, FGT, INT, AWE, PRE)
- Ability Rank
- Total Ability Points Spent
- Cascading Dependencies
- The 5 Defenses (Dodge, Parry, Fortitude, Will, Toughness)
- Starting Power Points Budget

BUSINESS FLOW:

1. User sets Agility rank to 6
   → Transformation: Rank Value → Cost
   → Formula Applied: Cost = Rank × 2
   → Calculation: 6 × 2 = 12 points
   → Ability Rank stores new value (Agility = 6)

2. Total Ability Points Spent recalculates
   → Aggregation: Sum all 8 ability costs
   → Formula Applied: Σ(rank × 2) for STR, STA, AGL, DEX, FGT, INT, AWE, PRE
   → Example: If STR=5, AGL=6, others=0 → Total = 10 + 12 = 22 points

3. Starting Power Points Budget updates remaining
   → Transformation: Total - Spent → Remaining
   → Example: 150 total - 22 spent = 128 remaining
   → Business Rule: If Remaining < 0, display overspend warning (but allow)
   → Display format: "22 / 150 points spent"

4. Cascading Dependencies trigger for Agility
   → Lookup Strategy: Find which defenses depend on Agility
   → Match Found: Agility → Dodge defense
   → Transformation: Agility Rank → Dodge Base
   → Formula Applied: Dodge = 10 + Agility
   → Calculation: Dodge = 10 + 6 = 16
   → Base Defense Value updates (Dodge base = 16)
   → Timing Rule: Defense updates synchronously (same cycle as ability)

5. Display updates occur simultaneously
   → User observes: Agility shows 6, Dodge shows 16, Budget shows 22/150
   → All updates visible within 100ms (real-time feedback)

BUSINESS RULES:
- Ability cost formula uniform: All 8 abilities use rank × 2
- Cascading is immediate: No delay between ability change and defense update
- Budget tracking continuous: Remaining recalculates after each ability change
- Negative ranks allowed: Below-average abilities (rank -5 to -1) refund points

RESULT: Ability configured, cost deducted, defense cascaded, budget updated

═══════════════════════════════════════════════════════════════════════════
SCENARIO 3: Stamina's Dual Defense Impact
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User sets Stamina rank

ACTORS:
- The 8 Abilities (specifically Stamina)
- Cascading Dependencies
- The 5 Defenses (specifically Fortitude and Toughness)
- Starting Power Points Budget

BUSINESS FLOW:

1. User sets Stamina rank to 8
   → Transformation: Rank → Cost
   → Formula Applied: Cost = Rank × 2
   → Calculation: 8 × 2 = 16 points
   → Stamina stored (STA = 8)

2. Budget deducts cost
   → Remaining Budget decreases by 16 points

3. Cascading Dependencies trigger for Stamina
   → Lookup Strategy: Find which defenses depend on Stamina
   → Matches Found: Stamina → Fortitude AND Toughness (DUAL IMPACT)
   → Business Rule: Stamina is unique - only ability affecting TWO defenses

4. Both defenses calculate from Stamina
   → Transformation: Stamina Rank → Fortitude Base
   → Formula Applied: Fortitude = Stamina (no +10)
   → Calculation: Fortitude = 8
   
   → Transformation: Stamina Rank → Toughness Base
   → Formula Applied: Toughness = Stamina (no +10)
   → Calculation: Toughness = 8
   
   → Business Insight: Both defenses equal because both derive from Stamina

5. Both defense displays update simultaneously
   → Fortitude shows "8 (Stamina 8)"
   → Toughness shows "8 (Stamina 8)"
   → User sees all 3 values change together: Stamina, Fortitude, Toughness

BUSINESS RULES:
- Stamina uniqueness: Only ability affecting multiple defenses
- Synchronous cascade: Both Fortitude and Toughness update in same cycle
- Equal base values: Both defenses start with same Stamina-derived value
- Resistance defense formula: No +10 added (unlike active defenses)

RESULT: One ability change triggers two defense updates simultaneously

═══════════════════════════════════════════════════════════════════════════
SCENARIO 4: Active vs Resistance Defense Distinction
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User configures abilities that affect different defense types

ACTORS:
- The 8 Abilities (Agility, Fighting, Stamina, Awareness)
- Cascading Dependencies
- Active Defenses (Dodge, Parry)
- Resistance Defenses (Fortitude, Will, Toughness)

BUSINESS FLOW:

1. User sets Agility rank to 5
   → Cascading Dependencies matches: Agility → Dodge (Active Defense)
   → Transformation: Agility → Dodge Base
   → Formula Applied: Dodge = 10 + Agility
   → Calculation: Dodge = 10 + 5 = 15
   → Business Rationale: +10 base because opponent rolls against this static value

2. User sets Fighting rank to 8
   → Cascading Dependencies matches: Fighting → Parry (Active Defense)
   → Transformation: Fighting → Parry Base
   → Formula Applied: Parry = 10 + Fighting
   → Calculation: Parry = 10 + 8 = 18
   → Business Rationale: +10 base for same reason as Dodge

3. User sets Awareness rank to 2
   → Cascading Dependencies matches: Awareness → Will (Resistance Defense)
   → Transformation: Awareness → Will Base
   → Formula Applied: Will = Awareness (NO +10)
   → Calculation: Will = 2
   → Business Rationale: No +10 because defender rolls d20 + Will vs DC

4. User sets Stamina rank to 3
   → Cascading Dependencies matches: Stamina → Fortitude + Toughness (Resistance)
   → Transformation: Stamina → Fortitude Base
   → Formula Applied: Fortitude = Stamina (NO +10)
   → Calculation: Fortitude = 3
   
   → Transformation: Stamina → Toughness Base
   → Formula Applied: Toughness = Stamina (NO +10)
   → Calculation: Toughness = 3
   → Business Rationale: No +10 because defender rolls these defenses

5. Defense type distinction visible in display
   → Active Defenses show: "Dodge: 15 (10 + Agility 5)", "Parry: 18 (10 + Fighting 8)"
   → Resistance Defenses show: "Will: 2 (Awareness 2)", "Fortitude: 3 (Stamina 3)", "Toughness: 3 (Stamina 3)"
   → User understands: Active defenses higher because of +10 base

BUSINESS RULES:
- Active Defense Rule: Dodge and Parry use formula "10 + Ability" (opponent rolls against them)
- Resistance Defense Rule: Fortitude, Will, Toughness use formula "Ability" (you roll them + d20)
- Game Mechanic Rationale: Active defenses are target numbers; Resistance defenses are modifiers to your roll
- Formula consistency: All active get +10, all resistance don't

RESULT: Two defense types calculated differently based on game mechanic (opponent rolls vs you roll)

═══════════════════════════════════════════════════════════════════════════
SCENARIO 5: Purchase Defense Ranks with Toughness Exception
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User wants to improve defense values beyond ability-derived bases

ACTORS:
- Purchased Defense Ranks
- The 5 Defenses (Dodge, Parry, Fortitude, Will, Toughness)
- Defense Total Value
- Starting Power Points Budget

BUSINESS FLOW:

1. User purchases 2 ranks of Dodge
   → Lookup Strategy: Check if defense is purchasable
   → Match Found: Dodge is purchasable (active defense)
   → Transformation: Rank Count → Cost
   → Formula Applied: Cost = Ranks × 1 pp
   → Calculation: 2 ranks × 1 = 2 points
   
   → Transformation: Base + Purchased → Total
   → Example: Dodge base = 15, Purchased = 2
   → Formula Applied: Total = Base + Purchased
   → Calculation: Dodge Total = 15 + 2 = 17
   
   → Budget deducts 2 points
   → Display shows: "Dodge: 17 (10 + Agility 5 + 2 purchased)"

2. User purchases 5 ranks of Fortitude
   → Lookup Strategy: Check if defense is purchasable
   → Match Found: Fortitude is purchasable (resistance defense)
   → Cost Calculation: 5 ranks × 1 pp = 5 points
   → Total Calculation: Fortitude base = 3, Purchased = 5, Total = 8
   → Budget deducts 5 points
   → Display shows: "Fortitude: 8 (Stamina 3 + 5 purchased)"

3. User attempts to purchase Toughness ranks
   → Lookup Strategy: Check if defense is purchasable
   → Match Found: Toughness is NON-PURCHASABLE (special exception)
   → Business Rule: Toughness cannot be purchased with power points
   → Validation Prevents: Purchase operation blocked
   → User Feedback: "Cannot purchase Toughness ranks. Use advantages (Defensive Roll) or powers (Protection) instead."
   → Game Balance Rationale: Toughness too powerful if directly purchasable

4. User purchases 1 rank of Parry
   → Purchasable check: Parry allowed
   → Cost: 1 point
   → Total Calculation: Parry base = 18, Purchased = 1, Total = 19
   → Budget deducts 1 point

5. User purchases 6 ranks of Will
   → Purchasable check: Will allowed
   → Cost: 6 points
   → Total Calculation: Will base = 2, Purchased = 6, Total = 8
   → Budget deducts 6 points

6. Defense purchases complete
   → Dodge Total = 17 (base 15 + 2 purchased) - cost: 2 pp
   → Parry Total = 19 (base 18 + 1 purchased) - cost: 1 pp
   → Fortitude Total = 8 (base 3 + 5 purchased) - cost: 5 pp
   → Will Total = 8 (base 2 + 6 purchased) - cost: 6 pp
   → Toughness Total = 3 (base 3, NO purchased ranks) - cost: 0 pp
   → Total defense purchases: 14 points spent

BUSINESS RULES:
- Purchasable Defenses: Dodge, Parry, Fortitude, Will (4 of 5)
- Non-Purchasable Defense: Toughness (special exception for game balance)
- Uniform Cost: All purchasable defenses cost 1 pp per rank
- Total Formula: Defense Total = Base (from ability) + Purchased Ranks
- Alternative Improvement: Toughness improves via Defensive Roll advantage or Protection powers
- No Maximum: Can purchase unlimited ranks (subject to PL caps and budget)

RESULT: Four defenses enhanced beyond ability bases; Toughness remains at base value only

═══════════════════════════════════════════════════════════════════════════
SCENARIO 6: Budget Overspend with Warning (Warn, Don't Prevent)
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User continues spending after budget fully allocated

ACTORS:
- Starting Power Points Budget
- Total Ability Points Spent
- Purchased Defense Ranks
- The 8 Abilities
- The 5 Defenses

BUSINESS FLOW:

1. Character at budget limit
   → Power Level 10 provides 150 total points
   → Abilities configured: 80 points spent
   → Defense ranks purchased: 70 points spent
   → Total spent: 150 points
   → Remaining: 0 points
   → Display: "150 / 150 points spent" (normal color)
   → Status: "Budget Fully Used" (valid state)

2. User purchases additional 3 ranks of Will
   → Cost Calculation: 3 ranks × 1 pp = 3 points
   → Budget Calculation: Total - Spent = 150 - 153 = -3
   → Remaining: -3 points (overspent)
   
   → Business Rule: "Warn, Don't Prevent" philosophy
   → Operation Allowed: Purchase completes despite overspend
   → Will Total increases: Previous + 3 new ranks
   
   → Budget displays overspend
   → Display: "153 / 150 points spent" (warning color)
   → Warning Message: "Over Budget by 3 points"
   → Progress bar: 102% filled (visual overfill indicator)

3. User sets Strength from 0 to 5
   → Cost: 5 ranks × 2 pp = 10 points
   → Overspend increases: -3 becomes -13
   → Display: "163 / 150 points spent" (warning color)
   → Warning Message: "Over Budget by 13 points"
   
   → Business Rule: Operation still allowed (not blocked)
   → Strength updates to 5
   → All cascaded updates occur normally

4. User decreases ability rank to refund points
   → Sets Strength from 5 back to 3
   → Refund: (5 - 3) × 2 = 4 points refunded
   → Overspend decreases: -13 becomes -9
   → Display: "159 / 150 points spent"
   → Warning Message: "Over Budget by 9 points"

5. Character save allowed despite overspend
   → Validation Rule: Overspend is warning, not blocker
   → Save operation completes successfully
   → Character stored with overspend state
   → Rationale: Player may be experimenting, iterating, or intentionally over-building

BUSINESS RULES:
- Budget Calculation: Remaining = Total - Spent (across ALL categories)
- Overspend Philosophy: "Warn, Don't Prevent" - operations allowed, warnings displayed
- Color Coding: Normal (remaining > 0), Fully Used (= 0), Overspent (< 0)
- Real-time Feedback: Budget updates within 100ms after each trait change
- Save Allowed: Characters can be saved in overspent state
- Visual Indicators: Progress bar, color change, explicit warning message

RESULT: User exceeds budget but continues configuring character with clear warnings

═══════════════════════════════════════════════════════════════════════════
SCENARIO 7: Ability Change Triggers Multiple Dependent Updates
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User modifies ability rank that has downstream dependencies

ACTORS:
- The 8 Abilities
- Cascading Dependencies
- The 5 Defenses
- Total Ability Points Spent
- Starting Power Points Budget
- Defense Total Value (if defense ranks purchased)

BUSINESS FLOW:

1. Initial state
   → Fighting = 6 (cost 12 pp)
   → Parry base = 16 (10 + Fighting 6)
   → Parry purchased ranks = 4
   → Parry Total = 20 (16 base + 4 purchased)
   → Ability points: 50 spent
   → Defense ranks: 20 spent
   → Total spent: 70 / 150

2. User increases Fighting from 6 to 10
   → Transformation: Rank Change → Cost Change
   → Old Cost: 6 × 2 = 12 pp
   → New Cost: 10 × 2 = 20 pp
   → Delta: 20 - 12 = 8 pp additional cost

3. Total Ability Points Spent recalculates
   → Aggregation: Sum all 8 ability costs with new Fighting value
   → New Total: 50 - 12 + 20 = 58 points
   → Display updates: Ability points section shows new total

4. Cascading Dependencies trigger for Fighting
   → Lookup: Fighting → Parry defense
   → Transformation: New Fighting Rank → New Parry Base
   → Formula Applied: Parry Base = 10 + Fighting
   → Old Parry Base: 10 + 6 = 16
   → New Parry Base: 10 + 10 = 20
   → Base increases by 4 points

5. Defense Total Value recalculates
   → Purchased ranks unchanged (still 4)
   → Transformation: New Base + Purchased → New Total
   → Formula: Total = Base + Purchased
   → New Parry Total: 20 + 4 = 24
   → Increase: 20 → 24 (4-point improvement from ability increase alone)

6. Starting Power Points Budget updates
   → Transformation: Total - Spent → Remaining
   → Old Spent: 70 pp
   → New Spent: 70 - 12 + 20 = 78 pp (ability cost increased by 8)
   → New Remaining: 150 - 78 = 72 pp
   → Display updates: "78 / 150 points spent"

7. All updates occur synchronously
   → Timing Rule: All dependent calculations complete in same cycle
   → User observes simultaneous changes:
      • Fighting: 6 → 10
      • Parry Base: 16 → 20
      • Parry Total: 20 → 24
      • Ability Points: 50 → 58
      • Total Spent: 70 → 78
      • Remaining: 80 → 72
   → All visible within 100ms (real-time feedback)

BUSINESS RULES:
- Cascade triggers immediately: No delay between ability change and defense update
- Purchased ranks preserved: Ability change doesn't affect previously purchased defense ranks
- Total includes both: Defense Total = New Base (from ability) + Purchased Ranks (unchanged)
- Cost delta only: Only the changed ability's cost delta affects budget
- Synchronous updates: All dependent calculations complete together
- Real-time feedback: User sees all changes simultaneously

RESULT: Single ability change ripples through multiple calculations: cost, total, base defense, total defense, budget - all updating together

═══════════════════════════════════════════════════════════════════════════
SCENARIO 8: Complete Character Creation Flow (End-to-End)
═══════════════════════════════════════════════════════════════════════════

TRIGGER: User creates character from start to finish

ACTORS:
- Character Identity
- Power Level
- Starting Power Points Budget
- The 8 Abilities
- Cascading Dependencies
- The 5 Defenses
- Purchased Defense Ranks
- Defense Total Value

BUSINESS FLOW:

1. PHASE: Establish Identity
   → User enters character name "Iron Guardian"
   → Character Identity validates uniqueness (no existing "Iron Guardian")
   → User enters hero identity "Tony Stark-inspired"
   → User enters description "Armored genius inventor" (multi-line)
   → Identity complete: Name, hero identity, description stored

2. PHASE: Select Power Level
   → User selects PL 10 from dropdown
   → Power Level calculates starting budget: 10 × 15 = 150 points
   → Power Level calculates 6 caps:
      • Skill Cap: 10 + 10 = 20
      • Attack+Effect: 10 × 2 = 20
      • Dodge+Toughness: 10 × 2 = 20
      • Parry+Toughness: 10 × 2 = 20
      • Fortitude+Will: 10 × 2 = 20
   → Foundation established, abilities configuration enabled

3. PHASE: Configure Abilities
   → User sets STR = 2 (cost 4 pp) - "Powered armor strength"
   → User sets STA = 8 (cost 16 pp) - "Durable armor"
      • Cascade: Fortitude base = 8
      • Cascade: Toughness base = 8
   → User sets AGL = 0 (cost 0 pp) - "Average in armor"
      • Cascade: Dodge base = 10
   → User sets DEX = 2 (cost 4 pp) - "Precision targeting"
   → User sets FGT = 6 (cost 12 pp) - "Trained combatant"
      • Cascade: Parry base = 16
   → User sets INT = 8 (cost 16 pp) - "Genius inventor"
   → User sets AWE = 4 (cost 8 pp) - "Sensor array awareness"
      • Cascade: Will base = 4
   → User sets PRE = 3 (cost 6 pp) - "Charismatic leader"
   
   → Total Ability Points: (4+16+0+4+12+16+8+6) = 66 pp spent
   → Budget remaining: 150 - 66 = 84 pp
   → All 5 defenses calculated from abilities:
      • Dodge = 10 (base from AGL 0)
      • Parry = 16 (base from FGT 6)
      • Fortitude = 8 (base from STA 8)
      • Will = 4 (base from AWE 4)
      • Toughness = 8 (base from STA 8)

4. PHASE: Purchase Defense Ranks
   → User purchases 4 Dodge ranks (cost 4 pp)
      • Dodge Total: 10 + 4 = 14
   → User purchases 2 Parry ranks (cost 2 pp)
      • Parry Total: 16 + 2 = 18
   → User purchases 0 Fortitude ranks
      • Fortitude Total: 8 (base only)
   → User purchases 6 Will ranks (cost 6 pp)
      • Will Total: 4 + 6 = 10
   → User considers Toughness purchase
      • Validation blocks: "Cannot purchase Toughness ranks"
      • Toughness Total: 8 (base only, no purchase)
   
   → Total Defense Ranks Purchased: 4 + 2 + 6 = 12 pp spent
   → Budget remaining: 84 - 12 = 72 pp

5. PHASE: Validate PL Caps (Defenses)
   → Check Dodge + Toughness: 14 + 8 = 22 > 20 (over cap by 2)
      • Warning displayed: "Dodge+Toughness exceeds PL 10 cap by 2"
      • Business Rule: Warn, don't prevent - allowed to continue
   → Check Parry + Toughness: 18 + 8 = 26 > 20 (over cap by 6)
      • Warning displayed: "Parry+Toughness exceeds PL 10 cap by 6"
   → Check Fortitude + Will: 8 + 10 = 18 ≤ 20 (within cap)
      • No warning

6. PHASE: Final State
   → Character Identity: "Iron Guardian" (Tony Stark-inspired, genius inventor)
   → Power Level: PL 10 (150 points total)
   → Abilities (66 pp): STR 2, STA 8, AGL 0, DEX 2, FGT 6, INT 8, AWE 4, PRE 3
   → Defense Bases: Dodge 10, Parry 16, Fort 8, Will 4, Tough 8
   → Defense Ranks: Dodge +4, Parry +2, Fort +0, Will +6, Tough +0 (12 pp)
   → Defense Totals: Dodge 14, Parry 18, Fort 8, Will 10, Tough 8
   → Total Spent: 66 + 12 = 78 pp
   → Remaining Budget: 72 pp (available for skills, advantages, powers)
   → Warnings: 2 PL cap violations (Dodge+Tough, Parry+Tough)
   → Status: Character foundation complete, ready for skills/advantages/powers

BUSINESS RULES:
- Sequential Flow: Identity → Power Level → Abilities → Defenses → Enhancements
- Single Budget Pool: All traits (abilities, defenses, skills, advantages, powers) share 150 pp
- Cascading Automatic: Defense bases calculate automatically from abilities
- Purchase Optional: Defense ranks optional enhancement beyond bases
- Caps Advisory: PL caps warn but don't prevent building
- Foundation Complete: After this flow, character ready for advanced traits

RESULT: Complete character foundation created following M&M 3E rules with identity, power level, abilities, and defenses configured

═══════════════════════════════════════════════════════════════════════════
KEY BUSINESS PATTERNS
═══════════════════════════════════════════════════════════════════════════

TRANSFORMATION PATTERNS:
- Power Level → Starting Budget: PL × 15
- Power Level → Cap Values: PL × 2 (most caps), PL + 10 (skill cap)
- Ability Rank → Cost: Rank × 2
- All Abilities → Total Cost: Σ(rank × 2) for all 8
- Agility → Dodge: 10 + Agility
- Fighting → Parry: 10 + Fighting
- Stamina → Fortitude: Stamina (no +10)
- Stamina → Toughness: Stamina (no +10, dual impact)
- Awareness → Will: Awareness (no +10)
- Defense Base + Purchased → Total: Base + Purchased

LOOKUP STRATEGIES:
- Character Name → Uniqueness: Search user's character collection (case-insensitive)
- Ability Change → Defense Cascade: Map ability to dependent defense(s)
- Defense Purchase → Purchasability: Check if defense is in purchasable list (4 of 5)
- Stamina Change → Dual Defenses: Lookup returns TWO defenses (Fortitude, Toughness)

BUSINESS RULES:
- Uniqueness: Character names must be unique within user's collection
- Immutability: Power Level rarely changes after creation (represents tier)
- Single Pool: All trait categories share same point budget
- Uniform Cost: All abilities cost 2 pp/rank, all defense ranks cost 1 pp/rank
- Cascading: Ability changes immediately trigger defense recalculation
- Stamina Special: Only ability affecting TWO defenses
- Active vs Resistance: Active defenses +10 (Dodge, Parry), Resistance no +10 (Fort, Will, Tough)
- Toughness Exception: Cannot purchase Toughness ranks (game balance)
- Warn Don't Prevent: Validations warn but don't block operations
- Synchronous Updates: All dependent calculations complete in same cycle
- Real-time Feedback: All updates visible within 100ms

CALCULATION TIMING:
- Immediate: Ability cost calculated instantly when rank set
- Synchronous: Defense cascade occurs in same cycle as ability change
- Real-time: Budget updates within 100ms of any trait change
- Together: Multiple dependent updates (cost, total, defense, budget) complete simultaneously

═══════════════════════════════════════════════════════════════════════════
DOMAIN CONCEPT RELATIONSHIPS
═══════════════════════════════════════════════════════════════════════════

CHARACTER IDENTITY → POWER LEVEL
  Relationship: Sequential (identity established before PL selection)
  Dependency: PL requires character to exist (name at minimum)

POWER LEVEL → STARTING BUDGET
  Relationship: Derivation (budget calculated from PL)
  Formula: PL × 15 = Starting Points
  One-to-one mapping

POWER LEVEL → CAPS
  Relationship: Derivation (all 6 caps calculated from PL)
  One-to-many: 1 PL generates 6 cap values

STARTING BUDGET → ALL TRAITS
  Relationship: Consumption (traits spend from single budget pool)
  Shared resource: Abilities, defenses, skills, advantages, powers all draw from same pool

ABILITIES → DEFENSES
  Relationship: Cascade (4 abilities derive 5 defense base values)
  Mappings:
    - Agility → Dodge (1-to-1)
    - Fighting → Parry (1-to-1)
    - Stamina → Fortitude + Toughness (1-to-2, unique)
    - Awareness → Will (1-to-1)
  Timing: Synchronous (immediate propagation)

DEFENSE BASE + PURCHASED RANKS → DEFENSE TOTAL
  Relationship: Composition (total = base + purchased)
  Independence: Purchased ranks independent of ability changes
  Exception: Toughness cannot have purchased ranks

BUDGET → VALIDATION
  Relationship: Monitoring (budget tracks spending, triggers warnings)
  Philosophy: "Warn, Don't Prevent" (overspend allowed with warning)

═══════════════════════════════════════════════════════════════════════════
SOURCE MATERIAL
═══════════════════════════════════════════════════════════════════════════

Domain Map: mm3e-character-creator-domain-map.txt
M&M 3E Handbook: Chapters 2-3, Pages 24-27, 107-112
Feature Overviews: Enter Basic Identity, Select Power Level, Configure Abilities, Calculate Defenses, Purchase Defense Ranks

