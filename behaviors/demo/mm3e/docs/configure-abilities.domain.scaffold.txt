DOMAIN SCAFFOLD: Configure Abilities Feature
Source: mm3e-character-creator-domain-map.txt (Section 3: ABILITIES)
Stories: 5 stories covering ability configuration and cascading effects

═══════════════════════════════════════════════════════════════════════════
TEST HIERARCHY (Plain English)
═══════════════════════════════════════════════════════════════════════════

describe a character 
    describe with abilities
        describe that are being displayed
            it should have all 8 abilities shown in standard order
            it should have each ability showing abbreviation and full name
            it should have each ability showing current rank
            it should have each ability showing calculated cost
            it should have abilities grouped by category
            
            describe at default ranks
            it should have all abilities showing rank 0 as average
            it should have all abilities showing zero cost
            it should have rank adjustment controls displayed
            
            describe with positive ranks
            it should have rank displayed with calculated cost
            it should have rank description shown
            it should have superhuman designation shown when rank is 8 or higher
            
            describe with negative ranks
            it should have negative rank displayed in warning style
            it should have refund shown as negative cost
            it should have below average designation shown
            
            describe with tooltips
            it should have ability description shown on hover
            it should have primary use shown on hover
            it should have example usage shown on hover

        describe with ranks that are being set
        
            describe that has been set to positive rank
            it should have cost calculated using rank times 2 formula
            it should have points deducted from remaining budget
            it should have new rank value stored with character
            it should have rank displayed immediately
            
            describe that has been set to zero
            it should have cost calculated as zero
            it should have no points deducted from budget
            it should have average designation displayed
            
            describe that has been set to negative rank
            it should have cost calculated as negative value
            it should have points refunded to budget
            it should have warning style applied
            it should have below average designation displayed
            
            describe that has been changed from existing rank
            it should have cost recalculated for new rank
            it should have point difference adjusted in budget
            it should have display updated to new rank
            it should have update completed within 100ms
            
            describe that has been set to minimum rank
            it should have minimum rank of negative 5 accepted
            it should have 10 points refunded to budget
            it should have far below average designation shown
            
            describe that has been set to maximum rank
            it should have maximum rank of 20 accepted
            it should have 40 points deducted from budget
            it should have cosmic-level designation shown

        describe with total ability points being calculated
        
        describe with all abilities at zero
            it should have total calculated as 0 points
            it should have display showing 0 spent
            it should have no points deducted from budget
            
        describe with single ability set
            it should have total equal to single ability cost
            it should have breakdown showing ability contribution
            
        describe with multiple abilities set
            it should have total equal to sum of all ability costs
            it should have breakdown showing each ability contribution
            it should have formula validated as sum of rank times 2 for all 8
            
        describe with negative ranks
            it should have negative costs reducing total
            it should have refunds shown in breakdown
            
        describe that is recalculating after ability changes
            it should have total updated immediately
            it should have update completed within 100ms
            it should have new breakdown displayed

        
        describe whose Agility has changed
            it should have Dodge recalculated as 10 plus Agility
            it should have Dodge display updated synchronously
            it should have both Agility and Dodge changed simultaneously
            
        describe whose Fighting has changed
            it should have Parry recalculated as 10 plus Fighting
            it should have Parry display updated synchronously
            it should have both Fighting and Parry changed simultaneously
            
        describe whose Stamina has changed
            it should have Fortitude recalculated equal to Stamina
            it should have Toughness recalculated equal to Stamina
            it should have both defenses updated together in same cycle
            it should have Stamina Fortitude and Toughness all changed simultaneously
            
        describe whose Awareness has changed
            it should have Will recalculated equal to Awareness
            it should have Will display updated synchronously
            it should have both Awareness and Will changed simultaneously
            
        describe whose ability has been decreased
            it should have defense value decreased when linked ability decreased
            it should have update completed immediately
            
        describe whose ability has been reset to zero
            it should have defense returned to base value
            it should have update completed immediately

        describe with remaining point budget being updated
    
        describe with initial budget and no points spent
            it should have 150 points available for Power Level 10
            it should have budget shown as 0 spent of 150
            it should have normal color displayed
            it should have progress bar showing 0 percent filled
        
        describe that has ability points spent
            it should have remaining budget decreased by ability cost
            it should have budget display updated immediately
            it should have update completed within 100ms
        
        describe that has points refunded
            it should have remaining budget increased by refund amount
            it should have budget recalculated with negative rank cost
        
        describe with budget fully used
            it should have 150 of 150 shown when all points allocated
            it should have budget fully used indicator displayed
            it should have progress bar showing 100 percent filled
            it should have normal color maintained as valid state
        
        describe that is overspending
            it should have overspend amount calculated as spent minus total
            it should have over budget message displayed in warning color
            it should have character save not prevented
            it should have progress bar showing overfilled percentage
        
        describe with multiple changes
            it should have budget updated after each ability change
            it should have real-time updates within 100ms per change
            it should have cumulative cost reflected in total

    ═══════════════════════════════════════════════════════════════════════════
    SCAFFOLD VALIDATION
    ═══════════════════════════════════════════════════════════════════════════

    ✓ All describe blocks have at least one it statement
    ✓ Domain map hierarchy preserved (matches Section 3: ABILITIES structure)
    ✓ Natural language fluency (reads aloud clearly)
    ✓ Clear domain subject: "a character" (domain concept, not system concept)
    ✓ Context inheritance: Nested describes use "with" to inherit context without repetition
    ✓ User-oriented flow (external state changes: displaying, setting, calculating, updating)
    ✓ State-oriented describe blocks with linking words (with abilities that are being displayed, etc)
    ✓ Complete end-to-end behaviors (not fragmented)
    ✓ Sample size: ~18 describe blocks with nested states
    ✓ All tests use state-oriented language (past participle: "has been", present continuous: "are being")
    ✓ Covers all 5 stories:
    - Story 1: System calculates total ability points spent (section: calculating total ability points)
    - Story 2: System displays all 8 abilities with current ranks (section: displaying abilities)
    - Story 3: System updates dependent defenses (section: updating dependent defenses)
    - Story 4: System updates remaining point budget (section: updating remaining point budget)
    - Story 5: User sets ability rank (section: setting ability ranks)

    ═══════════════════════════════════════════════════════════════════════════
    DOMAIN CONCEPT MAPPING
    ═══════════════════════════════════════════════════════════════════════════

    Domain Map Structure → Test Structure:

    CHARACTER (domain concept)
    └── ABILITIES (domain section)
        ├── The 8 Abilities → a character with abilities that are being displayed
        ├── Ability Rank → a character with ability ranks that are being set
        ├── Total Ability Points Spent → a character with total ability points being calculated
        ├── Cascading Dependencies → a character with dependent defenses being updated
        └── (Budget tracking) → a character with remaining point budget being updated

    All describe blocks follow domain-focused pattern:
    - Top level: "a character whose abilities are being configured" (domain concept)
    - Second level: "with [aspect] being [action]" - inherits character context
    - Third level: "with/that has been/when" - inherits both character and aspect context
    - Each state block has concrete "it should have" statements
    - Hierarchy depth preserved (2-3 levels matching domain complexity)
    - Context inheritance eliminates redundancy

