---
description: Code agent behavior index maintenance
globs:
  - "**/*-rule.mdc"
  - "**/*-cmd.md"
  - "**/*-runner.py"
  - "**/behavior.json"
  - "**/.cursor/rules/**"
  - "**/.cursor/commands/**"
---

**When** any rule, command, function, or MCP config changes,
**then** update the behavior index for the feature and refresh the global index.

**Always:**
* Detect additions, updates, or deletions in `behaviors/*/cursor/`.
* Record feature name, file type, path, and modification timestamp.
* Update both local (`behaviors/<feature>/behavior-index.json`) and global (`.cursor/behavior-index.json`) indexes.
* Log the number of behaviors detected and updated.
* **The Cursor environment must constantly refer to the behavior index during chat** to discover available commands, rules, functions, and MCP configs.
* **On workspace open or new chat session**, if behavior files have changed, automatically suggest running `\behavior-consistency` to check for inconsistencies.

**Never:**
* Manually edit index files.
* Include draft or experimental behaviors in the index.


**Executing Commands:**
* `\behavior-index` â€” [what the command is] [when to call it]