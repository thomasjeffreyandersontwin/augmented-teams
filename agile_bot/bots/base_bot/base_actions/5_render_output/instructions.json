{
  "actionName": "render_output",
  "instructions": [
    "**MANDATORY: Before rendering any output, you MUST load and review the project's clarification.json and planning.json files from the project's docs/ directory. These files contain critical requirements, decisions, and context that MUST be reflected in all rendered artifacts.**",
    "",
    "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**",
    "",
    "**CRITICAL: CONTENT.JSON PARSING - MANDATORY:**",
    "",
    "1. Load and parse `{bot}/behaviors/{behavior}/content/{output_name}.json` - these files defines ALL outputs that must be rendered",
    "2. Parse ALL entries in each {output_name}.json file to identify all templates that need to be run",
    "3. Each output entry specifies: name, path, template, and instructions",
    "4. Process ALL outputs defined in content/outputs.json - do not skip any",
    "",
    "**CRITICAL: Run ALL templates and ALL builders in this action**",
    "",
    "**BUILDER PATTERN - MANDATORY:**",
    "For each builder specified in content/{output_name}.json:",
    "1. Load the builder config JSON from `{bot}/behaviors/{behavior}/content/{output_name}.json`",
    "2. The config JSON specifies: name, path, template, builder, and output",
    "3. Run the builder Python file: `{bot}/behaviors/{behavior}/content/templates/{builder}`",
    "4. Pass the builder config JSON path and project_path to the builder",
    "5. Builder reads: template/config (from content/{output_name}.json) → project input data (from project docs) → generates → project output (to project path specified in config)",
    "6. Pattern: template/config JSON → builder → project input data → project output file",
    "",
    "**BUILDER EXECUTION:**",
    "1. For each {output_name}.json in content/ that has a 'builder' field:",
    "   - Load {output_name}.json to get builder config",
    "   - Find builder file at: {bot}/behaviors/{behavior}/content/templates/{builder}",
    "   - Execute: python {builder_file} {output_name}.json {project_path}",
    "   - Builder reads project input from project_path/docs/ (as specified in knowledge_graph.json)",
    "   - Builder writes output to project_path/{path}/{output} (as specified in {output_name}.json)",
    "2. Run ALL builder files in `{bot}/behaviors/{behavior}/content/templates/*builder*.py`",
    "3. Run any template files (markdown, DrawIO, JSON, etc.) that do NOT have a builder specified",
    "4. Process both template-based rendering AND builder-based generation",
    "",
    "Transform the structured content into rendered artifacts using available templates or builders.",
    "",
    "**Output Instructions:**",
    "{{output_instructions}}  --> load from all {bot}/behaviors/{behavior}/content/{output_name}.json",
    "",
    "**SYNCHRONIZATION SCRIPTS - MANDATORY:**",
    "After rendering is complete and user confirms ready to proceed:",
    "1. Check for synchronization scripts in {bot}/behaviors/{behavior}/content/synchronize/",
    "2. Load synchronize/output.json (if exists) to identify sync scripts/templates",
    "3. For each sync script/template defined in output.json:",
    "   - Execute sync scripts (Python files) with appropriate parameters",
    "   - Run sync templates (markdown, JSON, etc.) if specified",
    "   - Follow the pattern: sync config → project data → sync output",
    "4. Wait for user confirmation that render is complete before running sync scripts",
    "5. Report sync results to user"
  ]
}


