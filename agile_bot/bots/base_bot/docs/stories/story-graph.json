{
  "epics": [
    {
      "name": "Build Agile Bots",
      "sequential_order": 1.0,
      "sub_epics": [
        {
          "name": "Generate Bot Server And Tools",
          "sequential_order": 1.0,
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Provides Context of New Bot",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Drop Bot Builder Behavior into Chat",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Create Bot Scaffolding",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Generate MCP Bot Server",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Server Generator receives Bot Config",
                    "THEN Generator generates unique MCP Server instance with Unique server name from bot name",
                    "AND Generated server includes Bot Config reference",
                    "AND Generated server leverages Specific Bot instantiation code"
                  ]
                },
                {
                  "name": "Generate Behavior Action Tools",
                  "sequential_order": 2,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN Generator processes Bot Config",
                    "THEN Generator creates tool code for each (behavior, action) pair",
                    "AND Enumerates all behaviors and actions from Bot Config",
                    "AND For each pair, generates tool code with unique name, trigger words, forwarding logic",
                    "AND Tool catalog prepared with all generated tool instances"
                  ]
                },
                {
                  "name": "Deploy MCP BOT Server",
                  "sequential_order": 3,
                  "connector": "and",
                  "users": [],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN Generation Complete",
                    "THEN Generator deploys/starts generated MCP Server",
                    "AND Server initializes in separate thread",
                    "AND Server registers with MCP Protocol Handler using unique server name",
                    "AND Server publishes tool catalog to AI Chat",
                    "AND Each tool entry includes name, description, trigger patterns, parameters"
                  ]
                },
                {
                  "name": "Restart MCP Server To Load Code Changes",
                  "sequential_order": 4,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "test_file": "test_restart_mcp_server.py",
                  "acceptance_criteria": [
                    "WHEN Bot code changes are detected",
                    "THEN MCP Server clears Python bytecode cache (__pycache__)",
                    "AND MCP Server restarts to load new code",
                    "AND Server restarts gracefully without losing state",
                    "AND Server re-registers with MCP Protocol Handler after restart"
                  ],
                  "scenarios": [
                    {
                      "name": "Clear Python bytecode cache",
                      "steps": "Given __pycache__ directories exist with .pyc files\nWhen clear_python_cache is called\nThen All __pycache__ directories are removed\nAnd All .pyc files are deleted\nAnd Cache is cleared before server restart",
                      "test_method": "test_clear_python_bytecode_cache"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Invoke MCP Bot Server",
      "sequential_order": 2.0,
      "sub_epics": [
        {
          "name": "Init Project",
          "sequential_order": 1.0,
          "test_file": "test_init_project.py",
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Shares Context and Project Location",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Drops Behavior Folder in Chat w/ relevant Bot Config",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Determines Working Area From Current Dir",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Confirm Location",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Project In Context",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Initialize Project Location",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "test_class": "TestInitializeProjectLocation",
                  "acceptance_criteria": [
                    "(AC) WHEN Bot behavior is invoked for the first time (no saved location exists)",
                    "(AC) THEN Bot detects current directory from context",
                    "(AC) AND Bot presents location to user for confirmation",
                    "(AC) AND Bot waits for user to confirm or provide different location",
                    "(AC) AND Bot saves confirmed location to persistent storage",
                    "(AC) WHEN Bot behavior is invoked",
                    "(AC) AND Saved location exists",
                    "(AC) AND Current directory matches saved location",
                    "(AC) THEN Bot uses saved location without asking for confirmation",
                    "(AC) AND Bot proceeds directly to next action",
                    "(AC) WHEN Bot behavior is invoked",
                    "(AC) AND Saved location exists",
                    "(AC) AND Current directory is DIFFERENT from saved location",
                    "(AC) THEN Bot presents new location to user for confirmation",
                    "(AC) AND Bot asks if user wants to switch to new location",
                    "(AC) AND Bot saves confirmed location if user approves change"
                  ]
                },
                {
                  "name": "Locates Existing Project  State",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Bot"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Intercepts Tool Call With Project Check",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "Bot"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Guards Prevent Writes Without Project",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "Bot"
                  ],
                  "story_type": "system",
                  "test_file": "test_guards_prevent_writes_without_project.py",
                  "test_class": "TestActivityTrackerGuard",
                  "acceptance_criteria": [
                    "WHEN Activity tracker attempts to log activity",
                    "AND current_project.json does NOT exist",
                    "THEN Activity tracker does NOT write to activity log",
                    "AND Activity tracking fails gracefully without error",
                    "WHEN Workflow attempts to save state",
                    "AND current_project.json does NOT exist",
                    "THEN Workflow does NOT save workflow_state.json",
                    "AND Workflow state save fails gracefully without error"
                  ],
                  "scenarios": [
                    {
                      "name": "Activity not tracked when current_project missing",
                      "steps": "Given current_project.json does NOT exist\nWhen Action attempts to track activity\nThen Activity tracker detects missing current_project\nAnd Activity tracker does NOT write to activity log\nAnd Action continues execution (non-blocking)",
                      "test_method": "test_activity_not_tracked_when_current_project_missing"
                    },
                    {
                      "name": "Activity tracked when current_project exists",
                      "steps": "Given current_project.json exists with valid project_area\nWhen Action attempts to track activity\nThen Activity tracker writes to project_area/activity_log.json\nAnd Activity entry is successfully logged",
                      "test_method": "test_activity_tracked_when_current_project_exists"
                    },
                    {
                      "name": "Initialize project action not tracked without current_project",
                      "steps": "Given current_project.json does NOT exist\nWhen initialize_project action executes\nThen Activity tracker does NOT log initialize_project activity\nAnd initialize_project can still execute (it creates current_project)",
                      "test_method": "test_initialize_project_action_not_tracked_without_current_project"
                    },
                    {
                      "name": "Workflow state not saved when current_project missing",
                      "steps": "Given current_project.json does NOT exist\nWhen Action attempts to save workflow state\nThen Workflow guard detects missing current_project\nAnd Workflow does NOT write workflow_state.json\nAnd Action continues execution (non-blocking)",
                      "test_method": "test_workflow_state_not_saved_when_current_project_missing"
                    },
                    {
                      "name": "Workflow state saved when current_project exists",
                      "steps": "Given current_project.json exists\nWhen Action attempts to save workflow state\nThen Workflow writes to project_area/workflow_state.json\nAnd Workflow state is successfully persisted",
                      "test_method": "test_workflow_state_saved_when_current_project_exists"
                    },
                    {
                      "name": "Completed actions not saved when current_project missing",
                      "steps": "Given current_project.json does NOT exist\nWhen Action attempts to save completed_actions\nThen Workflow guard prevents write\nAnd completed_actions are NOT persisted\nAnd Action continues execution",
                      "test_method": "test_completed_actions_not_saved_when_current_project_missing"
                    }
                  ]
                },
                {
                  "name": "Move to Project",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Stores Activity for Initialize Project Action",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Route To Project Tool",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Bot"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Create Project Folder",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Saves Project State to Agent State File",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Updates Project Area and Creates Directory Structure",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Speaks Trigger Words For Bot Tool",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Invoke Bot Tool",
          "sequential_order": 2.0,
          "test_file": "test_invoke_bot_tool.py",
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Invoke MCP BOT Tool",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "system",
                  "test_class": "TestBotToolInvocation",
                  "acceptance_criteria": [
                    "WHEN AI Chat invokes any generated tool",
                    "THEN Tool uses inherited BaseTool logic to invoke correct behavior action on preloaded bot",
                    "AND Bot class preloaded at server startup",
                    "AND Tool directly routes to behavior action method of preloaded Bot class",
                    "AND Bot.Behavior compiles and returns instructions",
                    "AND MCP tool injects instructions into AI Chat context"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Perform Behavior Action",
          "sequential_order": 3.0,
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Inject Behavior Action Instructions",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "test_class": "TestBehaviorActionInstructions",
                  "acceptance_criteria": [
                    "WHEN Tool invokes Bot.Behavior.Action method",
                    "THEN Behavior Action loads instructions from behavior and base_actions",
                    "AND Action merges base instructions with behavior-specific instructions",
                    "AND Compiled instructions returned for injection into AI Chat"
                  ]
                },
                {
                  "name": "Inject Guardrails as Part of Clarify Requirements",
                  "sequential_order": 2,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Gather Context Action",
                    "THEN Action checks for guardrails in behavior/guardrails/required_context/",
                    "WHEN guardrails exist, THEN Action loads key_questions.json and evidence.json",
                    "AND Action injects guardrails into clarify requirements section"
                  ]
                },
                {
                  "name": "Inject Planning Criteria Into Instructions",
                  "sequential_order": 3,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Planning Action",
                    "THEN Action checks for guardrails in behavior/guardrails/planning/",
                    "WHEN guardrails exist, THEN Action loads typical_assumptions.json and decision_criteria files",
                    "AND Action injects planning guardrails into planning section"
                  ]
                },
                {
                  "name": "Inject Knowledge Graph Template for Build Knowledge",
                  "sequential_order": 4,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Build Knowledge Action",
                    "THEN Action loads knowledge graph template from behavior/content/knowledge_graph/",
                    "AND Action injects knowledge graph template path and build instructions",
                    "AND Action injects validation rules reference"
                  ]
                },
                {
                  "name": "Inject Render Templates and Transformers",
                  "sequential_order": 5,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Render Output Action",
                    "THEN Action loads render templates and transformer methods",
                    "AND Action injects template path, transformer path, and spec path"
                  ]
                },
                {
                  "name": "Inject Validation Rules for Validate Rules Action",
                  "sequential_order": 6,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Validate Rules Action",
                    "THEN Action loads common bot rules from base_bot/rules/",
                    "AND Action loads behavior-specific rules",
                    "AND Action merges and injects rules into validation section"
                  ]
                },
                {
                  "name": "Inject Correct Bot Instructions",
                  "sequential_order": 7,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Correct Bot Action",
                    "THEN Action loads correct bot instructions from base_actions",
                    "AND Action injects correction instructions into compiled instructions"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Execute Behavior Actions",
      "sequential_order": 3.0,
      "sub_epics": [
        {
          "name": "Gather Context",
          "sequential_order": 1.0,
          "test_file": "test_gather_context.py",
          "sub_epics": [
            {
              "name": "Review Context For Answers And Evidence",
              "sequential_order": 1.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Finds Questions and Evidence form Context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Answers Questions and Evidence from Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Presents Answers and Evidence to User",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Injects Gather Context Instructions",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "Bot  Behavor"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject  Questions and Evidence",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "Bot  Behavor"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Reads Injected Gather Context Instructions",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Questions And Answers",
                      "sequential_order": 4,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Answers Questions and Evidence",
                      "sequential_order": 5,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "or",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Gather Context Instructions(hope)",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Load + inject Questions and Evidence",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Bot  Behavor"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Provide Answers and Evidence",
              "sequential_order": 2.0,
              "story_groups": [
                {
                  "type": "or",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Pause based on context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Pauses",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Submit Answers and Evidence to Tools for Saving",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Saves Answers and Evidence",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Calls Behavior Planning Tool",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Tracks Activity for Gather Context Action",
                      "sequential_order": 4,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceeds to follow planning",
                      "sequential_order": 5,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Saves Answers and Evidencein Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceeds to follow planning (we Hope)",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Decide Planning Criteria Action",
          "sequential_order": 2.0,
          "test_file": "test_decide_planning_criteria.py",
          "sub_epics": [
            {
              "name": "Provide Decision Criteria and Assumptions",
              "sequential_order": 1.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Present Assumptions and Decisions to User",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Find Planning Instructions from Context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Decision Criteria and Assumptions from Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Make Assumptions and Decisions from Context",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Inject Planning Instructions",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject Decision Criteria and Assumptions",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Planning Instructions",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Decision Criteria and Assumptions",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Make Assumptions and Decisions",
                      "sequential_order": 5,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Make Decisons and Assumptions",
              "sequential_order": 2.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Save Assumptions and Decisions using Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceed to Build Knowledge using context",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "or",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Pause based on context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Pauses",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Submit Final Assumptions and Decisions to Tools for Saving",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Save Final Assumptions and Decisions",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Call Build Knowledge Tool",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Track Activity for Planning Action",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceed to Build Knowledge",
                      "sequential_order": 5,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Reviews Clarifications and Planning Responses",
              "sequential_order": 3.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Key Questions Clarifications from context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Decision Criteria and Assumptions from Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Answers and Evidence from Context",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Inject Decision Criteria and Assumptions Loading Instructions",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject Key Questions and Clarifications Loading Instructions",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Key Questions Clarifications",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Decision Criteria and Assumptions",
                      "sequential_order": 4,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Load + Inject  Answers + Evidence",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Answers and Evidence",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Build Knowledge Action",
          "sequential_order": 3.0,
          "test_file": "test_build_knowledge.py",
          "sub_epics": [
            {
              "name": "Build Knowledge Graph",
              "sequential_order": 1.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Knowledge Graph Template and Builder Instructions",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Build Knowledge Graph From Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Inject Knowledge Graph Template and Builder Instructions",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Build Knowledge Instructions",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Saves Knowledge Graph To Project",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Validate With Rules",
              "sequential_order": 2.0
            },
            {
              "name": "Edit Knowledge Graph",
              "sequential_order": 3.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Save Knowledge Graph using Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceed to Build Knowledge using context",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Submit Knowledge Graph to Build Knowledge Tools for Saving",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Save Knowledge Graph",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Call Render Output Tool",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Track Activity for Build Knowledge Action",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Read Render Output Instructions and Data",
              "sequential_order": 4.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Render Output Instructions in Context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Transformer Methods in Context",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Templates in Context",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Structured Content in Context",
                      "sequential_order": 4,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Inject Render Output Instructions",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject Load Transformer Methods Instructuion",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject  Load Template Instructuion",
                      "sequential_order": 3,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject  Load Structured Content Instructions",
                      "sequential_order": 4,
                      "connector": "opt",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Render Output Instructions",
                      "sequential_order": 5,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read  Injected Transformer Methods Instructions",
                      "sequential_order": 6,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read  Injected TemplateInstructions",
                      "sequential_order": 7,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Read  Injected Structured ContentInstructions",
                      "sequential_order": 8,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Load + Inject Template",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Load +Inject Transformer Methods",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Load +  Inject Srtuctured  Content",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Template",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Template",
                      "sequential_order": 5,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Transformer Methods",
                      "sequential_order": 6,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Instructions Injected Structured Content",
                      "sequential_order": 7,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Render Output",
          "sequential_order": 4.0,
          "test_file": "test_render_output.py",
          "sub_epics": [
            {
              "name": "Generate Rendered Outputs",
              "sequential_order": 1.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Rendered Outputs in Context and Display",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Pause",
                      "sequential_order": 2,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Provide Feedback then Update",
                      "sequential_order": 3,
                      "connector": "and",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Update Rendered Outputs Based on Feedback",
                      "sequential_order": 4,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Render Outputs Using Components  In Context",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Pause from Context",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Submit Rendered Content to Tool for Saving",
                      "sequential_order": 2,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Present Rendered Outputs to User",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Render Output Using Injected Componenents",
                      "sequential_order": 1,
                      "connector": "opt",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Load Rendered Content",
              "sequential_order": 2.0,
              "story_groups": [
                {
                  "type": "and",
                  "connector": null,
                  "stories": [
                    {
                      "name": "Find Rendered Content Instructions from Context and Load",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "and",
                  "stories": [
                    {
                      "name": "Review Answers, Assumptions",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Agile Bot"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Review Built Knowledge",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Agile Bot"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Inject  Load Rendered Content Instructions",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Follow Injected Instructions and Load Content",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Bot"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "type": "and",
                  "connector": "or",
                  "stories": [
                    {
                      "name": "Load + Inject Rendered Content",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Present Rendered Content",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Bot"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Validate Knowledge & Content Against Rules",
          "sequential_order": 5.0,
          "test_file": "test_validate_knowledge_and_content_against_rules.py",
          "story_groups": [
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Find  Behavior Specific Rules from Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Find Common Bot Rules from Context",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "FInd Content in Context",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "or",
              "connector": "and",
              "stories": [
                {
                  "name": "Find Rules in Context and validate against Rules",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Validate Content vs Injected Diagnostics and Rules",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Validate Content Using Injected Diagnostics + Rules",
                  "sequential_order": 8,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Pause",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Read report and make changes",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Content through Context",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Inject Validation Rules for Validate Rules Action",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Validate Rules Action",
                    "THEN Action loads common bot rules from base_bot/rules/",
                    "AND Action loads behavior-specific rules",
                    "AND Action merges and injects rules into validation section"
                  ]
                }
              ]
            },
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Submit Content to Tool for Saving",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Content",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Track Activity for Validate Rules Action",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Call Correct-Bot Action Tool",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Load + Inject Diagnostics Results, Knowledge, Content Instructions",
                  "sequential_order": 7,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Proceed to Correct-Bot trough  context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Review Answers, Assumptions",
          "sequential_order": 6.0,
          "story_groups": [
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Find Original and Improved Work From Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "or",
              "stories": [
                {
                  "name": "Inject Correct Bot Instructions",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Correct Bot Action",
                    "THEN Action loads correct bot instructions from base_actions",
                    "AND Action injects correction instructions into compiled instructions"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Reviews Rules",
          "sequential_order": 7.0,
          "story_groups": [
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Finds Rules and Prompts In Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Determine Issues From Context",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Suggest Corrections Based On Context",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Reads Injected Rules and Prompts",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Determine Issues",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Suggest Bot Corrections Based on Instructions",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Reviews Violations",
          "sequential_order": 8.0,
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Provide Suggested Bot Corrections",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Review . Modifiy. Apprtove Correctins",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Makes Corrections to Found Rules and Instructions",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "type": "and",
              "connector": "and",
              "stories": [
                {
                  "name": "Submit Bot Guidance and Rules Changes to Correct-Bot Tool",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Save Correcions",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Suggest Bot Corrections",
          "sequential_order": 9.0,
          "story_groups": [
            {
              "type": "and",
              "connector": null,
              "stories": [
                {
                  "name": "Track Activity for Correct-Bot Action",
                  "sequential_order": 7,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "increments": [
    {
      "name": "User Manually Drops Config In to AI Chat",
      "priority": 1,
      "epics": [
        {
          "name": "Build Agile Bots",
          "sequential_order": 1,
          "sub_epics": [
            {
              "name": "Generate Bot Server And Tools",
              "sequential_order": 1,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Provides Context of New Bot",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Drop Bot Builder Behavior into Chat",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Create Bot Scaffolding",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Invoke MCP Bot Server",
          "sequential_order": 2,
          "sub_epics": [
            {
              "name": "Init Project",
              "sequential_order": 1,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Shares Context and Project Location",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Drops Behavior Folder in Chat w/ relevant Bot Config",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Determines Working Area From Current Dir",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Confirm Location",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Project In Context",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "name": "Invoke Bot Tool",
              "sequential_order": 2,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Provides addtnl Instructions",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Invokes Correct Behavior Action (We Hope)",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "name": "Perform Behavior Action",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Correct, Feedback, Proceed",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Folllows Behavior Istructions From Context",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Saves Content",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Proceeds to Next Actions following instructions In Context",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Execute Behavior Actions",
          "sequential_order": 3,
          "sub_epics": [
            {
              "name": "Gather Context",
              "sequential_order": 1,
              "sub_epics": [
                {
                  "name": "Review Context For Answers And Evidence",
                  "sequential_order": 2,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Finds Questions and Evidence form Context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Answers Questions and Evidence from Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Presents Answers and Evidence to User",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Gather Context Instructions(hope)",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Provide Answers and Evidence",
                  "sequential_order": 3,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Pause based on context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceeds to follow planning (we Hope)",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Saves Answers and Evidencein Context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Decide Planning Criteria Action",
              "sequential_order": 5,
              "sub_epics": [
                {
                  "name": "Provide Decision Criteria and Assumptions",
                  "sequential_order": 4,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Present Assumptions and Decisions to User",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Planning Instructions from Context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Decision Criteria and Assumptions from Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Make Assumptions and Decisions from Context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Make Decisons and Assumptions",
                  "sequential_order": 6,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Save Assumptions and Decisions using Context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceed to Build Knowledge using context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Pause based on context",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Reviews Clarifications and Planning Responses",
                  "sequential_order": 8,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Find Key Questions Clarifications from context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Decision Criteria and Assumptions from Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Answers and Evidence from Context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Build Knowledge Action",
              "sequential_order": 7,
              "sub_epics": [
                {
                  "name": "Build Knowledge Graph",
                  "sequential_order": 9,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Find Knowledge Graph Template and Builder Instructions",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Build Knowledge Graph From Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Edit Knowledge Graph",
                  "sequential_order": 11,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Correct, Feedback, Proceed",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Human"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Save Knowledge Graph using Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Proceed to Build Knowledge using context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Read Render Output Instructions and Data",
                  "sequential_order": 12,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Find Structured Content in Context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Render Output Instructions in Context",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Transformer Methods in Context",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Find Templates in Context",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Render Output",
              "sequential_order": 13,
              "sub_epics": [
                {
                  "name": "Generate Rendered Outputs",
                  "sequential_order": 14,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Find Rendered Outputs in Context and Display",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Pause",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Provide Feedback then Update",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Update Rendered Outputs Based on Feedback",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Render Outputs Using Components  In Context",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                },
                {
                  "name": "Load Rendered Content",
                  "sequential_order": 15,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Find Rendered Content Instructions from Context and Load",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Review Answers, Assumptions",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Agile Bot"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Review Built Knowledge",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Agile Bot"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Validate Knowledge & Content Against Rules",
              "sequential_order": 16,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Find  Behavior Specific Rules from Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Find Common Bot Rules from Context",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "FInd Content in Context",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Pause",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Read report and make changes",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Content through Context",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Proceed to Correct-Bot trough  context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Find Rules in Context and validate against Rules",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "name": "Review Answers, Assumptions",
              "sequential_order": 17,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Find Original and Improved Work From Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Finds Rules and Prompts In Context",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Determine Issues From Context",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            },
            {
              "name": "Suggest Bot Corrections",
              "sequential_order": 18,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Review . Modifiy. Apprtove Correctins",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Makes Corrections to Found Rules and Instructions",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Provide Suggested Bot Corrections",
                  "sequential_order": 3,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Save Correcions in Context",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Suggest Corrections Based On Context",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Simplest MCP",
      "priority": 2,
      "epics": [
        {
          "name": "Build Agile Bots",
          "sequential_order": 1,
          "sub_epics": [
            {
              "name": "Generate Bot Server And Tools",
              "sequential_order": 1,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Generate MCP Bot Server",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Server Generator receives Bot Config",
                    "THEN Generator generates unique MCP Server instance with Unique server name from bot name",
                    "AND Generated server includes Bot Config reference",
                    "AND Generated server leverages Specific Bot instantiation code"
                  ]
                },
                {
                  "name": "Generate Behavior Action Tools",
                  "sequential_order": 2,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN Generator processes Bot Config",
                    "THEN Generator creates tool code for each (behavior, action) pair",
                    "AND Enumerates all behaviors and actions from Bot Config",
                    "AND For each pair, generates tool code with unique name, trigger words, forwarding logic",
                    "AND Tool catalog prepared with all generated tool instances"
                  ]
                },
                {
                  "name": "Deploy MCP BOT Server",
                  "sequential_order": 3,
                  "connector": "and",
                  "users": [],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN Generation Complete",
                    "THEN Generator deploys/starts generated MCP Server",
                    "AND Server initializes in separate thread",
                    "AND Server registers with MCP Protocol Handler using unique server name",
                    "AND Server publishes tool catalog to AI Chat",
                    "AND Each tool entry includes name, description, trigger patterns, parameters"
                  ]
                },
                {
                  "name": "Generate Cursor Awareness Files",
                  "sequential_order": 4,
                  "connector": "and",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Generator runs for a bot",
                    "THEN Generator creates .cursor/rules/mcp-tool-awareness.mdc file",
                    "AND File includes trigger word patterns mapped to MCP tool types",
                    "WHEN workspace rules file is generated",
                    "THEN Rules instruct AI to check MCP tools FIRST before manual file operations",
                    "AND Rules include pattern: hear trigger word  check available tools  invoke tool OR inform user",
                    "WHEN Generator creates memory about tool awareness",
                    "THEN Memory created via update_memory API",
                    "AND Memory persists pattern for AI to check MCP tools when hearing workflow trigger words",
                    "AND Memory includes handling for ask mode vs agent mode"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Invoke MCP Bot Server",
          "sequential_order": 2,
          "sub_epics": [
            {
              "name": "Init Project",
              "sequential_order": 1,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Speaks Trigger Words For Bot Tool",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user"
                }
              ]
            },
            {
              "name": "Invoke Bot Tool",
              "sequential_order": 2,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Invoke MCP BOT Tool",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN AI Chat invokes any generated tool",
                    "THEN Tool uses inherited BaseTool logic to invoke correct behavior action on preloaded bot",
                    "AND Bot class preloaded at server startup",
                    "AND Tool directly routes to behavior action method of preloaded Bot class",
                    "AND Bot.Behavior compiles and returns instructions",
                    "AND MCP tool injects instructions into AI Chat context"
                  ]
                },
                {
                  "name": "AI Chat Triggers MCP Tool",
                  "sequential_order": 2,
                  "connector": "and",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN AI receives command with workflow trigger words (explore, shape, discover, arrange, validate)",
                    "THEN AI reads workspace rules and memory to identify matching MCP tool",
                    "AND AI invokes the appropriate MCP tool",
                    "WHEN AI is in ask mode and recognizes need for MCP tool",
                    "THEN AI informs user to switch to agent mode",
                    "AND AI explains that MCP tools are only available in agent mode"
                  ]
                }
              ]
            },
            {
              "name": "Perform Behavior Action",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Inject Behavior Action Instructions",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN Tool invokes Bot.Behavior.Action method",
                    "THEN Behavior Action loads instructions from behavior and base_actions",
                    "AND Action merges base instructions with behavior-specific instructions",
                    "AND Compiled instructions returned for injection into AI Chat"
                  ]
                },
                {
                  "name": "Inject Guardrails as Part of Clarify Requirements",
                  "sequential_order": 2,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Gather Context Action",
                    "THEN Action checks for guardrails in behavior/guardrails/required_context/",
                    "WHEN guardrails exist, THEN Action loads key_questions.json and evidence.json",
                    "AND Action injects guardrails into clarify requirements section"
                  ]
                },
                {
                  "name": "Inject Planning Criteria Into Instructions",
                  "sequential_order": 3,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Planning Action",
                    "THEN Action checks for guardrails in behavior/guardrails/planning/",
                    "WHEN guardrails exist, THEN Action loads typical_assumptions.json and decision_criteria files",
                    "AND Action injects planning guardrails into planning section"
                  ]
                },
                {
                  "name": "Inject Knowledge Graph Template for Build Knowledge",
                  "sequential_order": 4,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Build Knowledge Action",
                    "THEN Action loads knowledge graph template from behavior/content/knowledge_graph/",
                    "AND Action injects knowledge graph template path and build instructions",
                    "AND Action injects validation rules reference"
                  ]
                },
                {
                  "name": "Inject Render Templates and Transformers",
                  "sequential_order": 5,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Render Output Action",
                    "THEN Action loads render templates and transformer methods",
                    "AND Action injects template path, transformer path, and spec path"
                  ]
                },
                {
                  "name": "Inject Validation Rules for Validate Rules Action",
                  "sequential_order": 6,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Validate Rules Action",
                    "THEN Action loads common bot rules from base_bot/rules/",
                    "AND Action loads behavior-specific rules",
                    "AND Action merges and injects rules into validation section"
                  ]
                },
                {
                  "name": "Inject Correct Bot Instructions",
                  "sequential_order": 7,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Correct Bot Action",
                    "THEN Action loads correct bot instructions from base_actions",
                    "AND Action injects correction instructions into compiled instructions"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Execute Behavior Actions",
          "sequential_order": 3,
          "sub_epics": [
            {
              "name": "Gather Context",
              "sequential_order": 1,
              "sub_epics": [
                {
                  "name": "Review Context For Answers And Evidence",
                  "sequential_order": 2,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Read Questions And Answers",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Answers Questions and Evidence",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject Guardrails as Part of Clarify Requirements",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "system",
                      "acceptance_criteria": [
                        "WHEN MCP Specific Behavior Action Tool invokes Gather Context Action",
                        "THEN Action checks for guardrails in behavior/guardrails/required_context/",
                        "WHEN guardrails exist, THEN Action loads key_questions.json and evidence.json",
                        "AND Action injects guardrails into clarify requirements section"
                      ]
                    },
                    {
                      "name": "Reads Injected Gather Context Instructions",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject  Questions and Evidence",
                      "sequential_order": 5,
                      "connector": "or",
                      "users": [
                        "Bot  Behavor"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Decide Planning Criteria Action",
              "sequential_order": 5,
              "sub_epics": [
                {
                  "name": "Provide Decision Criteria and Assumptions",
                  "sequential_order": 4,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Inject Planning Criteria Into Instructions",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "system",
                      "acceptance_criteria": [
                        "WHEN MCP Specific Behavior Action Tool invokes Planning Action",
                        "THEN Action checks for guardrails in behavior/guardrails/planning/",
                        "WHEN guardrails exist, THEN Action loads typical_assumptions.json and decision_criteria files",
                        "AND Action injects planning guardrails into planning section"
                      ]
                    }
                  ]
                },
                {
                  "name": "Reviews Clarifications and Planning Responses",
                  "sequential_order": 8,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Inject Decision Criteria and Assumptions Loading Instructions",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Inject Key Questions and Clarifications Loading Instructions",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Key Questions Clarifications",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Injected Decision Criteria and Assumptions",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Build Knowledge Action",
              "sequential_order": 7,
              "sub_epics": [
                {
                  "name": "Read Render Output Instructions and Data",
                  "sequential_order": 12,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Inject Knowledge Graph Template for Build Knowledge",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "system",
                      "acceptance_criteria": [
                        "WHEN MCP Specific Behavior Action Tool invokes Build Knowledge Action",
                        "THEN Action loads knowledge graph template from behavior/content/knowledge_graph/",
                        "AND Action injects knowledge graph template path and build instructions",
                        "AND Action injects validation rules reference"
                      ]
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Render Output",
              "sequential_order": 13,
              "sub_epics": [
                {
                  "name": "Generate Rendered Outputs",
                  "sequential_order": 14,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Inject Render Templates and Transformers",
                      "sequential_order": 1,
                      "connector": "and",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "system",
                      "acceptance_criteria": [
                        "WHEN MCP Specific Behavior Action Tool invokes Render Output Action",
                        "THEN Action loads render templates and transformer methods",
                        "AND Action injects template path, transformer path, and spec path"
                      ]
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Validate Knowledge & Content Against Rules",
              "sequential_order": 16,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Inject Validation Rules for Validate Rules Action",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Validate Rules Action",
                    "THEN Action loads common bot rules from base_bot/rules/",
                    "AND Action loads behavior-specific rules",
                    "AND Action merges and injects rules into validation section"
                  ]
                }
              ]
            },
            {
              "name": "Review Answers, Assumptions",
              "sequential_order": 17,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Inject Correct Bot Instructions",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "acceptance_criteria": [
                    "WHEN MCP Specific Behavior Action Tool invokes Correct Bot Action",
                    "THEN Action loads correct bot instructions from base_actions",
                    "AND Action injects correction instructions into compiled instructions"
                  ]
                }
              ]
            },
            {
              "name": "Suggest Bot Corrections",
              "sequential_order": 18,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Suggest Bot Corrections Based on Instructions",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                },
                {
                  "name": "Submit Bot Guidance and Rules Changes to Correct-Bot Tool",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Track Activity for Correct-Bot Action",
                  "sequential_order": 7,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Workflow",
      "priority": 3,
      "epics": [
        {
          "name": "Build Agile Bots",
          "sequential_order": 1,
          "sub_epics": [
            {
              "name": "Generate Bot Server And Tools",
              "sequential_order": 1,
              "sub_epics": [],
              "test_file": "test_generate_bot_server_and_tools.py",
              "stories": [
                {
                  "name": "Generate Bot Tools",
                  "test_class": "TestGenerateBotTools",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "user",
                  "acceptance_criteria": [
                    "WHEN MCP Server Generator scans base_actions/ folder",
                    "THEN Generator discovers actions by reading each action folder",
                    "AND Generator reads action_config.json from each action folder",
                    "AND action_config.json specifies: name, workflow (true/false), order, next_action",
                    "AND Generator creates tools for all discovered actions",
                    "AND Tools include workflow state awareness based on action_config.workflow flag"
                  ],
                  "scenarios": [
                    {
                      "name": "Generator creates ONE bot tool with workflow state awareness",
                      "steps": "Given base_actions/ contains folders: gather_context, decide_planning_criteria, build_knowledge, render_output, validate_rules\nAnd Bot Config defines behaviors: shape, discovery, exploration, scenarios\nAnd Action configs specify workflow sequence and transitions\nWhen Generator creates bot tool\nThen Generator creates ONE bot tool (not separate tools per behavior/action)\nAnd Bot tool can read workflow_state to determine current behavior/action\nAnd Bot tool routes to correct behavior/action based on workflow state\nAnd Bot tool uses action configuration to understand workflow transitions",
                      "test_method": "test_generator_creates_bot_tool_for_test_bot"
                    },
                    {
                      "name": "Bot tool routes to workflow actions based on state",
                      "steps": "Given bot tool is created\nAnd workflow state shows: current_action='story_bot.discovery.build_knowledge'\nAnd build_knowledge action configuration specifies workflow=true, next_action='render_output'\nWhen bot tool is invoked\nThen Bot tool reads workflow state\nAnd Bot tool extracts current behavior and action\nAnd Bot tool routes to discovery.build_knowledge\nAnd Bot tool executes build_knowledge with workflow awareness (auto-transition to render_output)",
                      "test_method": ""
                    },
                    {
                      "name": "Bot tool routes to independent actions via parameter",
                      "steps": "Given bot tool is created\nAnd correct_bot action configuration specifies workflow=false (independent action)\nAnd user invokes bot tool with parameter action='correct_bot'\nWhen bot tool is invoked with action parameter\nThen Bot tool routes to correct_bot action\nAnd Bot tool does NOT use workflow state for routing (parameter overrides)\nAnd Bot tool executes correct_bot without workflow transitions\nAnd Independent actions can be invoked any time via parameter"
                    },
                    {
                      "name": "Bot tool defaults to first behavior/action when no state exists",
                      "steps": "Given bot tool is created\nAnd workflow state does NOT exist\nAnd Bot Config first behavior is 'shape' with first action 'gather_context'\nWhen bot tool is invoked without parameters\nThen Bot tool detects no workflow state\nAnd Bot tool defaults to first behavior ('shape')\nAnd Bot tool defaults to first action ('gather_context')\nAnd Bot tool routes to shape.gather_context\nAnd Bot tool creates initial workflow state"
                    },
                    {
                      "name": "Bot tool recognizes terminal actions",
                      "steps": "Given bot tool is created\nAnd workflow state shows: current_action='story_bot.exploration.validate_rules'\nAnd validate_rules action configuration specifies workflow=true, next_action=null (terminal)\nWhen bot tool is invoked\nThen Bot tool reads workflow state\nAnd Bot tool routes to exploration.validate_rules\nAnd Bot tool recognizes next_action=null (terminal action)\nAnd Bot tool does NOT inject next action instructions after validate_rules completes\nAnd Bot tool indicates workflow is complete"
                    },
                    {
                      "name": "Bot tool handles auto_progress actions",
                      "steps": "Given bot tool is created\nAnd workflow state shows: current_action='story_bot.discovery.build_knowledge'\nAnd build_knowledge action configuration specifies auto_progress=true, next_action='render_output'\nWhen bot tool is invoked\nThen Bot tool routes to discovery.build_knowledge\nAnd Bot tool recognizes auto_progress=true\nAnd Bot tool automatically transitions to render_output after build_knowledge completes\nAnd Bot tool does NOT wait for human confirmation before transitioning"
                    }
                  ]
                },
                {
                  "name": "Generate Behavior Tools",
                  "test_class": "TestGenerateBehaviorTools",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "story_type": "user",
                  "acceptance_criteria": [
                    "WHEN Generator enumerates behaviors from Bot Config",
                    "THEN Generator creates behavior-specific tools for each action in base_actions/",
                    "AND Generator loads action_config.json from each action folder",
                    "AND Workflow actions (workflow: true) get automatic transition logic using next_action field",
                    "AND Independent actions (workflow: false) get no automatic transition logic",
                    "AND Each behavior tool knows action sequence from ordered action_config.json files"
                  ],
                  "scenarios": [
                    {
                      "name": "Generator creates behavior tools for all defined behaviors",
                      "steps": "Given Bot Config defines behaviors: ['shape', 'discovery', 'exploration', 'scenarios']\nAnd base_actions/ contains: gather_context, decide_planning_criteria, build_knowledge, render_output, validate_rules\nWhen Generator enumerates behaviors from Bot Config\nThen Generator creates 4 behavior tools (ONE tool per behavior)\nAnd Each behavior tool can route to all 5 actions\nAnd Tools are named: shape_bot, discovery_bot, exploration_bot, scenarios_bot\nAnd Each tool routes between actions based on parameters or workflow state",
                      "test_method": "test_generator_creates_behavior_tools_for_test_bot_with_4_behaviors"
                    },
                    {
                      "name": "Generator applies workflow transitions to workflow actions",
                      "steps": "Given behavior 'shape' is being processed\nAnd gather_context/action configuration specifies workflow=true, order=1, next_action='decide_planning_criteria'\nAnd decide_planning_criteria/action configuration specifies workflow=true, order=2, next_action='build_knowledge'\nWhen Generator creates shape_bot tool\nThen shape_bot tool knows about all actions and their workflow configuration\nAnd When shape_bot routes to gather_context, it includes automatic transition logic to decide_planning_criteria\nAnd When shape_bot routes to decide_planning_criteria, it includes automatic transition logic to build_knowledge\nAnd Tool uses action configuration to determine transitions"
                    },
                    {
                      "name": "Generator excludes transition logic for independent actions",
                      "steps": "Given behavior 'shape' is being processed\nAnd correct_bot/action configuration specifies workflow=false, order=null, next_action=null\nWhen Generator creates shape_bot tool\nAnd shape_bot is invoked with action parameter 'correct_bot'\nThen shape_bot routes to correct_bot action\nAnd shape_bot does NOT include automatic transition logic for correct_bot\nAnd shape_bot does NOT inject next action instructions after correct_bot\nAnd correct_bot is independently invokable via parameter"
                    },
                    {
                      "name": "Generator orders action sequence from action configuration",
                      "steps": "Given behavior 'shape' is being processed\nAnd action configuration files specify: gather_context(order=1), decide_planning_criteria(order=2), build_knowledge(order=3), render_output(order=4), validate_rules(order=5)\nAnd correct_bot specifies workflow=false (no order)\nWhen Generator creates shape_bot tool\nThen shape_bot knows action sequence from action configuration order fields\nAnd shape_bot workflow sequence is: gather_context  decide_planning_criteria  build_knowledge  render_output  validate_rules\nAnd shape_bot can route to correct_bot independently (not in workflow sequence)"
                    },
                    {
                      "name": "Generator handles terminal action in behavior sequence",
                      "steps": "Given behavior 'exploration' is being processed\nAnd validate_rules/action configuration specifies workflow=true, order=5, next_action=null\nWhen Generator creates exploration_bot tool\nAnd exploration_bot routes to validate_rules\nThen exploration_bot recognizes validate_rules specifies next_action=null (terminal)\nAnd exploration_bot does NOT inject next action instructions after validate_rules\nAnd exploration_bot indicates workflow completion when validate_rules finishes"
                    },
                    {
                      "name": "Generator applies auto_progress for seamless transitions",
                      "steps": "Given behavior 'discovery' is being processed\nAnd build_knowledge/action configuration specifies workflow=true, order=3, next_action='render_output', auto_progress=true\nWhen Generator creates discovery_bot tool\nAnd discovery_bot routes to build_knowledge\nThen discovery_bot recognizes auto_progress=true for build_knowledge\nAnd discovery_bot automatically transitions to render_output without human confirmation\nAnd discovery_bot automatically invokes render_output after build_knowledge completes"
                    },
                    {
                      "name": "Generator handles missing behavior in Bot Config",
                      "steps": "Given Bot Config defines behaviors: ['shape', 'discovery']\nAnd user expects 'exploration' behavior to be available\nWhen Generator enumerates behaviors from Bot Config\nThen Generator creates tools only for 'shape' and 'discovery' behaviors: shape_bot, discovery_bot\nAnd Generator does NOT create exploration_bot tool\nAnd Generator warns user that some behaviors may be missing (non-blocking)"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Invoke MCP Bot Server",
          "sequential_order": 2,
          "sub_epics": [
            {
              "name": "Init Project",
              "sequential_order": 1,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Initialize Project Location",
                  "sequential_order": 1,
                  "connector": "and",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "test_class": "TestInitializeProjectLocation",
                  "acceptance_criteria": [
                    "(AC) WHEN Bot behavior is invoked for the first time (no saved location exists)",
                    "(AC) THEN Bot detects current directory from context",
                    "(AC) AND Bot presents location to user for confirmation",
                    "(AC) AND Bot waits for user to confirm or provide different location",
                    "(AC) AND Bot saves confirmed location to persistent storage",
                    "(AC) WHEN Bot behavior is invoked",
                    "(AC) AND Saved location exists",
                    "(AC) AND Current directory matches saved location",
                    "(AC) THEN Bot uses saved location without asking for confirmation",
                    "(AC) AND Bot proceeds directly to next action",
                    "(AC) WHEN Bot behavior is invoked",
                    "(AC) AND Saved location exists",
                    "(AC) AND Current directory is DIFFERENT from saved location",
                    "(AC) THEN Bot presents new location to user for confirmation",
                    "(AC) AND Bot asks if user wants to switch to new location",
                    "(AC) AND Bot saves confirmed location if user approves change"
                  ]
                }
              ]
            },
            {
              "name": "Invoke Bot Tool",
              "sequential_order": 2,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Route To MCP Behavior  Tool",
                  "sequential_order": 4,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user",
                  "acceptance_criteria": [
                    "WHEN AI Chat invokes bot tool without specifying specific action",
                    "THEN Router checks Workflow State for current behavior",
                    "AND Router loads workflow_state.json from {project_area}/workflow_state.json",
                    "AND Router extracts current_behavior from state",
                    "AND Router routes to current behavior's MCP tool (not default/first behavior)",
                    "AND Routing uses saved state to determine correct behavior dynamically"
                  ],
                  "scenarios": [
                    {
                      "name": "Router routes to current behavior from saved state",
                      "steps": "Given workflow state exists at project_area/workflow state\nAnd workflow state contains: current_behavior='story_bot.discovery', current_action='story_bot.discovery.gather_context'\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router loads workflow state from project_area/\nAnd Router parses workflow state successfully\nAnd Router extracts current_behavior='story_bot.discovery'\nAnd Router routes invocation to discovery_bot tool\nAnd Router does NOT route to default 'shape' behavior (first behavior)"
                    },
                    {
                      "name": "Router defaults to first behavior when workflow state missing",
                      "steps": "Given workflow state does NOT exist at project_area/workflow state\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router attempts to load workflow state from project_area/\nAnd Router detects file not found\nAnd Router defaults to first behavior ('shape') from Bot Config\nAnd Router routes invocation to shape_bot tool\nAnd Router creates initial workflow state with current_behavior='story_bot.shape', current_action='story_bot.shape.gather_context'"
                    },
                    {
                      "name": "Router handles malformed workflow state file",
                      "steps": "Given workflow state exists at project_area/workflow state\nAnd workflow state contains invalid JSON syntax (malformed)\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router attempts to parse workflow state\nAnd Router detects JSON parsing error\nAnd Router warns user in chat about malformed state file (non-blocking)\nAnd Router defaults to first behavior ('shape') from Bot Config\nAnd Router routes invocation to shape_bot tool"
                    },
                    {
                      "name": "Router handles missing current_behavior field in state",
                      "steps": "Given workflow state exists at project_area/workflow state\nAnd workflow state is valid JSON but missing current_behavior field\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router loads workflow state successfully\nAnd Router attempts to extract current_behavior field\nAnd Router detects missing current_behavior field\nAnd Router warns user in chat about incomplete state file (non-blocking)\nAnd Router defaults to first behavior ('shape') from Bot Config\nAnd Router routes invocation to shape_bot tool"
                    },
                    {
                      "name": "Router routes to non-default behavior mid-workflow",
                      "steps": "Given workflow state contains: current_behavior='story_bot.exploration', current_action='story_bot.exploration.build_knowledge'\nAnd Bot Config behaviors list is: shape, discovery, exploration, scenarios\nAnd 'exploration' is the third behavior (not first)\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_behavior='story_bot.exploration'\nAnd Router routes to exploration_bot tool (third behavior, not first)\nAnd Router demonstrates state-based routing (not hardcoded to default)"
                    },
                    {
                      "name": "Router handles behavior not found in Bot Config",
                      "steps": "Given workflow state contains: current_behavior='story_bot.invalid_behavior', current_action='story_bot.invalid_behavior.gather_context'\nAnd Bot Config defines behaviors: shape, discovery, exploration, scenarios\nAnd 'invalid_behavior' is NOT in Bot Config behaviors list\nAnd AI Chat invokes bot tool without specifying behavior\nWhen Router receives bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_behavior='story_bot.invalid_behavior'\nAnd Router attempts to find 'invalid_behavior' in Bot Config\nAnd Router fails to find matching behavior\nAnd Router warns user that behavior not found in configuration (non-blocking)\nAnd Router defaults to first behavior ('shape') from Bot Config\nAnd Router routes invocation to shape_bot tool"
                    }
                  ]
                },
                {
                  "name": "Forward To Behavior and Current Action",
                  "sequential_order": 5,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user",
                  "test_class": "TestForwardToCurrentBehaviorAndCurrentAction",
                  "acceptance_criteria": [
                    "WHEN Router receives behavior tool invocation",
                    "THEN Router loads Workflow State from persistent storage",
                    "AND Router extracts current_behavior and current_action from state",
                    "AND Router forwards call to Bot.Behavior[current_behavior].Action[current_action]",
                    "AND Forwarding ensures user resumes at exact point they left off",
                    "AND If workflow state file doesn't exist, defaults to first behavior/first action"
                  ],
                  "scenarios": [
                    {
                      "name": "Router forwards to current action within behavior",
                      "steps": "Given workflow state shows: current_behavior='story_bot.discovery', current_action='story_bot.discovery.build_knowledge'\nAnd discovery behavior has ordered actions: gather_context(1), decide_planning_criteria(2), build_knowledge(3), render_output(4), validate_rules(5)\nWhen Router receives discovery_bot tool invocation\nThen Router loads workflow state from project_area/\nAnd Router extracts current_behavior='story_bot.discovery'\nAnd Router extracts current_action='story_bot.discovery.build_knowledge'\nAnd Router forwards call to discovery_bot with parameter action='build_knowledge'\nAnd Router does NOT forward to first action (gather_context)\nAnd User resumes at exact action (build_knowledge) where they left off",
                      "test_method": "test_behavior_tool_forwards_to_current_action_within_behavior"
                    },
                    {
                      "name": "Router defaults to first behavior and first action when state missing",
                      "steps": "Given workflow state does NOT exist at project_area/workflow state\nAnd Bot Config first behavior is 'shape' with first action 'gather_context'\nWhen Router receives bot tool invocation\nThen Router attempts to load workflow state\nAnd Router detects file not found\nAnd Router defaults to first behavior='shape'\nAnd Router defaults to first action='gather_context' within shape\nAnd Router forwards call to shape_bot with parameter action='gather_context'\nAnd Router creates initial workflow state with current_behavior='story_bot.shape', current_action='story_bot.shape.gather_context'",
                      "test_method": "test_bot_tool_defaults_to_first_behavior_and_first_action_when_state_missing"
                    },
                    {
                      "name": "Behavior tool forwards to current action within behavior",
                      "steps": "Given a behavior tool for 'discovery' behavior\nAnd workflow state shows current_action='build_knowledge'\nWhen Behavior tool receives invocation\nThen Behavior tool forwards to build_knowledge action",
                      "test_method": "test_behavior_tool_forwards_to_current_action_within_behavior"
                    },
                    {
                      "name": "Behavior tool sets workflow to current behavior when state shows different behavior",
                      "steps": "Given a behavior tool for 'exploration' behavior\nAnd workflow state shows current_behavior='discovery'\nWhen Behavior tool receives invocation\nThen workflow state updated to current_behavior='exploration'",
                      "test_method": "test_behavior_tool_sets_workflow_to_current_behavior_when_state_shows_different_behavior"
                    },
                    {
                      "name": "Behavior tool defaults to first action when state missing",
                      "steps": "Given a behavior tool for 'shape' behavior\nAnd workflow state does NOT exist\nWhen Behavior tool receives invocation\nThen Behavior tool defaults to first action",
                      "test_method": "test_behavior_tool_defaults_to_first_action_when_state_missing"
                    },
                    {
                      "name": "Action called directly saves workflow state",
                      "steps": "Given Bot is initialized with current_project set\nAnd No workflow state exists yet\nWhen Action is called directly (e.g., bot.shape.gather_context())\nThen workflow_state.json is created with current_behavior and current_action\nAnd This ensures state is saved whether action is called via forward or directly",
                      "test_method": "test_action_called_directly_saves_workflow_state"
                    },
                    {
                      "name": "Router resumes mid-workflow at specific action",
                      "steps": "Given workflow state shows: current_behavior='story_bot.exploration', current_action='story_bot.exploration.decide_planning_criteria'\nAnd exploration behavior actions: gather_context(1), decide_planning_criteria(2), build_knowledge(3), render_output(4), validate_rules(5)\nAnd decide_planning_criteria is NOT in completed_actions (was interrupted)\nWhen Router receives exploration_bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_action='story_bot.exploration.decide_planning_criteria'\nAnd current_action indicates action was previously started\nAnd Router forwards to exploration_bot with parameter action='decide_planning_criteria'\nAnd Router notifies user: action was previously started (not completed)\nAnd User can choose to retry or continue decide_planning_criteria"
                    },
                    {
                      "name": "Router handles missing current_action field in state",
                      "steps": "Given workflow state exists with: current_behavior='story_bot.discovery'\nAnd workflow state is missing current_action field\nWhen Router receives bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_behavior='story_bot.discovery'\nAnd Router attempts to extract current_action\nAnd Router detects missing current_action field\nAnd Router warns user about incomplete state file (non-blocking)\nAnd Router defaults to first action of discovery behavior (gather_context)\nAnd Router forwards to discovery_bot with parameter action='gather_context'"
                    },
                    {
                      "name": "Router handles invalid action name in state",
                      "steps": "Given workflow state exists with: current_behavior='story_bot.shape', current_action='story_bot.shape.invalid_action_name'\nAnd shape behavior has valid actions: gather_context, decide_planning_criteria, build_knowledge, render_output, validate_rules\nAnd 'invalid_action_name' is NOT in shape behavior's action list\nWhen Router receives bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_behavior='story_bot.shape', current_action='story_bot.shape.invalid_action_name'\nAnd Router attempts to find 'invalid_action_name' in shape behavior\nAnd Router fails to find matching action\nAnd Router warns user that action not found in behavior (non-blocking)\nAnd Router defaults to first action of shape behavior (gather_context)\nAnd Router forwards to shape_bot with parameter action='gather_context'"
                    },
                    {
                      "name": "Router forwards to terminal action",
                      "steps": "Given workflow state exists with: current_behavior='story_bot.scenarios', current_action='story_bot.scenarios.validate_rules'\nAnd validate_rules is terminal action (next_action=null)\nWhen Router receives bot tool invocation\nThen Router loads workflow state\nAnd Router extracts current_action='story_bot.scenarios.validate_rules'\nAnd Router forwards to scenarios_bot with parameter action='validate_rules'\nAnd Router identifies validate_rules as terminal action\nAnd Router indicates workflow is complete (no next action available)"
                    },
                    {
                      "name": "Router preserves action execution state when resuming",
                      "steps": "Given workflow state exists with: current_behavior='story_bot.discovery', current_action='story_bot.discovery.render_output', timestamp='2025-12-03T10:30:00Z'\nAnd completed_actions list contains: [{action_state: 'story_bot.discovery.gather_context', timestamp: '2025-12-03T10:00:00Z'}, {action_state: 'story_bot.discovery.decide_planning_criteria', timestamp: '2025-12-03T10:15:00Z'}]\nWhen Router receives bot tool invocation\nThen Router loads workflow state with full state history\nAnd Router extracts current_action='story_bot.discovery.render_output'\nAnd Router preserves completed_actions audit trail\nAnd Router forwards to discovery_bot with parameter action='render_output' and context about previous actions\nAnd User sees that render_output was started but not completed\nAnd User sees audit trail of previously completed actions"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Perform Behavior Action",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Inject Next behavor-Action to Instructions",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "user",
                  "acceptance_criteria": [
                    "WHEN Workflow action completes execution successfully (workflow: true in action_config.json)",
                    "THEN Action loads its action_config.json and reads next_action field",
                    "WHEN next_action is not null, THEN Action injects instructions: \"When done, proceed to [next_action_name]\"",
                    "WHEN next_action is null, THEN Action indicates workflow is complete",
                    "WHEN action is independent (workflow: false), THEN Action does NOT inject next action instructions",
                    "AND User doesn't need to remember workflow sequence"
                  ],
                  "scenarios": [
                    {
                      "name": "Workflow action injects next action instructions on completion",
                      "steps": "Given current action is gather_context\nAnd gather_context/action configuration has: workflow=true, order=1, next_action='decide_planning_criteria'\nAnd gather_context action execution completes successfully\nWhen gather_context finalizes execution\nThen Action loads gather_context/action configuration\nAnd Action reads next_action field='decide_planning_criteria'\nAnd Action detects next_action is not null\nAnd Action injects instructions into AI context: \"When done, proceed to decide_planning_criteria\"\nAnd AI knows to invoke decide_planning_criteria tool next\nAnd User does not need to remember that decide_planning_criteria comes after gather_context"
                    },
                    {
                      "name": "Terminal action indicates workflow completion (next_action null)",
                      "steps": "Given current action is validate_rules\nAnd validate_rules/action configuration has: workflow=true, order=5, next_action=null\nAnd validate_rules action execution completes successfully\nWhen validate_rules finalizes execution\nThen Action loads validate_rules/action configuration\nAnd Action reads next_action field=null\nAnd Action detects next_action is null (terminal action)\nAnd Action injects instructions into AI context: \"Workflow is complete. No further actions required.\"\nAnd AI knows workflow has finished\nAnd User is notified that all workflow steps are done"
                    },
                    {
                      "name": "Independent action does NOT inject next action instructions",
                      "steps": "Given current action is correct_bot\nAnd correct_bot/action configuration has: workflow=false, order=null, next_action=null\nAnd correct_bot action execution completes successfully\nWhen correct_bot finalizes execution\nThen Action loads correct_bot/action configuration\nAnd Action reads workflow field=false\nAnd Action detects this is independent action (not workflow action)\nAnd Action does NOT inject next action instructions\nAnd AI does NOT proceed to any specific next action\nAnd User must explicitly invoke next action if desired"
                    },
                    {
                      "name": "Action handles missing action configuration gracefully",
                      "steps": "Given current action is gather_context\nAnd gather_context/action configuration file does NOT exist\nAnd gather_context action execution completes successfully\nWhen gather_context finalizes execution\nThen Action attempts to load action configuration\nAnd Action detects file not found\nAnd Action warns user in chat about missing configuration (non-blocking)\nAnd Action does NOT inject next action instructions\nAnd Workflow continues but without automatic transition guidance"
                    },
                    {
                      "name": "Action handles malformed action configuration",
                      "steps": "Given current action is decide_planning_criteria\nAnd decide_planning_criteria/action configuration exists but contains invalid JSON\nAnd decide_planning_criteria action execution completes successfully\nWhen decide_planning_criteria finalizes execution\nThen Action attempts to parse action configuration\nAnd Action detects JSON parsing error\nAnd Action warns user in chat about malformed configuration (non-blocking)\nAnd Action does NOT inject next action instructions\nAnd Workflow continues but without automatic transition guidance"
                    },
                    {
                      "name": "Action injects next action for mid-workflow action",
                      "steps": "Given current action is build_knowledge\nAnd build_knowledge/action configuration has: workflow=true, order=3, next_action='render_output'\nAnd build_knowledge is neither first nor last action in workflow\nAnd build_knowledge action execution completes successfully\nWhen build_knowledge finalizes execution\nThen Action loads build_knowledge/action configuration\nAnd Action reads next_action field='render_output'\nAnd Action injects instructions: \"When done, proceed to render_output\"\nAnd AI knows to invoke render_output tool next\nAnd Seamless transition maintains workflow continuity"
                    },
                    {
                      "name": "Action with auto_progress flag injects immediate transition",
                      "steps": "Given current action is build_knowledge\nAnd build_knowledge/action configuration has: workflow=true, order=3, next_action='render_output', auto_progress=true\nAnd build_knowledge action execution completes successfully\nWhen build_knowledge finalizes execution\nThen Action loads build_knowledge/action configuration\nAnd Action reads next_action='render_output' and auto_progress=true\nAnd Action injects instructions: \"Automatically proceed to render_output now (no human confirmation needed)\"\nAnd AI immediately invokes render_output tool without waiting for user input\nAnd Workflow transitions seamlessly without user intervention"
                    },
                    {
                      "name": "First action injects next action instructions",
                      "steps": "Given current action is gather_context (first action in workflow)\nAnd gather_context/action configuration has: workflow=true, order=1, next_action='decide_planning_criteria'\nAnd gather_context action execution completes successfully\nWhen gather_context finalizes execution\nThen Action loads action configuration\nAnd Action reads next_action='decide_planning_criteria'\nAnd Action injects instructions: \"When done, proceed to decide_planning_criteria\"\nAnd Workflow begins seamless transition chain from first action"
                    }
                  ]
                },
                {
                  "name": "Saves Behavior State",
                  "sequential_order": 8,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "user",
                  "acceptance_criteria": [
                    "WHEN Action execution completes",
                    "THEN Behavior updates Workflow State with current_behavior and current_action",
                    "AND State persisted to {project_area}/workflow_state.json file",
                    "AND State includes timestamp of last action execution",
                    "AND State includes completed_actions list showing full history",
                    "AND State includes current_behavior name",
                    "AND State includes current_action name",
                    "AND Persistence ensures workflow can be resumed after interruption (crash, close chat, etc.)"
                  ],
                  "scenarios": [
                    {
                      "name": "State persisted when action starts",
                      "steps": "Given behavior is 'discovery'\nAnd action is 'gather_context'\nAnd gather_context has not yet started\nWhen gather_context action starts\nThen Behavior updates workflow state with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.gather_context'\n  - timestamp=[current timestamp]\nAnd workflow state is written to project_area/workflow state\nAnd State persists to disk before action logic executes"
                    },
                    {
                      "name": "State updated when action completes",
                      "steps": "Given workflow state shows: current_behavior='story_bot.discovery', current_action='story_bot.discovery.gather_context'\nAnd gather_context is in progress\nWhen gather_context action completes\nThen Behavior updates workflow state with:\n  - timestamp=[completion timestamp]\nAnd Behavior appends to completed_actions list: {action_state: 'story_bot.discovery.gather_context', timestamp: [completion timestamp]}\nAnd workflow state is written to project_area/workflow state\nAnd State reflects successful completion"
                    },
                    {
                      "name": "Completed actions list maintains full audit trail",
                      "steps": "Given completed_actions contains: gather_context, decide_planning_criteria (2 entries)\nAnd workflow state shows current_action='story_bot.exploration.build_knowledge'\nWhen build_knowledge action completes\nThen Behavior appends to completed_actions: {action_state: 'story_bot.exploration.build_knowledge', timestamp: [timestamp]}\nAnd completed_actions list now contains 3 entries\nAnd completed_actions maintains chronological order\nAnd Each entry includes: action_state (full path), timestamp\nAnd Audit trail shows complete workflow history"
                    },
                    {
                      "name": "Resume workflow after interruption (action started but not completed)",
                      "steps": "Given workflow state has: current_behavior='story_bot.shape', current_action='story_bot.shape.decide_planning_criteria', timestamp='2025-12-03T10:00:00Z'\nAnd completed_actions does NOT contain decide_planning_criteria entry\nAnd user's chat crashed or closed during decide_planning_criteria execution\nAnd user reopens chat and invokes bot tool\nWhen Router loads workflow state\nThen Router detects current_action not in completed_actions (started but not completed)\nAnd Router presents to user: \"decide_planning_criteria was started but not completed. Retry or continue?\"\nAnd If user chooses retry: Behavior restarts decide_planning_criteria from beginning\nAnd If user chooses continue: Behavior attempts to continue from where it left off\nAnd User can resume workflow despite interruption"
                    },
                    {
                      "name": "State persists across chat sessions",
                      "steps": "Given workflow state has: current_behavior='story_bot.discovery', current_action='story_bot.discovery.build_knowledge', timestamp='2025-12-03T09:00:00Z'\nAnd user closed chat window after completing build_knowledge\nAnd user opens new chat session hours later\nWhen user invokes bot tool in new session\nThen Router loads workflow state from persistent storage\nAnd Router extracts current_behavior='story_bot.discovery', current_action='story_bot.discovery.build_knowledge'\nAnd Router determines next action is render_output (per action configuration)\nAnd Workflow resumes seamlessly from where user left off hours ago\nAnd Persistence ensures workflow continuity across sessions"
                    },
                    {
                      "name": "State handles workflow restart (first action)",
                      "steps": "Given workflow state does NOT exist\nAnd user is starting new workflow\nWhen first action (gather_context) starts\nThen Behavior creates new workflow state with:\n  - current_behavior='story_bot.shape' (first behavior)\n  - current_action='story_bot.shape.gather_context' (first action)\n  - completed_actions=[] (empty)\n  - timestamp=[current timestamp]\nAnd workflow state is saved to project_area/\nAnd Fresh workflow state is initialized"
                    },
                    {
                      "name": "State tracks multiple completed actions with timestamps",
                      "steps": "Given completed_actions contains 3 entries: gather_context (10:00), decide_planning_criteria (10:15), build_knowledge (10:30)\nAnd workflow state shows current_action='story_bot.exploration.build_knowledge'\nWhen render_output action starts at 10:45\nThen Behavior updates workflow state with:\n  - current_action='story_bot.exploration.render_output'\n  - timestamp='2025-12-03T10:45:00Z'\nAnd completed_actions list still contains 3 previous entries with original timestamps\nAnd State shows full chronological history of workflow progression"
                    },
                    {
                      "name": "State handles file write failure gracefully",
                      "steps": "Given workflow state shows: current_action='story_bot.exploration.validate_rules'\nAnd validate_rules action is complete\nAnd project_area/workflow state file is write-protected or disk is full\nWhen Behavior attempts to save workflow state\nThen Behavior detects file write error\nAnd Behavior warns user in chat: \"Unable to save workflow state. Progress may not be preserved.\" (non-blocking)\nAnd Action execution continues despite state persistence failure\nAnd Workflow is not blocked by state save failure"
                    },
                    {
                      "name": "State includes duration for completed actions",
                      "steps": "Given gather_context action started at timestamp='2025-12-03T10:00:00Z'\nWhen gather_context action completes at timestamp='2025-12-03T10:05:30Z'\nThen Behavior calculates duration: 330 seconds (5.5 minutes)\nAnd Behavior updates completed_actions with: {action_state: 'story_bot.shape.gather_context', timestamp: '2025-12-03T10:05:30Z', duration: 330}\nAnd Duration provides performance metrics for workflow analysis"
                    }
                  ]
                },
                {
                  "name": "Workflow Determines Next Action From Completed Actions",
                  "sequential_order": 9,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "test_file": "test_workflow_action_sequence.py",
                  "acceptance_criteria": [
                    "WHEN Workflow loads state from workflow_state.json",
                    "THEN Workflow uses completed_actions as source of truth (not current_action)",
                    "AND Workflow ignores stale current_action field if it doesn't match completed_actions",
                    "AND Workflow determines next uncompleted action from action sequence",
                    "AND Workflow starts at first action when no completed_actions exist",
                    "AND Workflow handles missing workflow_state.json file gracefully"
                  ],
                  "scenarios": [
                    {
                      "name": "Workflow determines next action from completed_actions (ignores stale current_action)",
                      "steps": "Given workflow_state.json shows: completed_actions=[initialize_project], current_action='build_knowledge' (stale)\nWhen Workflow loads state\nThen Workflow ignores stale current_action='build_knowledge'\nAnd Workflow uses completed_actions to determine next action\nAnd Workflow sets current_state='gather_context' (next after initialize_project)\nAnd Workflow does NOT use stale current_action field",
                      "test_method": "test_workflow_determines_next_action_from_completed_actions"
                    },
                    {
                      "name": "Workflow starts at first action when no completed_actions",
                      "steps": "Given workflow_state.json has empty completed_actions=[]\nWhen Workflow loads state\nThen Workflow determines current_state is first action in sequence\nAnd Workflow sets current_state='initialize_project'",
                      "test_method": "test_workflow_starts_at_first_action_when_no_completed_actions"
                    },
                    {
                      "name": "Workflow determines action after multiple completed actions",
                      "steps": "Given completed_actions=[initialize_project, gather_context]\nWhen Workflow loads state\nThen Workflow determines next uncompleted action\nAnd Workflow sets current_state='decide_planning_criteria'",
                      "test_method": "test_workflow_determines_action_after_multiple_completed_actions"
                    },
                    {
                      "name": "Workflow starts at first action when workflow_state.json missing",
                      "steps": "Given workflow_state.json file does NOT exist\nAnd current_project.json exists\nWhen Workflow is created\nThen Workflow creates new workflow state\nAnd Workflow sets current_state to first action\nAnd Workflow initializes empty completed_actions list",
                      "test_method": "test_workflow_starts_at_first_action_when_no_workflow_state_file_exists"
                    }
                  ]
                },
                {
                  "name": "Close Current Action",
                  "sequential_order": 10,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user",
                  "test_file": "test_close_current_action.py",
                  "acceptance_criteria": [
                    "WHEN User explicitly closes current action",
                    "THEN Action is marked complete and saved to completed_actions",
                    "AND Workflow transitions to next action in sequence",
                    "AND Closing final action keeps workflow at final action (no next action)",
                    "AND Closing action that requires confirmation but wasn't confirmed shows error",
                    "AND Closing already-completed action is idempotent (no error)"
                  ],
                  "scenarios": [
                    {
                      "name": "Close current action and transition to next",
                      "steps": "Given workflow is at action 'gather_context'\nAnd action has NOT been marked complete\nWhen User closes current action\nThen Action 'gather_context' is saved to completed_actions\nAnd Workflow transitions to 'decide_planning_criteria' (next action)",
                      "test_method": "test_close_current_action_marks_complete_and_transitions"
                    },
                    {
                      "name": "Close action when already at final action",
                      "steps": "Given workflow is at final action 'validate_rules'\nWhen User closes current action\nThen Action 'validate_rules' is saved to completed_actions\nAnd Workflow stays at 'validate_rules' (no next action available)",
                      "test_method": "test_close_action_at_final_action_stays_at_final"
                    },
                    {
                      "name": "Close final action and transition to next behavior",
                      "steps": "Given workflow is at final action 'validate_rules' of behavior 'shape'\nWhen User closes current action\nThen Action 'validate_rules' is saved to completed_actions\nAnd Workflow stays at 'validate_rules' (end of behavior)\nAnd Behavior transition to next behavior happens at Bot level",
                      "test_method": "test_close_final_action_transitions_to_next_behavior"
                    },
                    {
                      "name": "Error when closing action that requires confirmation",
                      "steps": "Given workflow is at 'initialize_project'\nAnd action has NOT been saved to completed_actions (requires confirmation)\nWhen User attempts to close action\nThen is_action_completed returns False\nAnd User cannot close action until confirmation provided",
                      "test_method": "test_error_when_closing_action_that_requires_confirmation"
                    },
                    {
                      "name": "Close action that's already completed (idempotent)",
                      "steps": "Given action 'gather_context' is already marked complete\nWhen User closes action again\nThen Action remains marked complete\nAnd No error occurs\nAnd Operation is idempotent",
                      "test_method": "test_close_handles_action_already_completed_gracefully"
                    }
                  ]
                },
                {
                  "name": "Activity Logged To Project Area Not Bot Area",
                  "sequential_order": 11,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "system",
                  "test_file": "test_activity_tracking_for_project_area.py",
                  "test_class": "TestActivityTrackingLocation",
                  "acceptance_criteria": [
                    "WHEN Action tracks activity",
                    "THEN Activity log is written to {project_area}/activity_log.json",
                    "AND Activity log is NOT written to bot directory",
                    "AND Activity log location is determined by current_project.json",
                    "AND Activity entries include correct action_state with full path"
                  ],
                  "scenarios": [
                    {
                      "name": "Activity logged to project_area not bot area",
                      "steps": "Given current_project.json specifies project_area='agile_bot/bots/base_bot/docs/stories'\nAnd action 'gather_context' executes\nWhen Activity logger creates entry\nThen Activity log file is at: project_area/activity_log.json\nAnd Activity log is NOT at: agile_bot/bots/story_bot/activity_log.json\nAnd Activity log location matches project_area from current_project.json",
                      "test_method": "test_activity_logged_to_project_area_not_bot_area"
                    },
                    {
                      "name": "Activity log contains correct entry",
                      "steps": "Given action 'gather_context' executes in behavior 'discovery'\nWhen Activity logger creates entry\nThen Activity log entry includes:\n  - action_state='story_bot.discovery.gather_context'\n  - timestamp\n  - Full path includes bot_name.behavior.action",
                      "test_method": "test_activity_log_contains_correct_entry"
                    }
                  ]
                },
                {
                  "name": "Proceed With Workflow",
                  "sequential_order": 12,
                  "connector": "or",
                  "users": [
                    "Human"
                  ],
                  "story_type": "user",
                  "test_file": "test_complete_workflow_integration.py",
                  "acceptance_criteria": [
                    "WHEN Complete workflow executes end-to-end",
                    "THEN All workflow fixes work together correctly",
                    "AND Workflow determines action from completed_actions",
                    "AND Guardrails load with number prefixes",
                    "AND Actions save state when called directly",
                    "AND Close tool marks complete and transitions",
                    "AND Jumping to different behavior-action updates state correctly"
                  ],
                  "scenarios": [
                    {
                      "name": "Complete end-to-end workflow test",
                      "steps": "Given workflow starts at initialize_project\nWhen User confirms location\nThen initialize_project saves to completed_actions\nAnd Workflow forwards to gather_context\nWhen User closes gather_context\nThen Workflow transitions to decide_planning_criteria\nWhen User jumps to discovery.gather_context (out of order)\nThen State correctly shows discovery.gather_context\nAnd All completed actions tracked across behaviors",
                      "test_method": "test_complete_workflow_end_to_end"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "Execute Behavior Actions",
          "sequential_order": 3,
          "sub_epics": [
            {
              "name": "Gather Context",
              "sequential_order": 2,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Track Activity for Gather Context Action",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestTrackActivityForGatherContextAction",
                  "acceptance_criteria": [
                    "WHEN GatherContextAction executes",
                    "THEN Action creates activity entry with timestamp, action name, behavior name",
                    "AND Activity entry appended to {project_area}/activity_log.json"
                  ],
                  "scenarios": [
                    {
                      "name": "Track activity when gather_context action starts",
                      "steps": "Given behavior is 'discovery'\nAnd action is 'gather_context'\nWhen gather_context action starts execution\nThen Activity logger creates entry with:\n  - timestamp=[start timestamp]\n  - action_state='story_bot.discovery.gather_context'\n  - inputs={source_files_count: 2, context_type: \"exploration\"}\nAnd Entry is appended to activity log at project_area/\nAnd Activity log records action initiation",
                      "test_method": "test_track_activity_when_gather_context_action_starts"
                    },
                    {
                      "name": "Track activity when gather_context action completes",
                      "steps": "Given gather_context action started at timestamp='2025-12-03T10:00:00Z'\nAnd activity log has entry for gather_context  \nWhen gather_context action finishes execution at timestamp='2025-12-03T10:05:30Z'\nThen Activity logger creates completion entry with:\n  - action_state='story_bot.discovery.gather_context'\n  - outputs={questions_count: 5, evidence_count: 3, file_path: \"clarifications.json\"}\n  - duration=330 (seconds: 5.5 minutes)\nAnd Entry is appended to activity log\nAnd Activity log shows complete execution record with metrics and file path",
                      "test_method": "test_track_activity_when_gather_context_action_completes"
                    },
                    {
                      "name": "Track multiple gather_context invocations across behaviors",
                      "steps": "Given activity log contains entry for story_bot.shape.gather_context completed at 09:00\nAnd activity log contains entry for story_bot.discovery.gather_context completed at 10:00\nWhen both entries are present in activity log\nThen activity log contains 2 separate entries:\n  - Entry 1: action_state='story_bot.shape.gather_context', timestamp='2025-12-03T09:00:00Z'\n  - Entry 2: action_state='story_bot.discovery.gather_context', timestamp='2025-12-03T10:00:00Z'\nAnd Each entry has its own inputs (metrics/paths), outputs (metrics/paths), and duration\nAnd Activity log distinguishes same action in different behaviors using full path",
                      "test_method": "test_track_multiple_gather_context_invocations_across_behaviors"
                    },
                    {
                      "name": "Track activity with user-provided context inputs",
                      "steps": "Given user context is available: story map document, increment details, source material\nAnd behavior is 'exploration'\nWhen gather_context action starts\nThen Activity logger records inputs including:\n  - source_files_count=3\n  - source_files_paths=[\"story-map.txt\", \"increment-2.txt\", \"source-material.md\"]\n  - context_type=\"exploration\"\nAnd Inputs capture file paths and counts, not full content\nAnd Activity log tracks what context was provided"
                    },
                    {
                      "name": "Track activity with gathered outputs",
                      "steps": "Given gather_context action completion is ready to log\nAnd Action results include: 5 key questions, 3 evidence items, 2 assumptions\nWhen Activity logger records completion\nThen Activity logger captures outputs including:\n  - questions_count=5\n  - evidence_count=3\n  - assumptions_count=2\n  - file_path=\"clarifications.json\"\n  - summary=\"Gathered context for 3 stories in increment 2\"\nAnd Outputs capture counts and file paths, not full content\nAnd Activity log shows metrics of what was produced"
                    },
                    {
                      "name": "Activity log handles file write failure gracefully",
                      "steps": "Given gather_context action is completing\nAnd project_area/activity log file is write-protected\nWhen Activity logger attempts to append entry\nThen Activity logger detects file write error\nAnd Activity logger warns user in chat: \"Unable to log activity. Audit trail may be incomplete.\" (non-blocking)\nAnd gather_context action continues execution despite logging failure\nAnd Action is not blocked by activity logging failure"
                    },
                    {
                      "name": "Activity log maintains chronological order",
                      "steps": "Given activity log contains 10 previous action entries\nAnd gather_context action completes at timestamp='2025-12-03T10:30:00Z'\nWhen Activity logger appends gather_context entry\nThen New entry is appended to end of activity log array\nAnd Activity log maintains chronological order by timestamp\nAnd Most recent actions appear at end of log"
                    }
                  ]
                },
                {
                  "name": "Proceed To Decide Planning",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestProceedToDecidePlanning",
                  "acceptance_criteria": [
                    "WHEN GatherContextAction completes execution",
                    "AND Human says action is done",
                    "THEN GatherContextAction saves Workflow State (per \"Saves Behavior State\" story)",
                    "AND Workflow injects next action instructions (per \"Inject Next Behavior-Action\" story)",
                    "AND Workflow proceeds to decide_planning_criteria"
                  ],
                  "scenarios": [
                    {
                      "name": "Seamless transition from gather_context to decide_planning_criteria",
                      "steps": "Given behavior is 'discovery'\nAnd gather_context action is complete\nAnd Human confirms \"done\" or \"proceed\"\nWhen gather_context action finalizes\nThen Action saves Workflow State with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.gather_context'\n  - timestamp=[completion time]\nAnd Action loads gather_context/action configuration\nAnd Action reads next_action='decide_planning_criteria'\nAnd Action injects AI instructions: \"When done, proceed to decide_planning_criteria\"\nAnd AI invokes decide_planning_criteria tool\nAnd Workflow transitions seamlessly to next action",
                      "test_method": "test_seamless_transition_from_gather_context_to_decide_planning_criteria"
                    },
                    {
                      "name": "User must confirm before transition",
                      "steps": "Given gather_context action is complete\nAnd Human has NOT yet confirmed completion\nWhen gather_context action waits for human feedback\nThen Action does NOT save workflow state as completed\nAnd Action does NOT inject next action instructions\nAnd Action does NOT proceed to decide_planning_criteria\nAnd AI waits for human to say \"done\" before transitioning"
                    },
                    {
                      "name": "Workflow state captures gather_context completion",
                      "steps": "Given gather_context action completes at timestamp='2025-12-03T10:05:30Z'\nAnd Human confirms \"done\"\nWhen Action saves workflow state\nThen workflow state is updated with:\n  - current_action='story_bot.exploration.gather_context'\n  - timestamp='2025-12-03T10:05:30Z'\nAnd completed_actions list includes: {action_state: 'story_bot.exploration.gather_context', timestamp: '2025-12-03T10:05:30Z'}\nAnd State persists to project_area/workflow state\nAnd If workflow is interrupted after this point, gather_context is marked as completed",
                      "test_method": "test_workflow_state_captures_gather_context_completion"
                    },
                    {
                      "name": "Next action instructions injected into AI context",
                      "steps": "Given gather_context action is complete\nAnd Human has confirmed \"done\"\nAnd gather_context/action configuration specifies next_action='decide_planning_criteria'\nWhen Action injects next action instructions\nThen AI context receives: \"When done, proceed to decide_planning_criteria\"\nAnd AI knows to invoke decide_planning_criteria tool next\nAnd User doesn't need to remember what comes after gather_context\nAnd Seamless transition is enabled by instruction injection"
                    },
                    {
                      "name": "Transition works across different behaviors",
                      "steps": "Given behavior is 'shape' (first behavior)\nAnd gather_context is complete in shape behavior\nAnd Human has confirmed \"done\"\nWhen gather_context transitions to next action\nThen Workflow proceeds to shape_decide_planning_criteria (not discovery_decide_planning_criteria)\nAnd Transition stays within same behavior\nAnd Each behavior has its own workflow sequence"
                    },
                    {
                      "name": "Workflow resumes at decide_planning_criteria after interruption",
                      "steps": "Given workflow state shows: current_action='story_bot.discovery.gather_context'\nAnd completed_actions contains gather_context entry\nAnd decide_planning_criteria has not yet started\nAnd chat session was interrupted\nWhen user reopens chat and invokes bot tool\nThen Router loads workflow state\nAnd Router sees gather_context is completed\nAnd Router determines next action is decide_planning_criteria\nAnd Router forwards to decide_planning_criteria action\nAnd Workflow resumes at correct next step despite interruption",
                      "test_method": "test_workflow_resumes_at_decide_planning_criteria_after_interruption"
                    },
                    {
                      "name": "Activity log records transition",
                      "steps": "Given gather_context action completes at 10:05:30\nAnd Human confirms \"done\"\nWhen gather_context saves state and transitions\nThen Activity log records:\n  - gather_context completion entry with action_state='story_bot.discovery.gather_context', duration=330\n  - Workflow state update showing transition to next action\nAnd Audit trail shows gather_context completed before decide_planning_criteria started"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Decide Planning Criteria",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Track Activity for Planning Action",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestTrackActivityForPlanningAction",
                  "acceptance_criteria": [
                    "WHEN PlanningAction executes",
                    "THEN Action creates activity entry with timestamp, action name, behavior name",
                    "AND Activity entry appended to {project_area}/activity_log.json"
                  ],
                  "scenarios": [
                    {
                      "name": "Track activity when planning action starts",
                      "steps": "Given behavior is 'exploration'\nAnd action is 'decide_planning_criteria'\nWhen decide_planning_criteria action starts execution\nThen Activity logger creates entry with:\n  - timestamp=[start timestamp]\n  - action_state='story_bot.exploration.decide_planning_criteria'\n  - inputs={questions_count: 5, evidence_count: 3, context_file_path: \"clarifications.json\"}\nAnd Entry is appended to activity log at project_area/\nAnd Activity log records action initiation"
                    },
                    {
                      "name": "Track activity when planning action completes",
                      "steps": "Given decide_planning_criteria action started at timestamp='2025-12-03T10:15:00Z'\nAnd activity log has entry for decide_planning_criteria\nWhen decide_planning_criteria action finishes execution at timestamp='2025-12-03T10:25:00Z'\nThen Activity logger creates completion entry with:\n  - action_state='story_bot.exploration.decide_planning_criteria'\n  - outputs={criteria_count: 4, assumptions_count: 2, decisions_count: 3, file_path: \"planning.json\"}\n  - duration=600 (seconds: 10 minutes)\nAnd Entry is appended to activity log\nAnd Activity log shows complete execution record with duration"
                    },
                    {
                      "name": "Track planning inputs from previous gather_context",
                      "steps": "Given gather_context outputs are available: 5 questions, 3 evidence items in clarifications.json\nAnd behavior is 'exploration'\nWhen decide_planning_criteria action starts\nThen Activity logger captures inputs including:\n  - gathered_questions=5\n  - gathered_evidence=3\n  - context_from=\"gather_context action output\"\nAnd Inputs show connection to previous action\nAnd Activity log traces workflow dependencies"
                    },
                    {
                      "name": "Track planning outputs (criteria and assumptions)",
                      "steps": "Given decide_planning_criteria action is complete\nAnd Action results include: 4 planning criteria, 2 assumptions, 3 decisions\nWhen Activity logger records completion\nThen Activity logger captures outputs including:\n  - criteria_count=4\n  - assumptions_count=2\n  - decisions_count=3\n  - summary=\"Defined planning approach for increment 3\"\nAnd Outputs are captured in activity log entry\nAnd Activity log shows what planning artifacts were produced"
                    },
                    {
                      "name": "Activity log maintains sequence across actions",
                      "steps": "Given activity log contains entry for gather_context (completed at 10:05:30)\nAnd decide_planning_criteria completes at 10:25:00\nWhen Activity logger appends decide_planning_criteria entry\nThen Activity log shows chronological sequence:\n  1. gather_context started (10:00:00)\n  2. gather_context completed (10:05:30)\n  3. decide_planning_criteria started (10:15:00)\n  4. decide_planning_criteria completed (10:25:00)\nAnd Activity log demonstrates workflow progression"
                    },
                    {
                      "name": "Track multiple planning invocations across behaviors",
                      "steps": "Given activity log contains entry for story_bot.shape.decide_planning_criteria completed at 09:20\nAnd activity log contains entry for story_bot.discovery.decide_planning_criteria completed at 10:15\nWhen both entries are present in activity log\nThen activity log contains 2 separate entries:\n  - Entry 1: action_state='story_bot.shape.decide_planning_criteria', timestamp='2025-12-03T09:20:00Z'\n  - Entry 2: action_state='story_bot.discovery.decide_planning_criteria', timestamp='2025-12-03T10:15:00Z'\nAnd Each entry has its own inputs (metrics/paths), outputs (metrics/paths), and duration\nAnd Activity log distinguishes same action in different behaviors"
                    },
                    {
                      "name": "Activity log handles file write failure gracefully",
                      "steps": "Given decide_planning_criteria action is completing\nAnd project_area/activity log file is write-protected\nWhen Activity logger attempts to append entry\nThen Activity logger detects file write error\nAnd Activity logger warns user in chat: \"Unable to log activity. Audit trail may be incomplete.\" (non-blocking)\nAnd decide_planning_criteria action continues execution despite logging failure\nAnd Action is not blocked by activity logging failure"
                    }
                  ]
                },
                {
                  "name": "Proceed To Build Knowledge",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestProceedToBuildKnowledge",
                  "acceptance_criteria": [
                    "WHEN PlanningAction completes execution",
                    "WHEN Human says action is done",
                    "THEN PlanningAction saves Workflow State (per \"Saves Behavior State\" story)",
                    "AND Workflow injects next action instructions (per \"Inject Next Behavior-Action\" story)",
                    "AND Workflow proceeds to build_knowledge"
                  ],
                  "scenarios": [
                    {
                      "name": "Seamless transition from planning to build_knowledge",
                      "steps": "Given behavior is 'discovery'\nAnd decide_planning_criteria action is complete\nAnd Human confirms \"done\" or \"proceed\"\nWhen decide_planning_criteria action finalizes\nThen Action saves Workflow State with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.decide_planning_criteria'\n  - timestamp=[completion time]\nAnd Action loads decide_planning_criteria/action configuration\nAnd Action reads next_action='build_knowledge'\nAnd Action injects AI instructions: \"When done, proceed to build_knowledge\"\nAnd AI invokes build_knowledge tool\nAnd Workflow transitions seamlessly to next action"
                    },
                    {
                      "name": "User must confirm before transition",
                      "steps": "Given decide_planning_criteria action is complete\nAnd Human has NOT yet confirmed completion\nWhen decide_planning_criteria action waits for human feedback\nThen Action does NOT save workflow state as completed\nAnd Action does NOT inject next action instructions\nAnd Action does NOT proceed to build_knowledge\nAnd AI waits for human to say \"done\" before transitioning"
                    },
                    {
                      "name": "Workflow state captures planning completion",
                      "steps": "Given decide_planning_criteria action completes at timestamp='2025-12-03T10:25:00Z'\nAnd Human confirms \"done\"\nWhen Action saves workflow state\nThen workflow state is updated with:\n  - current_action='story_bot.exploration.decide_planning_criteria'\n  - timestamp='2025-12-03T10:25:00Z'\nAnd completed_actions list includes: {action_state: 'story_bot.exploration.decide_planning_criteria', timestamp: '2025-12-03T10:25:00Z'}\nAnd State persists to project_area/workflow state\nAnd If workflow is interrupted after this point, planning is marked as completed"
                    },
                    {
                      "name": "Next action instructions injected into AI context",
                      "steps": "Given decide_planning_criteria action is complete\nAnd Human has confirmed \"done\"\nAnd decide_planning_criteria/action configuration specifies next_action='build_knowledge'\nWhen Action injects next action instructions\nThen AI context receives: \"When done, proceed to build_knowledge\"\nAnd AI knows to invoke build_knowledge tool next\nAnd User doesn't need to remember that build_knowledge comes after planning\nAnd Seamless transition is enabled by instruction injection"
                    },
                    {
                      "name": "Transition carries planning outputs to build_knowledge",
                      "steps": "Given decide_planning_criteria outputs are available: 4 criteria, 2 assumptions, 3 decisions in planning.json\nAnd Human has confirmed \"done\"\nWhen decide_planning_criteria transitions to build_knowledge\nThen Workflow state includes planning outputs in context\nAnd build_knowledge action receives planning criteria and assumptions as inputs\nAnd Knowledge building is informed by planning decisions"
                    },
                    {
                      "name": "Workflow resumes at build_knowledge after interruption",
                      "steps": "Given workflow state shows: current_action='story_bot.discovery.decide_planning_criteria'\nAnd completed_actions contains decide_planning_criteria entry\nAnd build_knowledge has not yet started\nAnd chat session was interrupted\nWhen user reopens chat and invokes bot tool\nThen Router loads workflow state\nAnd Router sees decide_planning_criteria is completed\nAnd Router determines next action is build_knowledge\nAnd Router forwards to build_knowledge action\nAnd Workflow resumes at correct next step despite interruption"
                    },
                    {
                      "name": "Activity log records transition",
                      "steps": "Given decide_planning_criteria action completes at 10:25:00\nAnd Human confirms \"done\"\nWhen decide_planning_criteria saves state and transitions\nThen Activity log records:\n  - decide_planning_criteria completion entry with action_state='story_bot.discovery.decide_planning_criteria', duration=600\n  - Workflow state update showing transition to build_knowledge\nAnd Audit trail shows planning completed before build_knowledge started"
                    },
                    {
                      "name": "Transition works mid-workflow",
                      "steps": "Given workflow state shows gather_context is complete (order=1)\nAnd decide_planning_criteria is at order=2 in workflow\nAnd build_knowledge is next at order=3\nAnd Human has confirmed \"done\"\nWhen decide_planning_criteria transitions\nThen Workflow proceeds to build_knowledge (middle of workflow sequence)\nAnd Sequential flow continues: gather_context  decide_planning_criteria  build_knowledge\nAnd Mid-workflow transitions work identically to first transition"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Build Knowledge",
              "sequential_order": 4,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Track Activity for Build Knowledge Action",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestTrackActivityForBuildKnowledgeAction",
                  "acceptance_criteria": [
                    "WHEN BuildKnowledgeAction executes",
                    "THEN Action creates activity entry with timestamp, action name, behavior name",
                    "AND Activity entry appended to {project_area}/activity_log.json"
                  ],
                  "scenarios": [
                    {
                      "name": "Track activity when build_knowledge action starts",
                      "steps": "Given behavior is 'scenarios'\nAnd action is 'build_knowledge'\nWhen build_knowledge action starts execution\nThen Activity logger creates entry with:\n  - timestamp=[start timestamp]\n  - action_state='story_bot.scenarios.build_knowledge'\n  - inputs={criteria_count: 4, assumptions_count: 2, context_file_path: \"planning.json\"}\nAnd Entry is appended to activity log at project_area/\nAnd Activity log records action initiation"
                    },
                    {
                      "name": "Track activity when build_knowledge action completes",
                      "steps": "Given build_knowledge action started at timestamp='2025-12-03T10:30:00Z'\nAnd activity log has entry for build_knowledge\nWhen build_knowledge action finishes execution at timestamp='2025-12-03T10:50:00Z'\nThen Activity logger creates completion entry with:\n  - action_state='story_bot.scenarios.build_knowledge'\n  - outputs={concepts_count: 15, relationships_count: 30, rules_count: 8, file_path: \"knowledge_graph.json\"}\n  - duration=1200 (seconds: 20 minutes)\nAnd Entry is appended to activity log\nAnd Activity log shows complete execution record with duration"
                    },
                    {
                      "name": "Track knowledge building inputs from previous actions",
                      "steps": "Given gather_context outputs are available in clarifications.json\nAnd decide_planning_criteria outputs are available in planning.json  \nAnd behavior is 'scenarios'\nWhen build_knowledge action starts\nThen Activity logger captures inputs including:\n  - context_from=\"gather_context and decide_planning_criteria\"\n  - questions_count=5\n  - criteria_count=4\n  - assumptions_count=2\nAnd Inputs show connection to previous actions\nAnd Activity log traces workflow dependencies"
                    },
                    {
                      "name": "Track knowledge graph outputs",
                      "steps": "Given build_knowledge action is complete\nAnd Knowledge graph contains: 15 concepts, 30 relationships, 8 rules\nWhen Activity logger records completion\nThen Activity logger captures outputs including:\n  - concepts_count=15\n  - relationships_count=30\n  - rules_count=8\n  - file_path=\"knowledge_graph.json\"\n  - summary=\"Built domain knowledge graph for increment 3\"\nAnd Outputs capture counts and file paths, not full graph content\nAnd Activity log shows metrics of what knowledge artifacts were produced"
                    },
                    {
                      "name": "Activity log maintains sequence through build_knowledge",
                      "steps": "Given activity log contains entries for:\n  - gather_context (completed at 10:05:30)\n  - decide_planning_criteria (completed at 10:25:00)\nAnd build_knowledge completes at 10:50:00\nWhen Activity logger appends build_knowledge entry\nThen Activity log shows chronological sequence:\n  1. gather_context (10:00:00 - 10:05:30)\n  2. decide_planning_criteria (10:15:00 - 10:25:00)\n  3. build_knowledge (10:30:00 - 10:50:00)\nAnd Activity log demonstrates workflow progression through knowledge building"
                    },
                    {
                      "name": "Track multiple build_knowledge invocations across behaviors",
                      "steps": "Given activity log contains entry for story_bot.shape.build_knowledge completed at 09:30\nAnd activity log contains entry for story_bot.exploration.build_knowledge completed at 10:30\nWhen both entries are present in activity log\nThen activity log contains 2 separate entries:\n  - Entry 1: action_state='story_bot.shape.build_knowledge', timestamp='2025-12-03T09:30:00Z'\n  - Entry 2: action_state='story_bot.exploration.build_knowledge', timestamp='2025-12-03T10:30:00Z'\nAnd Each entry has its own inputs, outputs, and duration\nAnd Activity log distinguishes same action in different behaviors"
                    },
                    {
                      "name": "Activity log handles file write failure gracefully",
                      "steps": "Given build_knowledge action is completing\nAnd project_area/activity log file is write-protected\nWhen Activity logger attempts to append entry\nThen Activity logger detects file write error\nAnd Activity logger warns user in chat: \"Unable to log activity. Audit trail may be incomplete.\" (non-blocking)\nAnd build_knowledge action continues execution despite logging failure\nAnd Action is not blocked by activity logging failure"
                    }
                  ]
                },
                {
                  "name": "Proceed To Render Output",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestProceedToRenderOutput",
                  "acceptance_criteria": [
                    "WHEN BuildKnowledgeAction completes execution",
                    "THEN BuildKnowledgeAction saves Workflow State (per \"Saves Behavior State\" story)",
                    "AND BuildKnowledgeAction submits content for saving",
                    "AND Workflow automatically proceeds to render_output (auto_progress: true, no human confirmation needed)"
                  ],
                  "scenarios": [
                    {
                      "name": "Automatic transition from build_knowledge to render_output (no human confirmation)",
                      "steps": "Given behavior is 'discovery'\nAnd build_knowledge action is complete\nAnd build_knowledge/action configuration specifies auto_progress=true\nWhen build_knowledge action finalizes\nThen Action saves Workflow State with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.build_knowledge'\n  - timestamp=[completion time]\nAnd Action loads build_knowledge/action configuration\nAnd Action reads next_action='render_output' and auto_progress=true\nAnd Action injects AI instructions: \"Automatically proceed to render_output now (no human confirmation needed)\"\nAnd AI immediately invokes render_output tool without waiting for user\nAnd Workflow transitions automatically to render_output"
                    },
                    {
                      "name": "Auto_progress distinguishes build_knowledge from other actions",
                      "steps": "Given gather_context action requires human confirmation (auto_progress not set)\nAnd decide_planning_criteria action requires human confirmation (auto_progress not set)\nAnd build_knowledge action specifies auto_progress=true\nWhen build_knowledge completes\nThen build_knowledge proceeds to render_output automatically\nAnd User is NOT prompted to say \"done\" before transition\nAnd Workflow is more efficient due to automatic progression"
                    },
                    {
                      "name": "Workflow state captures build_knowledge completion before auto-transition",
                      "steps": "Given build_knowledge action completes at timestamp='2025-12-03T10:50:00Z'\nAnd auto_progress=true is configured\nWhen Action saves workflow state before transitioning\nThen workflow state is updated with:\n  - current_action='story_bot.exploration.build_knowledge'\n  - timestamp='2025-12-03T10:50:00Z'\nAnd completed_actions list includes: {action_state: 'story_bot.exploration.build_knowledge', timestamp: '2025-12-03T10:50:00Z'}\nAnd State persists BEFORE automatic transition to render_output\nAnd If workflow is interrupted during transition, build_knowledge is marked as completed"
                    },
                    {
                      "name": "Next action instructions indicate automatic progression",
                      "steps": "Given build_knowledge action is complete\nAnd build_knowledge/action configuration specifies auto_progress=true, next_action='render_output'\nWhen Action injects next action instructions\nThen AI context receives: \"Automatically proceed to render_output now (no human confirmation needed)\"\nAnd AI understands to invoke render_output immediately\nAnd User sees seamless transition without being prompted\nAnd Automatic progression is clearly communicated"
                    },
                    {
                      "name": "Workflow resumes at render_output after interruption during auto-transition",
                      "steps": "Given workflow state shows: current_action='story_bot.discovery.build_knowledge'\nAnd completed_actions contains build_knowledge entry\nAnd render_output has not yet started\nAnd chat session was interrupted during transition\nWhen user reopens chat and invokes bot tool\nThen Router loads workflow state\nAnd Router sees build_knowledge is completed\nAnd Router determines next action is render_output\nAnd Router forwards to render_output action\nAnd Workflow resumes at render_output despite interruption during auto-transition"
                    },
                    {
                      "name": "Activity log records automatic transition",
                      "steps": "Given build_knowledge action completes at 10:50:00\nAnd auto_progress=true triggers automatic transition\nWhen build_knowledge saves state and auto-progresses\nThen Activity log records:\n  - build_knowledge completion entry with action_state='story_bot.discovery.build_knowledge', duration=1200\n  - Workflow state update showing automatic transition to render_output\n  - Note indicating auto_progress was enabled\nAnd Audit trail distinguishes automatic vs manual transitions"
                    },
                    {
                      "name": "Auto-transition fails gracefully if render_output unavailable",
                      "steps": "Given build_knowledge completes with auto_progress=true\nAnd render_output tool is unavailable or disabled\nWhen Action attempts automatic transition\nThen Action detects render_output tool unavailable\nAnd Action warns user in chat: \"Cannot auto-progress to render_output. Tool unavailable.\" (non-blocking)\nAnd Action saves workflow state with build_knowledge completed\nAnd Workflow pauses at build_knowledge completion\nAnd User can manually invoke render_output when available"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Render Output",
              "sequential_order": 5,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Track Activity for Render Output Action",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestTrackActivityForRenderOutputAction",
                  "acceptance_criteria": [
                    "WHEN RenderOutputAction executes",
                    "THEN Action creates activity entry with timestamp, action name, behavior name",
                    "AND Activity entry appended to {project_area}/activity_log.json"
                  ],
                  "scenarios": [
                    {
                      "name": "Track activity when render_output action starts",
                      "steps": "Given behavior is 'exploration'\nAnd action is 'render_output'\nWhen render_output action starts execution\nThen Activity logger creates entry with:\n  - timestamp=[start timestamp]\n  - action_state='story_bot.exploration.render_output'\n  - inputs={knowledge_graph_path: \"knowledge_graph.json\", templates_count: 2}\nAnd Entry is appended to activity log at project_area/\nAnd Activity log records action initiation"
                    },
                    {
                      "name": "Track activity when render_output action completes",
                      "steps": "Given render_output action started at timestamp='2025-12-03T10:50:00Z'\nAnd activity log has entry for render_output\nWhen render_output action finishes execution at timestamp='2025-12-03T11:00:00Z'\nThen Activity logger creates completion entry with:\n  - action_state='story_bot.exploration.render_output'\n  - outputs={documents_generated: 6, file_paths: [\"story-map.md\", \"increment-3.md\", \"story-1.md\"]}\n  - duration=600 (seconds: 10 minutes)\nAnd Entry is appended to activity log\nAnd Activity log shows complete execution record with duration"
                    },
                    {
                      "name": "Track rendering inputs from knowledge graph",
                      "steps": "Given knowledge_graph.json contains 15 concepts, 30 relationships\nAnd behavior is 'exploration'\nWhen render_output action starts\nThen Activity logger captures inputs including:\n  - knowledge_graph_path=\"knowledge_graph.json\"\n  - concepts_count=15\n  - relationships_count=30\n  - templates_count=2\nAnd Inputs capture file paths and metrics, not full content\nAnd Activity log traces workflow dependencies"
                    },
                    {
                      "name": "Track rendered output artifacts",
                      "steps": "Given render_output action is complete\nAnd Rendered outputs include: 3 story documents, 1 story map, 2 increment documents\nWhen Activity logger records completion\nThen Activity logger captures outputs including:\n  - documents_generated=6\n  - file_paths=[\"story-map.md\", \"increment-3.md\", \"story-1.md\", \"story-2.md\", \"story-3.md\", \"structured.json\"]\n  - summary=\"Rendered output documents for increment 3\"\nAnd Outputs capture file paths and counts, not document content\nAnd Activity log shows metrics of what rendering artifacts were produced"
                    },
                    {
                      "name": "Activity log maintains sequence through render_output",
                      "steps": "Given activity log contains entries for:\n  - gather_context (completed at 10:05:30)\n  - decide_planning_criteria (completed at 10:25:00)\n  - build_knowledge (completed at 10:50:00)\nAnd render_output completes at 11:00:00\nWhen Activity logger appends render_output entry\nThen Activity log shows chronological sequence:\n  1. gather_context (10:00:00 - 10:05:30)\n  2. decide_planning_criteria (10:15:00 - 10:25:00)\n  3. build_knowledge (10:30:00 - 10:50:00)\n  4. render_output (10:50:00 - 11:00:00)\nAnd Activity log demonstrates workflow progression through rendering"
                    },
                    {
                      "name": "Track multiple render_output invocations across behaviors",
                      "steps": "Given activity log contains entry for story_bot.shape.render_output completed at 09:45\nAnd activity log contains entry for story_bot.exploration.render_output completed at 10:50\nWhen both entries are present in activity log\nThen activity log contains 2 separate entries:\n  - Entry 1: action_state='story_bot.shape.render_output', timestamp='2025-12-03T09:45:00Z'\n  - Entry 2: action_state='story_bot.exploration.render_output', timestamp='2025-12-03T10:50:00Z'\nAnd Each entry has its own inputs, outputs, and duration\nAnd Activity log distinguishes same action in different behaviors"
                    },
                    {
                      "name": "Activity log handles file write failure gracefully",
                      "steps": "Given render_output action is completing\nAnd project_area/activity log file is write-protected\nWhen Activity logger attempts to append entry\nThen Activity logger detects file write error\nAnd Activity logger warns user in chat: \"Unable to log activity. Audit trail may be incomplete.\" (non-blocking)\nAnd render_output action continues execution despite logging failure\nAnd Action is not blocked by activity logging failure"
                    }
                  ]
                },
                {
                  "name": "Proceed To Validate Rules",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestProceedToValidateRules",
                  "acceptance_criteria": [
                    "WHEN RenderOutputAction completes execution",
                    "WHEN Human says action is done",
                    "THEN RenderOutputAction saves Workflow State (per \"Saves Behavior State\" story)",
                    "AND RenderOutputAction submits content for saving",
                    "AND Workflow injects next action instructions (per \"Inject Next Behavior-Action\" story)",
                    "AND Workflow proceeds to validate_rules"
                  ],
                  "scenarios": [
                    {
                      "name": "Seamless transition from render_output to validate_rules",
                      "steps": "Given behavior is 'discovery'\nAnd render_output action is complete\nAnd Human confirms \"done\" or \"proceed\"\nWhen render_output action finalizes\nThen Action saves Workflow State with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.render_output'\n  - timestamp=[completion time]\nAnd Action loads render_output/action configuration\nAnd Action reads next_action='validate_rules'\nAnd Action injects AI instructions: \"When done, proceed to validate_rules\"\nAnd AI invokes validate_rules tool\nAnd Workflow transitions seamlessly to next action"
                    },
                    {
                      "name": "User must confirm before transition",
                      "steps": "Given render_output action is complete\nAnd Human has NOT yet confirmed completion\nWhen render_output action waits for human feedback\nThen Action does NOT save workflow state as completed\nAnd Action does NOT inject next action instructions\nAnd Action does NOT proceed to validate_rules\nAnd AI waits for human to say \"done\" before transitioning"
                    },
                    {
                      "name": "Workflow state captures render_output completion",
                      "steps": "Given render_output action completes at timestamp='2025-12-03T11:00:00Z'\nAnd Human confirms \"done\"\nWhen Action saves workflow state\nThen workflow state is updated with:\n  - current_action='story_bot.exploration.render_output'\n  - timestamp='2025-12-03T11:00:00Z'\nAnd completed_actions list includes: {action_state: 'story_bot.exploration.render_output', timestamp: '2025-12-03T11:00:00Z'}\nAnd State persists to project_area/workflow state\nAnd If workflow is interrupted after this point, render_output is marked as completed"
                    },
                    {
                      "name": "Next action instructions injected into AI context",
                      "steps": "Given render_output action is complete\nAnd Human has confirmed \"done\"\nAnd render_output/action configuration specifies next_action='validate_rules'\nWhen Action injects next action instructions\nThen AI context receives: \"When done, proceed to validate_rules\"\nAnd AI knows to invoke validate_rules tool next\nAnd User doesn't need to remember that validate_rules comes after render_output\nAnd Seamless transition is enabled by instruction injection"
                    },
                    {
                      "name": "Transition to terminal action (validate_rules)",
                      "steps": "Given render_output is complete  \nAnd validate_rules specifies next_action=null (terminal action)\nWhen Workflow transitions to validate_rules\nThen validate_rules is recognized as final action in workflow sequence\nAnd After validate_rules completes, workflow will be complete\nAnd User understands validate_rules is the last workflow step"
                    },
                    {
                      "name": "Workflow resumes at validate_rules after interruption",
                      "steps": "Given workflow state shows: current_action='story_bot.discovery.render_output'\nAnd completed_actions contains render_output entry\nAnd validate_rules has not yet started\nAnd chat session was interrupted\nWhen user reopens chat and invokes bot tool\nThen Router loads workflow state\nAnd Router sees render_output is completed\nAnd Router determines next action is validate_rules\nAnd Router forwards to validate_rules action\nAnd Workflow resumes at correct next step despite interruption"
                    },
                    {
                      "name": "Activity log records transition to validation",
                      "steps": "Given render_output action completes at 11:00:00\nAnd Human confirms \"done\"\nWhen render_output saves state and transitions\nThen Activity log records:\n  - render_output completion entry with action_state='story_bot.discovery.render_output', duration=600\n  - Workflow state update showing transition to validate_rules\nAnd Audit trail shows render_output completed before validate_rules started"
                    },
                    {
                      "name": "Rendered outputs become validation inputs",
                      "steps": "Given render_output outputs are available: 6 documents generated\nAnd Human has confirmed \"done\"\nWhen render_output transitions to validate_rules\nThen Workflow state includes rendered outputs in context\nAnd validate_rules action receives rendered documents as inputs\nAnd Validation checks the documents that were just rendered\nAnd Workflow maintains data flow from render to validate"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Validate Knowledge & Content Against Rules",
              "sequential_order": 16,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Track Activity for Validate Rules Action",
                  "sequential_order": 1,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestTrackActivityForValidateRulesAction",
                  "acceptance_criteria": [
                    "WHEN ValidateRulesAction executes",
                    "THEN Action creates activity entry with timestamp, action name, behavior name, violations count",
                    "AND Activity entry appended to {project_area}/activity_log.json"
                  ],
                  "scenarios": [
                    {
                      "name": "Track activity when validate_rules action starts",
                      "steps": "Given behavior is 'scenarios'\nAnd action is 'validate_rules'\nWhen validate_rules action starts execution\nThen Activity logger creates entry with:\n  - timestamp=[start timestamp]\n  - action_state='story_bot.scenarios.validate_rules'\n  - inputs={documents_count: 6, rules_files_paths: [\"story-scenarios-rules.json\", \"story-structure-rules.json\"]}\nAnd Entry is appended to activity log at project_area/\nAnd Activity log records action initiation"
                    },
                    {
                      "name": "Track activity when validate_rules action completes",
                      "steps": "Given validate_rules action started at timestamp='2025-12-03T11:00:00Z'\nAnd activity log has entry for validate_rules\nWhen validate_rules action finishes execution at timestamp='2025-12-03T11:10:00Z'\nThen Activity logger creates completion entry with:\n  - action_state='story_bot.scenarios.validate_rules'\n  - outputs={violations_count: 3, rules_passed: 15, report_path: \"validation_report.json\"}\n  - duration=600 (seconds: 10 minutes)\nAnd Entry is appended to activity log\nAnd Activity log shows complete execution record with duration"
                    },
                    {
                      "name": "Track validation inputs from rendered content",
                      "steps": "Given rendered documents are available: 6 documents in docs/stories/\nAnd behavior is 'scenarios'\nWhen validate_rules action starts\nThen Activity logger captures inputs including:\n  - documents_count=6\n  - documents_paths=[\"story-1.md\", \"story-2.md\", \"story-3.md\"]\n  - rules_files_paths=[\"story-scenarios-rules.json\", \"story-structure-rules.json\"]\nAnd Inputs capture file paths and counts, not full content\nAnd Activity log traces workflow dependencies"
                    },
                    {
                      "name": "Track validation outputs (results and violations)",
                      "steps": "Given validate_rules action is complete\nAnd Validation results show: 6 documents, 3 violations, 15 rules passed\nWhen Activity logger records completion\nThen Activity logger captures outputs including:\n  - documents_validated=6\n  - violations_count=3\n  - rules_passed=15\n  - report_path=\"validation_report.json\"\n  - summary=\"Validation completed with 3 violations\"\nAnd Outputs capture counts and file paths, not full report content\nAnd Activity log shows metrics of what validation results were produced"
                    },
                    {
                      "name": "Activity log shows complete workflow sequence",
                      "steps": "Given activity log contains entries for:\n  - gather_context (completed at 10:05:30)\n  - decide_planning_criteria (completed at 10:25:00)\n  - build_knowledge (completed at 10:50:00)\n  - render_output (completed at 11:00:00)\nAnd validate_rules completes at 11:10:00\nWhen Activity logger appends validate_rules entry\nThen Activity log shows complete workflow sequence:\n  1. gather_context (10:00:00 - 10:05:30)\n  2. decide_planning_criteria (10:15:00 - 10:25:00)\n  3. build_knowledge (10:30:00 - 10:50:00)\n  4. render_output (10:50:00 - 11:00:00)\n  5. validate_rules (11:00:00 - 11:10:00)\nAnd Activity log demonstrates complete workflow from start to finish"
                    },
                    {
                      "name": "Track validate_rules as terminal action",
                      "steps": "Given validate_rules action completes\nAnd validate_rules/action configuration specifies next_action=null (terminal action)\nWhen Activity logger records completion\nThen Activity log entry includes note: \"Terminal action - workflow complete\"\nAnd Activity log indicates this is final action in workflow\nAnd Audit trail shows workflow reached its intended end"
                    },
                    {
                      "name": "Track multiple validate_rules invocations across behaviors",
                      "steps": "Given activity log contains entry for story_bot.shape.validate_rules completed at 09:55\nAnd activity log contains entry for story_bot.exploration.validate_rules completed at 11:00\nWhen both entries are present in activity log\nThen activity log contains 2 separate entries:\n  - Entry 1: action_state='story_bot.shape.validate_rules', timestamp='2025-12-03T09:55:00Z'\n  - Entry 2: action_state='story_bot.exploration.validate_rules', timestamp='2025-12-03T11:00:00Z'\nAnd Each entry has its own inputs, outputs, and duration\nAnd Activity log distinguishes same action in different behaviors"
                    },
                    {
                      "name": "Activity log handles file write failure gracefully",
                      "steps": "Given validate_rules action is completing\nAnd project_area/activity log file is write-protected\nWhen Activity logger attempts to append entry\nThen Activity logger detects file write error\nAnd Activity logger warns user in chat: \"Unable to log activity. Audit trail may be incomplete.\" (non-blocking)\nAnd validate_rules action continues execution despite logging failure\nAnd Action is not blocked by activity logging failure"
                    }
                  ]
                },
                {
                  "name": "Complete Validate Rules Action",
                  "sequential_order": 2,
                  "connector": "or",
                  "users": [
                    "Behavior"
                  ],
                  "story_type": "user",
                  "test_class": "TestCompleteValidateRulesAction",
                  "acceptance_criteria": [
                    "WHEN ValidateRulesAction completes execution",
                    "THEN Action presents validation results to user",
                    "WHEN Human says action is done",
                    "THEN ValidateRulesAction saves Workflow State (per \"Saves Behavior State\" story)",
                    "AND validate_rules is terminal action (next_action: null, workflow completes)"
                  ],
                  "scenarios": [
                    {
                      "name": "Workflow completes at validate_rules (terminal action)",
                      "steps": "Given behavior is 'discovery'\nAnd validate_rules action is complete\nAnd validate_rules/action configuration specifies next_action=null\nAnd Human confirms \"done\" or \"proceed\"\nWhen validate_rules action finalizes\nThen Action saves Workflow State with:\n  - current_behavior='story_bot.discovery'\n  - current_action='story_bot.discovery.validate_rules'\n  - timestamp=[completion time]\nAnd Action detects next_action=null (terminal action)\nAnd Action presents message: \"Workflow is complete. No further actions required.\"\nAnd No next action instructions are injected\nAnd Workflow sequence ends at validate_rules"
                    },
                    {
                      "name": "Validation results presented to user before completion",
                      "steps": "Given validate_rules action is complete\nAnd Validation results show: 3 violations, 15 rules passed\nWhen validate_rules presents results to user\nThen User sees validation report with:\n  - Total documents validated: 6\n  - Violations found: 3 (with details)\n  - Rules passed: 15\n  - Validation status: Completed with violations\nAnd User can review validation results\nAnd Human confirms \"done\" to finalize workflow"
                    },
                    {
                      "name": "Workflow state captures validate_rules completion (terminal)",
                      "steps": "Given validate_rules action completes at timestamp='2025-12-03T11:10:00Z'\nAnd Human confirms \"done\"\nWhen Action saves workflow state\nThen workflow state is updated with:\n  - current_action='story_bot.exploration.validate_rules'\n  - timestamp='2025-12-03T11:10:00Z'\n  - workflow_complete=true (indicator that terminal action finished)\nAnd completed_actions list includes: {action_state: 'story_bot.exploration.validate_rules', timestamp: '2025-12-03T11:10:00Z'}\nAnd State persists to project_area/workflow state\nAnd State indicates entire workflow is finished"
                    },
                    {
                      "name": "No next action instructions injected (terminal action)",
                      "steps": "Given validate_rules action is complete\nAnd Human has confirmed \"done\"\nAnd validate_rules/action configuration specifies next_action=null\nWhen Action checks for next action\nThen Action detects next_action is null\nAnd Action does NOT inject next action instructions\nAnd AI context receives: \"Workflow is complete. No further actions required.\"\nAnd User understands workflow has reached its natural end\nAnd No automatic transition occurs"
                    },
                    {
                      "name": "Activity log records workflow completion",
                      "steps": "Given validate_rules action completes at 11:10:00\nAnd Human confirms \"done\"\nAnd validate_rules is terminal action\nWhen validate_rules saves state and completes\nThen Activity log records:\n  - validate_rules completion entry with action_state='story_bot.discovery.validate_rules', duration=600\n  - Note: \"Terminal action - workflow complete\"\n  - Workflow state update showing workflow completion\nAnd Audit trail shows complete workflow from gather_context through validate_rules completion"
                    },
                    {
                      "name": "User can restart workflow after completion",
                      "steps": "Given workflow state shows: workflow_complete=true\nAnd validate_rules is marked complete\nWhen user wants to start new workflow for different increment\nThen User can reinitialize workflow by invoking first action (gather_context)\nAnd Workflow state resets to beginning\nAnd New workflow sequence starts fresh\nAnd Previous workflow completion preserved in activity log"
                    },
                    {
                      "name": "Workflow completion with validation violations",
                      "steps": "Given validation results show 3 violations\nAnd Human has confirmed \"done\" despite violations\nWhen validate_rules completes as terminal action\nThen Workflow completes with status: \"Completed with 3 validation violations\"\nAnd User is informed that workflow finished but has issues to address\nAnd User can invoke correct_bot independently to fix violations\nAnd Workflow completion doesn't require zero violations"
                    },
                    {
                      "name": "Workflow completion with zero violations",
                      "steps": "Given validation results show 0 violations\nAnd All 15 rules passed\nAnd Human has confirmed \"done\"\nWhen validate_rules completes as terminal action\nThen Workflow completes with status: \"Completed successfully - all validations passed\"\nAnd User is informed that workflow finished with no issues\nAnd User can proceed with confidence that content meets all rules"
                    },
                    {
                      "name": "Workflow resumes at validate_rules after interruption (near completion)",
                      "steps": "Given workflow state shows: current_action='story_bot.exploration.validate_rules'\nAnd validate_rules is NOT in completed_actions (was interrupted)\nAnd user has reopened chat\nWhen Router loads workflow state\nThen Router sees validate_rules is started (not completed)\nAnd Router forwards to validate_rules action\nAnd User can choose to retry or continue validate_rules\nAnd After completion, workflow will be complete (terminal action)"
                    },
                    {
                      "name": "correct_bot can be invoked independently after workflow completion",
                      "steps": "Given validation results show 3 violations\nAnd workflow state shows: workflow_complete=true\nAnd correct_bot/action configuration specifies workflow=false (independent action)\nWhen User wants to address validation violations\nThen User can invoke correct_bot independently\nAnd correct_bot does NOT require workflow state\nAnd correct_bot is NOT part of workflow sequence\nAnd Independent actions available after workflow completion"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Inject Content",
      "priority": 4,
      "epics": [
        {
          "name": "Invoke MCP Bot Server",
          "sequential_order": 2,
          "sub_epics": [
            {
              "name": "Invoke Bot Tool",
              "sequential_order": 2,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Route To MCP BotTool",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Forward To Current Behavior and Current Action",
                  "sequential_order": 7,
                  "connector": "or",
                  "users": [
                    "AI Chat"
                  ],
                  "story_type": "user",
                  "test_class": "TestForwardToCurrentBehaviorAndCurrentAction"
                }
              ]
            },
            {
              "name": "Perform Behavior Action",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "InjectsContent Into Instructions",
                  "sequential_order": 9,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Follows Enriched Instructions",
                  "sequential_order": 10,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Execute Behavior Actions",
          "sequential_order": 3,
          "sub_epics": [
            {
              "name": "Build Knowledge Action",
              "sequential_order": 7,
              "sub_epics": [
                {
                  "name": "Read Render Output Instructions and Data",
                  "sequential_order": 12,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Inject Load Bot and Rules In Instructions",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [
                        "Bot Behavior"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Read Instructions Injected Structured Content",
                      "sequential_order": 13,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Render Output",
              "sequential_order": 13,
              "sub_epics": [
                {
                  "name": "Generate Rendered Outputs",
                  "sequential_order": 14,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Present Rendered Outputs to User",
                      "sequential_order": 3,
                      "connector": "or",
                      "users": [],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            }
          ]
        }
      ]
    },
    {
      "name": "Save Content",
      "priority": 5,
      "epics": [
        {
          "name": "Invoke MCP Bot Server",
          "sequential_order": 2,
          "sub_epics": [
            {
              "name": "Perform Behavior Action",
              "sequential_order": 3,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Persists Content",
                  "sequential_order": 11,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Submit Content Changes to Tools for Saving",
                  "sequential_order": 12,
                  "connector": "or",
                  "users": [
                    "Bot Behavior"
                  ],
                  "story_type": "user"
                }
              ]
            }
          ]
        },
        {
          "name": "Execute Behavior Actions",
          "sequential_order": 3,
          "sub_epics": [
            {
              "name": "Gather Context",
              "sequential_order": 1,
              "sub_epics": [
                {
                  "name": "Provide Answers and Evidence",
                  "sequential_order": 3,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Submit Answers and Evidence to Tools for Saving",
                      "sequential_order": 5,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Saves Answers and Evidence",
                      "sequential_order": 6,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Decide Planning Criteria Action",
              "sequential_order": 5,
              "sub_epics": [
                {
                  "name": "Make Decisons and Assumptions",
                  "sequential_order": 6,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Save Final Assumptions and Decisions",
                      "sequential_order": 5,
                      "connector": "or",
                      "users": [
                        "AI Chat"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Build Knowledge Action",
              "sequential_order": 7,
              "sub_epics": [
                {
                  "name": "Edit Knowledge Graph",
                  "sequential_order": 11,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Save Knowledge Graph",
                      "sequential_order": 4,
                      "connector": "or",
                      "users": [
                        "Bot-Behavior"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Render Output",
              "sequential_order": 13,
              "sub_epics": [
                {
                  "name": "Load Rendered Content",
                  "sequential_order": 15,
                  "sub_epics": [],
                  "stories": [
                    {
                      "name": "Load + Inject Rendered Content",
                      "sequential_order": 1,
                      "connector": "or",
                      "users": [
                        "Bot"
                      ],
                      "story_type": "user"
                    },
                    {
                      "name": "Present Rendered Content",
                      "sequential_order": 2,
                      "connector": "or",
                      "users": [
                        "Bot"
                      ],
                      "story_type": "user"
                    }
                  ]
                }
              ],
              "stories": []
            },
            {
              "name": "Validate Knowledge & Content Against Rules",
              "sequential_order": 16,
              "sub_epics": [],
              "stories": [
                {
                  "name": "Save Content",
                  "sequential_order": 6,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Load + Inject Diagnostics Results, Knowledge, Content Instructions",
                  "sequential_order": 7,
                  "connector": "or",
                  "users": [
                    "Bot-Behavior"
                  ],
                  "story_type": "user"
                },
                {
                  "name": "Validate Content Using Injected Diagnostics + Rules",
                  "sequential_order": 8,
                  "connector": "or",
                  "users": [],
                  "story_type": "user"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Later",
      "priority": 6,
      "epics": []
    }
  ]
}