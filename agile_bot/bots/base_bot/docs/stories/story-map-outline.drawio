<?xml version="1.0" ?>
<mxfile host="65bd71144e">
  <diagram id="story-map" name="Story Map">
    <mxGraphModel dx="2656" dy="1035" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="4000" pageHeight="3000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="epic-group" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="0" y="0" width="3366" height="190" as="geometry"/>
        </mxCell>
        <mxCell id="e1" value="Build Agile Bots" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="20" y="120" width="1654" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1" value="Generate MCP Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="20" y="200" width="1092" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e1f1s1_MCP Server Generator" value="MCP Server Generator" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s1" value="Generate MCP Bot Server" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN MCP Server Generator receives Bot Config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Generator generates unique MCP Server instance with Unique server name from bot name&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Generated server includes Bot Config reference&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Generated server leverages Specific Bot instantiation code&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s2" value="Generate Behavior Action Tools" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Generator processes Bot Config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Generator creates tool code for each (behavior, action) pair&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Enumerates all behaviors and actions from Bot Config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND For each pair, generates tool code with unique name, trigger words, forwarding logic&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Tool catalog prepared with all generated tool instances&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s3" value="Deploy MCP BOT Server" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Generation Complete&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Generator deploys/starts generated MCP Server&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Server initializes in separate thread&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Server registers with MCP Protocol Handler using unique server name&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Server publishes tool catalog to AI Chat&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Each tool entry includes name, description, trigger patterns, parameters&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="885" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s4" value="Restart MCP Server To Load Code Changes" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Bot code changes are detected&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN MCP Server clears Python bytecode cache (__pycache__)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND MCP Server restarts to load new code&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Server restarts gracefully without losing state&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Server re-registers with MCP Protocol Handler after restart&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2" value="Generate CLI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1122" y="200" width="552" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e1f2s1_MCP Server Generator" value="MCP Server Generator" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="290" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s1" value="Generate BOT CLI code" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN MCP Server Generator processes Bot Config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Generator creates CLI command wrapper structure for bot invocation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Generator generates CLI entry point script (e.g., bot_cli.py and bot shell script)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI code includes argument parsing for behavior and action parameters&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI code includes help/usage documentation generation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="690" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI code supports listing available bots, behaviors, and actions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="760" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_6" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Generated CLI code integrates with existing bot instantiation logic&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="830" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI code follows same routing logic as MCP tools for consistency&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="900" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e1f2s2_Human" value="Human" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="290" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s2" value="Generate Cursor Command Files" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Human calls generate_cursor_commands(commands_dir, cli_script_path)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN CLI creates .cursor/commands/ directory if it doesn't exist&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI creates &lt;bot-name&gt;.md command file that invokes CLI with bot name (routes to current behavior/action)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI creates &lt;bot-name&gt;-&lt;behavior&gt;.md command file for each behavior in bot that invokes CLI with bot name and behavior (auto-forwards to current action)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI creates &lt;bot-name&gt;-&lt;behavior&gt;-&lt;action&gt;.md command file for each action in each behavior that invokes CLI with bot name, behavior, and action&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="690" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI creates &lt;bot-name&gt;-close.md command file that invokes CLI with bot name and --close parameter&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="760" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_6" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Each command file contains simple wrapper command that calls CLI script&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="830" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Bot name, behavior, and action are hardcoded in command files (no parameters needed)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="900" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_8" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI removes obsolete command files for behaviors/actions that no longer exist in bot&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="970" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_9" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND CLI returns dict mapping command names (e.g., story_bot, story_bot-exploration, story_bot-exploration-gather_context, story_bot-close) to file paths&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="1040" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2" value="Invoke MCP Bot Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1704" y="120" width="1076" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1" value="Init Project" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1704" y="200" width="798" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e2f1s1_Bot Behavior" value="Bot Behavior" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1s1" value="Initialize Project Location" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) WHEN Bot behavior is invoked for the first time (no saved location exists)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) THEN Bot detects current directory from context&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot presents location to user for confirmation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot waits for user to confirm or provide different location&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot saves confirmed location to persistent storage&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) WHEN Bot behavior is invoked&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="885" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_6" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Saved location exists&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="955" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Current directory matches saved location&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1025" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_8" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) THEN Bot uses saved location without asking for confirmation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1095" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_9" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot proceeds directly to next action&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1165" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_10" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) WHEN Bot behavior is invoked&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1235" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_11" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Saved location exists&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1305" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_12" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Current directory is DIFFERENT from saved location&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1375" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_13" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) THEN Bot presents new location to user for confirmation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1445" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_14" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot asks if user wants to switch to new location&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1515" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_15" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;(AC) AND Bot saves confirmed location if user approves change&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1706" y="1585" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e2f1s2_Bot-Behavior" value="Bot-Behavior" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1s2" value="Store Context Files" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN initialize_project action confirms project area location&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN initialize_project creates {project_area}/docs/context/ folder and {project_area}/docs/stories/ folder&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN user provides input file via @input.txt or similar&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN initialize_project copies input file to {project_area}/docs/context/input.txt&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN user provides context in conversation&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN initialize_project saves context to {project_area}/docs/context/initial-context.md or similar&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="885" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_6" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN gather_context action stores clarification data&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="955" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN gather_context saves to {project_area}/docs/stories/clarification.json (generated file, NOT in context folder)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1025" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_8" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN decide_planning_criteria action stores planning decisions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1095" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_9" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN decide_planning_criteria saves to {project_area}/docs/stories/planning.json (generated file, NOT in context folder)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1165" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_10" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN build_knowledge action loads context&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1235" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_11" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN build_knowledge loads generated files from {project_area}/docs/stories/ folder (clarification.json, planning.json) and original input from {project_area}/docs/context/ folder (input.txt)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1305" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_12" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN render_output action loads context&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1375" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_13" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN render_output loads generated files from {project_area}/docs/stories/ folder (clarification.json, planning.json) and original input from {project_area}/docs/context/ folder (input.txt)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1445" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_14" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN any action needs context files&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1515" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s2_15" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN action references original input from {project_area}/docs/context/ folder and generated files from {project_area}/docs/stories/ folder&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1976" y="1585" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e2f1s3_Bot" value="Bot" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1s3" value="Guards Prevent Writes Without Project" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Activity tracker attempts to log activity&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND current_project.json does NOT exist&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Activity tracker does NOT write to activity log&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Activity tracking fails gracefully without error&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Workflow attempts to save state&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="815" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND current_project.json does NOT exist&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="885" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_6" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Workflow does NOT save workflow_state.json&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="955" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s3_7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Workflow state save fails gracefully without error&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="1025" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2f2" value="Invoke Bot Tool" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2512" y="200" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2f3" value="Perform Behavior Action" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2522" y="200" width="258" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e2f3s1_Bot Behavior" value="Bot Behavior" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="290" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e2f3s1" value="Inject Behavior Action Instructions" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f3s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN Tool invokes Bot.Behavior.Action method&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f3s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Behavior Action loads instructions from behavior and base_actions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f3s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Action merges base instructions with behavior-specific instructions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f3s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Compiled instructions returned for injection into AI Chat&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2524" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3" value="Execute Behavior Actions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2810" y="120" width="556" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3f1" value="Gather Context" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2810" y="200" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3f2" value="Decide Planning Criteria Action" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2820" y="200" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3f3" value="Build Knowledge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2830" y="200" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3f4" value="Render Output" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2840" y="200" width="258" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e3f4s1_Bot Behavior" value="Bot Behavior" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2842" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e3f4s1" value="Inject Render Templates and Transformers" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2842" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f4s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN MCP Specific Behavior Action Tool invokes Render Output Action&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2842" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f4s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Action loads render templates and transformer methods&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2842" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f4s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Action injects template path, transformer path, and spec path&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2842" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e3f5" value="Validate Knowledge &amp; Content Against Rules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="3108" y="200" width="258" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e3f5s1_Bot Behavior" value="Bot Behavior" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e3f5s1" value="Inject Validation Rules for Validate Rules Action" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a237e;strokeColor=#0d47a1;fontColor=#ffffff;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f5s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;WHEN MCP Specific Behavior Action Tool invokes Validate Rules Action&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f5s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;THEN Action loads common bot rules from base_bot/rules/&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="605" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f5s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Action loads behavior-specific rules&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="675" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e3f5s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;AND Action merges and injects rules into validation section&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="3110" y="745" width="250" height="60" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
