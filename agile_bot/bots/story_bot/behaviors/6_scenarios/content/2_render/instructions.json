{
  "behaviorName": "specification_scenarios",
  "step": "2_render",
  "instructions": [
    "**RENDER STORY DOCUMENTS WITH SCENARIOS**",
    "",
    "**Input:** Updated story-graph.json with scenarios from knowledge graph step",
    "",
    "**Output:** Individual story documents with scenarios section added",
    "",
    "**Process:**",
    "",
    "1. **Load story graph** from project area: docs/stories/story-graph.json",
    "",
    "2. **For each story in the graph:**",
    "   - Load existing story document: docs/stories/{epic_name}/{sub_epic_name}/{story_name}.md",
    "   - Keep existing sections: Story Description, Acceptance Criteria",
    "   - Add new sections: Background (if applicable), Scenarios",
    "",
    "3. **Render Background section** (if story has background steps):",
    "   ```markdown",
    "   ## Background",
    "   ",
    "   **Common setup steps shared across all scenarios:**",
    "   ",
    "   ```gherkin",
    "   Given <step>",
    "   And <step>",
    "   ```",
    "   ```",
    "",
    "4. **Render Scenarios section:**",
    "   ```markdown",
    "   ## Scenarios",
    "   ",
    "   ### Scenario: {scenario_name} ({scenario_type})",
    "   ",
    "   **Steps:**",
    "   ```gherkin",
    "   Given <step>",
    "   When <step>",
    "   Then <step>",
    "   ```",
    "   ```",
    "",
    "5. **Save updated story documents** to project area",
    "",
    "**Template:** templates/story-doc-scenarios.md",
    "",
    "**Validation:**",
    "- All existing story content is preserved",
    "- Background section only included if story has background steps",
    "- All scenarios are rendered with proper Gherkin formatting",
    "- Scenario types are indicated (happy_path, edge_case, error_case)"
  ]
}

