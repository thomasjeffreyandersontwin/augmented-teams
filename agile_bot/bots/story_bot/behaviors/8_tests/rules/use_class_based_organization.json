{
  "description": "Use class-based organization with pytest orchestrator pattern. Test classes contain orchestrator test methods that show the flow. Helper functions/fixtures provide reusable operations. Keep tests under 20 lines, helpers under 20 lines, classes under 300 lines.",
  "examples": [
    {
      "do": {
        "description": "Orchestrator test with helpers",
        "content": [
          "# ============================================================================",
          "# HELPER FUNCTIONS - Reusable operations (under 20 lines each)",
          "# ============================================================================",
          "",
          "def create_agent_with_config(name: str, workspace_root: Path, config: dict) -> Agent:",
          "    \"\"\"Helper: Create agent with configuration.\"\"\"",
          "    agent = Agent(agent_name=name, workspace_root=workspace_root)",
          "    agent.set_config(config)",
          "    return agent",
          "",
          "@pytest.fixture",
          "def workspace_root(tmp_path):",
          "    \"\"\"Fixture: Temporary workspace directory.\"\"\"",
          "    workspace = tmp_path / \"workspace\"",
          "    workspace.mkdir()",
          "    return workspace",
          "",
          "# ============================================================================",
          "# ORCHESTRATOR TESTS - Readable test flows",
          "# ============================================================================",
          "",
          "class TestAgentInitialization:",
          "    \"\"\"Agent initialization scenarios.\"\"\"",
          "    ",
          "    def test_agent_initializes_with_base_config(self, workspace_root):",
          "        \"\"\"",
          "        SCENARIO: Agent initializes with base configuration",
          "        GIVEN: Base agent configuration exists",
          "        WHEN: Agent is initialized with agent_name='story_bot'",
          "        THEN: Agent sets up configuration path correctly",
          "        \"\"\"",
          "        # Given",
          "        config = create_base_config(workspace_root)",
          "        ",
          "        # When",
          "        agent = create_agent_with_config('story_bot', workspace_root, config)",
          "        ",
          "        # Then",
          "        expected_path = workspace_root / \"agents\" / \"base\" / \"agent.json\"",
          "        assert agent.config_path == expected_path",
          "        assert agent.config_path.exists()"
        ]
      },
      "dont": {
        "description": "Scattered steps or monolithic tests",
        "content": [
          "# DON'T: Feature files with scattered step definitions",
          "# DON'T: Monolithic test methods over 20 lines",
          "# DON'T: Helper functions over 20 lines",
          "# DON'T: Test classes over 300 lines",
          "# DON'T: Tests without clear Given-When-Then structure"
        ]
      }
    }
  ]
}
