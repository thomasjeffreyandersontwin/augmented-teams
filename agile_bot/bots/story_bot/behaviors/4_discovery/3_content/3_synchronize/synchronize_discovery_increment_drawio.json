{
  "name": "synchronize_discovery_increment_drawio",
  "description": "Synchronize discovery increment(s) from DrawIO diagram. Supports multiple increments.",
  "scripts": [
    {
      "name": "extract_and_report",
      "renderer": "story_io",
      "renderer_command": "sync-discovery",
      "description": "Synchronize discovery increment(s) from DrawIO and generate merge report",
      "parameters": {
        "drawio_file": "{project_path}/docs/stories/story-map-discovery-increment-{increment_names}.drawio",
        "output": "{project_path}/docs/stories/story-graph-drawio-extracted-discovery.json",
        "original": "{project_path}/docs/stories/story_graph_increments.json",
        "increment_names": "{increment_names}",
        "generate_report": true,
        "report": "{project_path}/docs/stories/story-graph-drawio-extracted-discovery-merge-report.json"
      }
    }
  ],
  "templates": [],
  "instructions": [
    "1. Run extract_and_report script to synchronize DrawIO discovery increment(s) and generate merge report",
    "2. Review merge report showing exact matches, fuzzy matches, new stories, removed stories, and large deletion warnings",
    "3. Pay special attention to large deletion warnings - entire increments or features missing may indicate accidental deletion",
    "4. AI waits for user instructions to proceed with merge based on report",
    "5. Merge preserves Steps from original stories where matches are found",
    "6. New stories in extracted will have empty Steps array",
    "7. User confirms merge before applying changes to story_graph_increments.json"
  ]
}

