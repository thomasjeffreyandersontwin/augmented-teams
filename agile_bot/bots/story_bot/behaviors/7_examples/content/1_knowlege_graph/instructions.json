{
  "behaviorName": "specification_examples",
  "step": "1_knowlege_graph",
  "instructions": [
    "**BUILD STORY GRAPH WITH SCENARIO OUTLINES AND EXAMPLES**",
    "",
    "**Input:** Story-graph.json with scenarios from specification_scenarios stage",
    "",
    "**Output:** Updated story-graph.json with scenario outlines and examples tables added",
    "",
    "**Process:**",
    "",
    "1. **Load existing story graph** from project area: docs/stories/story-graph.json",
    "",
    "2. **For each story in the graph:**",
    "   - Review existing scenarios from specification_scenarios stage",
    "   - Identify scenarios that need data variation (formulas, calculations, domain entities, parameter variations)",
    "   - Convert appropriate scenarios to Scenario Outlines",
    "",
    "3. **When to use Scenario Outline:**",
    "   - Scenarios testing formulas or calculations with different inputs",
    "   - Scenarios testing domain entities with different property values",
    "   - Scenarios testing parameter variations (boundaries, edge cases)",
    "   - Scenarios that need multiple test data combinations",
    "   - DO NOT use for simple state changes or single-case scenarios",
    "",
    "4. **Structure each Scenario Outline:**",
    "   ```json",
    "   {",
    "     \"name\": \"Descriptive scenario outline name\",",
    "     \"type\": \"happy_path|edge_case|error_case\",",
    "     \"background\": [",
    "       \"Given <common_setup_step>\",",
    "       \"And <another_common_setup>\"",
    "     ],",
    "     \"steps\": [",
    "       \"Given <setup> at \\\"<variable_path>\\\"\",",
    "       \"When <action> with <param>=\\\"<variable_value>\\\"\",",
    "       \"Then <outcome> equals \\\"<expected_result>\\\"\"",
    "     ],",
    "     \"examples\": {",
    "       \"columns\": [\"variable_path\", \"variable_value\", \"expected_result\"],",
    "       \"rows\": [",
    "         [\"value1\", \"value2\", \"result1\"],",
    "         [\"value3\", \"value4\", \"result2\"]",
    "       ]",
    "     }",
    "   }",
    "   ```",
    "",
    "5. **Examples Table Requirements:**",
    "   - EVERY variable in Steps (e.g., <variable_name>) MUST have a column in Examples",
    "   - Include BOTH input variables AND output/expected result variables",
    "   - Every cell MUST have exact test data values (NO placeholders, NO empty cells)",
    "   - Must have at least 2 rows of test data",
    "   - Use realistic, concrete test data values",
    "",
    "6. **Best Practices:**",
    "   - Use plain English in steps (no code)",
    "   - Be specific and concrete",
    "   - Follow Gherkin format (Given/When/Then/And)",
    "   - Variables in angle brackets: <variable_name>",
    "   - Variables in steps must be quoted: \\\"<variable_name>\\\"",
    "",
    "7. **Save updated story graph** to project area: docs/stories/story-graph.json",
    "",
    "**Template:** story-graph-outline-examples.json",
    "",
    "**Validation:**",
    "- Only scenarios needing data variation are converted to Scenario Outlines",
    "- All variables in Steps have matching columns in Examples table",
    "- Examples tables include both inputs and expected outputs",
    "- All Examples cells contain concrete test data (no placeholders)",
    "- At least 2 rows of test data per Scenario Outline"
  ]
}


