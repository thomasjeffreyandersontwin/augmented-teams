{
  "behaviorName": "specification_examples",
  "step": "3_synchronize",
  "instructions": [
    "**SYNCHRONIZE STORY GRAPH WITH RENDERED DOCUMENTS AND FEATURE FILES**",
    "",
    "**Input:** Story documents with examples from render step",
    "",
    "**Output:** Validation that story graph and documents are synchronized",
    "",
    "**Process:**",
    "",
    "1. **Load story graph** from project area: docs/stories/story-graph.json",
    "",
    "2. **For each story in the graph:**",
    "   - Load corresponding story document: docs/stories/{epic_name}/{sub_epic_name}/{story_name}.md",
    "   - Extract scenario outlines and examples from document",
    "   - Compare with scenario outlines and examples in story graph",
    "",
    "3. **Validate synchronization:**",
    "   - All scenario outlines in graph exist in document",
    "   - All scenario outlines in document exist in graph",
    "   - Scenario outline names, types, and steps match",
    "   - Examples tables match (columns and rows)",
    "   - All variables in Steps have matching columns in Examples",
    "   - All Examples cells contain concrete test data (no placeholders)",
    "",
    "4. **Validate Examples Table Quality:**",
    "   - Every variable in Steps has a column in Examples table",
    "   - Examples include both input and output/expected result variables",
    "   - Every cell has exact test data (no placeholders, no empty cells)",
    "   - At least 2 rows of test data per Scenario Outline",
    "",
    "5. **Generate sync report:**",
    "   - List any discrepancies found",
    "   - Indicate missing or extra scenario outlines",
    "   - Show differences in scenario outline content",
    "   - Flag Examples table issues (missing columns, placeholders, empty cells)",
    "",
    "6. **If discrepancies found:**",
    "   - Present sync report to user",
    "   - Ask user to confirm resolution strategy:",
    "     * Update graph from documents (if manually edited)",
    "     * Update documents from graph (if graph is source of truth)",
    "     * Manual resolution required",
    "",
    "7. **Apply synchronization:**",
    "   - Update story graph and/or documents as needed",
    "   - Save updated files to project area",
    "",
    "**Validation:**",
    "- Story graph and documents are fully synchronized",
    "- No orphaned scenario outlines in either graph or documents",
    "- All scenario outline content matches exactly",
    "- All Examples tables are complete and valid"
  ]
}

