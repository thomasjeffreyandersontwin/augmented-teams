{
  "description": "CRITICAL: Map all table columns to all scenario parameters bidirectionally. Every column header must map to a parameter in the Background or When/Then steps, AND every parameter in Background/When/Then must appear as a column in the testing table. This keeps tests traceable, executable, and easy to automate. If a parameter exists in Background or When/Then, it must be explicit in the table so it's clear what's being tested.",
  "examples": [
    {
      "do": {
        "description": "All parameters from Background/When/Then appear as table columns",
        "content": [
          "**GOOD Example - Payment Validator Discovery:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment system is '{payment_system}' (parameter: stripe|paypal|square)",
          "And Validation rules exist at '{rule_file_paths}' (parameter: specific rule file paths)",
          "```",
          "",
          "**When/Then:**",
          "```gherkin",
          "When Validator discovery is executed for rule files at '{rule_file_paths}'",
          "Then Validators are discovered: '{actual_validators_discovered}' (parameter: count and list of validators)",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Payment System | Rule File Paths | Actual Validators Discovered |",
          "|---------|---------------|----------------|---------------------------|",
          "| T2.1 | stripe | payment_rules/validate_positive_amount.json<br>payment_rules/validate_card_expiry.json | 2 validators discovered: PositiveAmountValidator, CardExpiryValidator |",
          "",
          "**Key points:**",
          "- 'Payment System' column maps to '{payment_system}' parameter",
          "- 'Rule File Paths' column maps to '{rule_file_paths}' parameter",
          "- 'Actual Validators Discovered' column maps to '{actual_validators_discovered}' parameter",
          "- Every parameter has a corresponding column",
          "- Every column maps to a parameter"
        ]
      },
      "dont": {
        "description": "Don't omit parameters from table or add columns without parameters",
        "content": [
          "**BAD Example - Missing Payment System column:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment system is '{payment_system}' (parameter: stripe|paypal|square)",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Rule File Paths | Actual Validators Discovered |",
          "|---------|----------------|---------------------------|",
          "| T2.1 | payment_rules/validate_positive_amount.json | 1 validator discovered |",
          "",
          "**Problems:**",
          "- '{payment_system}' parameter exists in Background but no 'Payment System' column",
          "- Not explicit which payment system is being tested",
          "- Test generator must infer payment system from rule file path",
          "",
          "**BAD Example - Column without parameter:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment processor is initialized with processor_name='stripe'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Test Type | Expected Result |",
          "|---------|----------|----------------|",
          "| T1.1 | Happy path | Success |",
          "",
          "**Problems:**",
          "- 'Test Type' column doesn't map to any parameter",
          "- 'Expected Result' is vague and doesn't map to specific parameter",
          "- Columns should only exist if they map to Background/When/Then parameters"
        ]
      }
    },
    {
      "do": {
        "description": "Combine related parameters into single column when appropriate",
        "content": [
          "**GOOD Example - Combined payment system parameters:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment system is '{payment_system}' (parameter: stripe|paypal|square)",
          "And Payment API endpoint exists at 'https://api.{payment_system}.com/v1/payments'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Payment System | Rule File Paths |",
          "|---------|---------------|----------------|",
          "| T2.1 | stripe | payment_rules/stripe/validate_positive_amount.json |",
          "",
          "**Key points:**",
          "- 'Payment System' column shows payment_system (stripe)",
          "- API endpoint pattern is implicit in payment system",
          "- Single column captures both parameters when one derives from the other",
          "",
          "**GOOD Example - Explicit combined column:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment system is '{payment_system}' (parameter: stripe|paypal|square)",
          "And Payment config exists at 'payment_configs/{payment_system}/config.json'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Payment System | Payment Config Path |",
          "|---------|---------------|-------------------|",
          "| T3.1 | stripe | payment_configs/stripe/config.json |",
          "",
          "**Key points:**",
          "- 'Payment System' column maps to '{payment_system}' parameter",
          "- 'Payment Config Path' shows full path with payment_system substituted",
          "- Both parameters are visible in table"
        ]
      },
      "dont": {
        "description": "Don't hide parameters or make them implicit",
        "content": [
          "**BAD Example - Implicit payment system:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment system is '{payment_system}' (parameter: stripe|paypal|square)",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Rule File Paths |",
          "|---------|----------------|",
          "| T2.1 | payment_rules/stripe/validate_positive_amount.json |",
          "",
          "**Problems:**",
          "- payment_system parameter exists but no Payment System column",
          "- Must infer payment system from path (stripe)",
          "- Not explicit what's being tested",
          "",
          "**BAD Example - Missing parameter visibility:**",
          "",
          "**When/Then:**",
          "```gherkin",
          "When Validators are executed against payment data containing '{payment_data_problems}'",
          "Then Violations are detected at '{expected_violation_line}'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Expected Violation Line |",
          "|---------|----------------------|",
          "| T3.1 | line 2 (payment.amount) |",
          "",
          "**Problems:**",
          "- '{payment_data_problems}' parameter missing from table",
          "- Can't see what problems exist in payment data",
          "- Must infer from violation line"
        ]
      }
    },
    {
      "do": {
        "description": "Map complex parameters with clear column names",
        "content": [
          "**GOOD Example - Complex parameter mapping:**",
          "",
          "**When/Then:**",
          "```gherkin",
          "When Violation report is generated with violations '{violations_data}' and format '{report_format}'",
          "Then Report structure is '{expected_report_structure}' (parameter: actual report structure matching format)",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Violations Data | Report Format | Expected Report Structure |",
          "|---------|----------------|---------------|--------------------------|",
          "| T4.1 | Payment amount '-50.00' violation: rule_name='validate_positive_amount', line_number=2 | JSON | `{\"violations\": [{\"rule_name\": \"validate_positive_amount\", \"line_number\": 2, ...}]}` |",
          "",
          "**Key points:**",
          "- '{violations_data}' → 'Violations Data' column",
          "- '{report_format}' → 'Report Format' column",
          "- '{expected_report_structure}' → 'Expected Report Structure' column",
          "- Column names clearly map to parameters",
          "- All parameters visible in table"
        ]
      },
      "dont": {
        "description": "Don't use vague column names that don't map clearly to parameters",
        "content": [
          "**BAD Example - Vague column names:**",
          "",
          "**When/Then:**",
          "```gherkin",
          "When Violation report is generated with violations '{violations_data}' and format '{report_format}'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Input | Output |",
          "|---------|-------|--------|",
          "| T4.1 | Some violations | Report |",
          "",
          "**Problems:**",
          "- 'Input' doesn't map to '{violations_data}' or '{report_format}'",
          "- 'Output' doesn't map to any parameter",
          "- Column names don't match parameter names",
          "- Not clear what each column represents"
        ]
      }
    }
  ]
}

