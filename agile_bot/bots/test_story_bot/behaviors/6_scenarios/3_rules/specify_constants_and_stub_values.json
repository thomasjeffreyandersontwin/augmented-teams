{
  "description": "CRITICAL: Specify constants where they are known. Use actual constants (files, classes, data values) instead of blindly applying placeholders. Combine constants with parameters to constrain tests to what truly changes. When using stubs or mocks, describe stub return values as part of the Givens - they will always return the same value. If components are stubbed/mocked, don't parameterize the inputs that are being stubbed - it won't affect the test and will cause confusion. This isolates variation from known constants, leading to generation of better code and better tests.",
  "examples": [
    {
      "do": {
        "description": "Use actual constants for fixed paths and structures",
        "content": [
          "**GOOD Example - Fixed directory structure:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Common payment rules directory exists at 'payment_rules/common/'",
          "And Payment system rules directory exists at 'payment_rules/{payment_system}/'",
          "```",
          "",
          "**Key points:**",
          "- Common rules path is constant: 'payment_rules/common/'",
          "- Payment system rules path pattern is fixed: 'payment_rules/{system}/'",
          "- Only payment_system varies",
          "- Fixed structure explicitly stated, not parameterized",
          "",
          "**GOOD Example - Combining constants with parameters:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment config exists at 'payment_configs/{payment_system}/config.json'",
          "```",
          "",
          "**Key points:**",
          "- Fixed base path: 'payment_configs/'",
          "- Fixed filename: 'config.json'",
          "- Only payment_system varies",
          "- Pattern: WHEN validating all payment system rules at payment_rules/{payment_system}",
          "- Constants constrain what can vary"
        ]
      },
      "dont": {
        "description": "Don't parameterize constants or use placeholders for fixed values",
        "content": [
          "**BAD Example - Parameterizing constants:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Common payment rules directory exists at '{common_rules_path}'",
          "And Payment system rules directory exists at '{system_rules_path}'",
          "```",
          "",
          "**Problems:**",
          "- Common rules path is always the same - shouldn't be parameterized",
          "- Payment system rules path structure is fixed - only system varies",
          "- Unnecessary parameters create confusion",
          "- Test generator must guess what paths to use",
          "",
          "**BAD Example - Placeholders for fixed values:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment config exists at '{payment_config_path}'",
          "```",
          "",
          "**Problems:**",
          "- Path structure is fixed (payment_configs/{system}/config.json)",
          "- Should specify fixed structure with only payment_system as parameter",
          "- Placeholder hides the actual structure",
          "- Test generator doesn't know the pattern"
        ]
      }
    },
    {
      "do": {
        "description": "Describe stub return values explicitly in Givens",
        "content": [
          "**GOOD Example - Stubbed payment validators:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment validators are stubbed to return '{validator_output}' (parameter: mocked JSON output from validators)",
          "And Payment validators are stubbed to return:",
          "```json",
          "{",
          "  \"violations\": [",
          "    {",
          "      \"rule_name\": \"validate_positive_amount\",",
          "      \"violation_message\": \"Payment amount must be positive\",",
          "      \"line_number\": 2,",
          "      \"severity\": \"error\"",
          "    }",
          "  ],",
          "  \"validators_executed\": 1",
          "}",
          "```",
          "",
          "**Key points:**",
          "- Explicitly states validators are STUBBED",
          "- Shows exact return value (hardcoded JSON)",
          "- Makes clear test is NOT validating validator logic",
          "- Stub return value is part of Given (static, always same)",
          "",
          "**GOOD Example - Stub in testing table:**",
          "",
          "| Test ID | Payment Validators (Stubbed) | Validator Output (JSON) |",
          "|---------|---------------------------|------------------------|",
          "| T1.1 | PositiveAmountValidator, CardExpiryValidator | ```json<br>{\"violations\": [{\"rule_name\": \"validate_positive_amount\", \"line_number\": 2, ...}], \"validators_executed\": 2}``` |",
          "",
          "**Key points:**",
          "- Column header says '(Stubbed)' to make it explicit",
          "- Shows actual hardcoded return value",
          "- Makes clear these are mocked, not real validators"
        ]
      },
      "dont": {
        "description": "Don't parameterize inputs that are being stubbed",
        "content": [
          "**BAD Example - Parameterizing stubbed inputs:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment data contains '{payment_data_content}' (parameter: actual payment amount/card/customer structure)",
          "And Payment validators are stubbed to return '{validator_output}'",
          "```",
          "",
          "**Problems:**",
          "- If validators are stubbed, payment data content doesn't matter",
          "- Stub will return same value regardless of input",
          "- Parameterizing payment_data_content is irrelevant",
          "- Causes confusion about what's being tested",
          "",
          "**BAD Example - Not making stubs explicit:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment validators return '{validator_output}'",
          "```",
          "",
          "**Problems:**",
          "- Doesn't say validators are STUBBED",
          "- Unclear if these are real validators or mocks",
          "- Test generator doesn't know to stub them",
          "- Can't tell what the test is NOT validating",
          "",
          "**BAD Example - Hiding stub return values:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment validators are configured",
          "```",
          "",
          "**Problems:**",
          "- Doesn't show stub return values",
          "- Test generator must guess what stubs return",
          "- No explicit conditions for stub behavior"
        ]
      }
    },
    {
      "do": {
        "description": "Use actual class names and file paths instead of placeholders",
        "content": [
          "**GOOD Example - Actual validator classes:**",
          "",
          "| Test ID | Payment Validators (Stubbed) |",
          "|---------|---------------------------|",
          "| T1.1 | PositiveAmountValidator, CardExpiryValidator |",
          "| T1.2 | PositiveAmountValidator, CustomerRequiredValidator |",
          "",
          "**Key points:**",
          "- Actual validator class names, not placeholders",
          "- Shows which specific validators are used",
          "- Makes test executable and verifiable",
          "",
          "**GOOD Example - Actual rule file paths:**",
          "",
          "| Test ID | Rule File Paths |",
          "|---------|---------------|",
          "| T2.1 | payment_rules/common/validate_positive_amount.json<br>payment_rules/stripe/validate_card_expiry.json |",
          "",
          "**Key points:**",
          "- Actual file paths, not {rule_file} placeholders",
          "- Shows exact location of rule files",
          "- Demonstrates fixed directory structure"
        ]
      },
      "dont": {
        "description": "Don't use placeholders for known constants",
        "content": [
          "**BAD Example - Placeholder for payment processor:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Common payment rules directory exists at '{processor_root}/rules/common/'",
          "```",
          "",
          "**Problems:**",
          "- processor_root is always 'payment_rules' for payment system",
          "- Should use actual constant, not placeholder",
          "- Test generator must guess what processor_root is",
          "",
          "**BAD Example - Placeholder for validator classes:**",
          "",
          "| Test ID | Payment Validators |",
          "|---------|------------------|",
          "| T1.1 | {validator_class_1}, {validator_class_2} |",
          "",
          "**Problems:**",
          "- Placeholders don't show actual classes",
          "- Test generator must guess which validators",
          "- Not executable without knowing actual classes"
        ]
      }
    },
    {
      "do": {
        "description": "Remove irrelevant parameters when stubbing",
        "content": [
          "**GOOD Example - Payment orchestration test with stubs:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment validators are stubbed to return '{validator_output}'",
          "And Payment data exists at 'payment_data/{payment_system}/transactions.json'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Payment System | Payment Validators (Stubbed) | Validator Output (JSON) |",
          "|---------|---------------|---------------------------|------------------------|",
          "",
          "**Key points:**",
          "- NO 'Payment Data Content' column (validators are stubbed, content doesn't matter)",
          "- Focus on orchestration: forwarding and error response generation",
          "- Only parameters that affect stubbed output are in table",
          "- Makes clear test is NOT validating validator logic",
          "",
          "**Rationale:**",
          "- If validators are stubbed, they return hardcoded values",
          "- Payment data content doesn't affect stub return",
          "- Parameterizing it would be irrelevant and confusing"
        ]
      },
      "dont": {
        "description": "Don't keep irrelevant parameters when stubbing",
        "content": [
          "**BAD Example - Keeping irrelevant parameter:**",
          "",
          "**Background:**",
          "```gherkin",
          "Given Payment validators are stubbed to return '{validator_output}'",
          "And Payment data contains '{payment_data_content}'",
          "```",
          "",
          "**Testing Table:**",
          "| Test ID | Payment Data Content | Validator Output |",
          "|---------|---------------------|-----------------|",
          "| T1.1 | Payment with amount '-50.00' | ```json {...} ``` |",
          "",
          "**Problems:**",
          "- Payment data content doesn't matter (validators are stubbed)",
          "- Stub returns same value regardless of content",
          "- Parameter is irrelevant and causes confusion",
          "- Test generator might think content affects output",
          "",
          "**Why this is wrong:**",
          "- Stubs return hardcoded values",
          "- Input doesn't affect stub output",
          "- Parameterizing input suggests it matters",
          "- Should remove parameter to focus on what's actually tested"
        ]
      }
    }
  ]
}

