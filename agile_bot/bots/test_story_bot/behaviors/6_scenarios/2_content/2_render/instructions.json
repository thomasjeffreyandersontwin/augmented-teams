{
  "behaviorName": "specification_scenarios",
  "step": "2_render",
  "instructions": [
    "**RENDER STORY DOCUMENTS WITH SCENARIOS**",
    "",
    "**Input:** Updated story-graph.json with scenarios (and scenario outlines if decision criteria chosen) from knowledge graph step",
    "",
    "**Output:** Individual story documents with scenarios section added (and scenario outlines with examples if decision criteria chosen)",
    "",
    "**Process:**",
    "",
    "1. **Load story graph** from project area: docs/stories/story-graph.json",
    "",
    "2. **Check decision criteria:**",
    "   - Review planning decision criteria: agile_bot/bots/story_bot/behaviors/6_scenarios/1_guardrails/planning/decision_criteria/scenario_outline.json",
    "   - **IF decision criteria answer is 'Yes':** Render Scenario Outlines with Examples tables (see step 4b)",
    "   - **IF decision criteria answer is 'No':** Render regular scenarios only (see step 4a)",
    "",
    "3. **For each story in the graph:**",
    "   - Create folder structure: docs/stories/map/{epic_name}/{feature_name}/",
    "   - Use emoji monikers: üéØ for Epic folders, ‚öôÔ∏è for Feature folders",
    "   - Only create folders where stories actually exist",
    "   - Create story document: docs/stories/map/{epic_name}/{feature_name}/{story_name}.md",
    "   - Keep existing sections: Story Description, Acceptance Criteria",
    "   - Add new sections: Background (if applicable), Scenarios (with Scenario Outlines and Examples if decision criteria = 'Yes')",
    "",
    "4a. **Render Background section** (if story has background steps):",
    "   ```markdown",
    "   ## Background",
    "   ",
    "   **Common setup steps shared across all scenarios:**",
    "   ",
    "   ```gherkin",
    "   Given <step>",
    "   And <step>",
    "   ```",
    "   ```",
    "",
    "4b. **Render Scenarios section:**",
    "   ```markdown",
    "   ## Scenarios",
    "   ",
    "   ### Scenario: {scenario_name} ({scenario_type})",
    "   ",
    "   **Steps:**",
    "   ```gherkin",
    "   Given <step>",
    "   When <step>",
    "   Then <step>",
    "   ```",
    "   ",
    "   ### Scenario Outline: {scenario_outline_name} ({type})",
    "   ",
    "   **Note:** Scenario Outlines with Examples tables are included ONLY when decision criteria chooses Scenario Outline",
    "   ",
    "   **Steps:**",
    "   ```gherkin",
    "   Given <step with \\\"<variable>\\\">",
    "   When <step with \\\"<variable>\\\">",
    "   Then <step with \\\"<expected>\\\"",
    "   ```",
    "   ",
    "   **Examples:**",
    "   | variable | expected |",
    "   |----------|----------|",
    "   | value1   | result1  |",
    "   | value2   | result2  |",
    "   ```",
    "   ```",
    "",
    "5. **Save updated story documents** to project area",
    "",
    "**Template:** templates/story-doc-scenarios.md (scenarios include examples when decision criteria chooses Scenario Outline)",
    "",
    "**Validation:**",
    "- All existing story content is preserved",
    "- Background section only included if story has background steps",
    "- All scenarios are rendered with proper Gherkin formatting",
    "- Scenario types are indicated (happy_path, edge_case, error_case)",
    "- **IF Scenario Outlines are used (decision criteria = 'Yes'):**",
    "  * Scenario Outlines are rendered within the Scenarios section",
    "  * Scenario Outlines are rendered with proper Gherkin formatting",
    "  * Examples tables have all required columns matching variables in Steps",
    "  * Examples tables contain concrete test data (no placeholders)",
    "  * At least 2 rows of test data per Scenario Outline"
  ]
}

