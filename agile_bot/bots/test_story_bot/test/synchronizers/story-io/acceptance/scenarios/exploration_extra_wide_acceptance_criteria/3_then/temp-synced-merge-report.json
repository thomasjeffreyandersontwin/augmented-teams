{
  "timestamp": "2025-12-01T18:07:26.048126",
  "extracted_file": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\utils\\story_io\\acceptance\\scenarios\\exploration_renders_acceptance_criteria\\3_then\\temp-synced.json",
  "original_file": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\utils\\story_io\\acceptance\\scenarios\\exploration_renders_acceptance_criteria\\1_given\\story-graph-with-acceptance-criteria.json",
  "summary": {
    "total_extracted_stories": 3,
    "total_original_stories": 3,
    "exact_matches": 3,
    "fuzzy_matches": 0,
    "new_stories": 0,
    "removed_stories": 0
  },
  "exact_matches": [
    {
      "extracted": {
        "name": "Handle Render Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "sequential_order": 1,
        "epic_name": "Render Diagram",
        "sub_epic_name": "Render Story IO Diagram",
        "story_type": "technical"
      },
      "original": {
        "name": "Handle Render Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "Steps": [],
        "acceptance_criteria": [
          {
            "description": "When MCP tool receives render_outline request with story_graph_path, drawio_path, output_path, and layout_json parameters\nThen tool validates that story_graph_path is provided",
            "user": "Story IO MCP Server",
            "sequential_order": 1
          },
          {
            "description": "When story_graph_path is None\nThen tool raises ValueError('story_graph_path is required')",
            "user": "Story IO MCP Server",
            "sequential_order": 2
          },
          {
            "description": "When story_graph_path is provided\nThen tool calls StoryIODiagram.load_from_story_graph(Path(story_graph_path), Path(drawio_path) if drawio_path else None)",
            "user": "Story IO MCP Server",
            "sequential_order": 3
          },
          {
            "description": "When layout_json parameter is provided\nThen tool parses layout_json string using json.loads() to create layout_data dict",
            "user": "Story IO MCP Server",
            "sequential_order": 4
          },
          {
            "description": "When layout_json is None\nThen tool sets layout_data to None",
            "user": "Story IO MCP Server",
            "sequential_order": 5
          },
          {
            "description": "When diagram.render_outline(output_path=Path(output_path), layout_data=layout_data) is called\nThen renderer generates DrawIO XML and saves to output_path",
            "user": "Story IO MCP Server",
            "sequential_order": 6
          },
          {
            "description": "When render completes successfully\nThen tool returns JSON string with success=True, output_path, and summary containing epics count",
            "user": "Story IO MCP Server",
            "sequential_order": 7
          },
          {
            "description": "When render raises exception\nThen tool catches exception and returns JSON string with success=False and error message",
            "user": "Story IO MCP Server",
            "sequential_order": 8
          }
        ],
        "epic_name": "Render Diagram",
        "sub_epic_name": "Render Story IO Diagram"
      },
      "match_type": "exact",
      "confidence": 1.0
    },
    {
      "extracted": {
        "name": "Invoke Render Outline from CLI",
        "users": [
          "Story IO CLI"
        ],
        "sequential_order": 2,
        "epic_name": "Render Diagram",
        "sub_epic_name": "Render Story IO Diagram",
        "story_type": "technical"
      },
      "original": {
        "name": "Invoke Render Outline from CLI",
        "users": [
          "Story IO CLI"
        ],
        "Steps": [],
        "acceptance_criteria": [
          {
            "description": "When argparse parses 'render-outline' command with --story-graph and --output arguments\nThen argparse creates args object with story_graph Path and output Path attributes",
            "user": "Story IO CLI",
            "sequential_order": 1
          },
          {
            "description": "When render_outline_command function receives args object\nThen function calls StoryIODiagram.load_from_story_graph(args.story_graph, args.drawio_file)",
            "user": "Story IO CLI",
            "sequential_order": 2
          },
          {
            "description": "When layout file is not provided in args\nThen function auto-detects layout by checking output_path.stem-layout.json, story-graph-drawio-extracted-layout.json, and output_path.stem-drawio-extracted-layout.json patterns",
            "user": "Story IO CLI",
            "sequential_order": 3
          },
          {
            "description": "When layout file exists\nThen function loads layout_data from JSON file",
            "user": "Story IO CLI",
            "sequential_order": 4
          },
          {
            "description": "When diagram.render_outline(output_path, layout_data) is called\nThen renderer generates DrawIO XML and saves to output_path",
            "user": "Story IO CLI",
            "sequential_order": 5
          },
          {
            "description": "When render completes\nThen function prints 'Generated DrawIO diagram: {output_path}' and 'Epics: {count}' to stdout",
            "user": "Story IO CLI",
            "sequential_order": 6
          },
          {
            "description": "When render succeeds\nThen function returns exit code 0",
            "user": "Story IO CLI",
            "sequential_order": 7
          }
        ],
        "epic_name": "Render Diagram",
        "sub_epic_name": "Render Story IO Diagram"
      },
      "match_type": "exact",
      "confidence": 1.0
    },
    {
      "extracted": {
        "name": "Handle Synchronize Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "sequential_order": 1,
        "epic_name": "Synchronize Graph",
        "sub_epic_name": "Synchronize Story Graph",
        "story_type": "technical"
      },
      "original": {
        "name": "Handle Synchronize Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "Steps": [],
        "acceptance_criteria": [
          {
            "description": "When MCP tool receives synchronize_outline request with drawio_path, original_path, and output_path parameters\nThen tool creates StoryIODiagram instance with drawio_file=Path(drawio_path)",
            "user": "Story IO MCP Server",
            "sequential_order": 1
          },
          {
            "description": "When original_path parameter is provided\nThen tool sets original to Path(original_path)",
            "user": "Story IO MCP Server",
            "sequential_order": 2
          },
          {
            "description": "When original_path is None\nThen tool sets original to None",
            "user": "Story IO MCP Server",
            "sequential_order": 3
          },
          {
            "description": "When diagram.synchronize_outline(drawio_path=Path(drawio_path), original_path=original) is called\nThen synchronizer extracts story graph from DrawIO XML and compares with original if provided",
            "user": "Story IO MCP Server",
            "sequential_order": 4
          },
          {
            "description": "When output_path parameter is provided\nThen tool calls diagram.save_story_graph(Path(output_path)) to save synchronized graph",
            "user": "Story IO MCP Server",
            "sequential_order": 5
          },
          {
            "description": "When synchronize completes successfully\nThen tool returns JSON string with success=True, epics_count from result, and output_path",
            "user": "Story IO MCP Server",
            "sequential_order": 6
          },
          {
            "description": "When synchronize raises exception\nThen tool catches exception and returns JSON string with success=False and error message",
            "user": "Story IO MCP Server",
            "sequential_order": 7
          }
        ],
        "epic_name": "Synchronize Graph",
        "sub_epic_name": "Synchronize Story Graph"
      },
      "match_type": "exact",
      "confidence": 1.0
    }
  ],
  "fuzzy_matches": [],
  "new_stories": [],
  "removed_stories": [],
  "large_deletions": {
    "missing_epics": [],
    "missing_sub_epics": [],
    "epics_with_many_missing_stories": [],
    "sub_epics_with_many_missing_stories": []
  }
}