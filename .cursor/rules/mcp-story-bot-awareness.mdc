# MCP Tool Awareness

## Bot: story_bot

**Bot Goal:** Transform user needs into well-structured, testable stories using a progressive refinement workflow
**Bot Description:** Helps teams create, refine, and specify user stories from initial idea through to executable specifications

## Priority: Check MCP Tools First

**CRITICAL RULE:** When user is trying to transform user needs into well-structured, testable stories using a progressive refinement workflow, ALWAYS check for and use MCP story_bot tools FIRST before falling back to manual file operations.

When ever user mention stories, discovery, story, shaping, scenarios, spec by example, etc use the story-bot MCP tools!

## Tool Selection Based on Context

**Choose the RIGHT tool based on how much context you have. Don't guess - use a more general tool when you lack context.**

### Most Specific: Call Behavior-Action Tool
**When you have:** Both behavior AND action from context
- Example context: "We're in shape behavior at gather_context action"
- **Call:** `story_bot_shape_gather_context` (specific tool)
- **Why:** You have full context to call the exact tool needed

### Medium Specificity: Call Behavior Tool
**When you have:** Behavior but NOT which action
- Example context: "We're working on shape behavior" (but don't know if it's gather_context, decide_planning, etc.)
- **Call:** `story_bot_shape_tool` (behavior tool - routes to current action internally)
- **Why:** Let the tool route you to the correct action

### Least Specific: Call Main Bot Tool
**When you have:** NO context about behavior or action
- Example context: User says "continue story work" but you don't know where we are in the workflow
- **Call:** `story_bot_tool` (main bot tool - routes to current behavior AND action internally)
- **Why:** Let the tool tell you the current state and route you correctly

### CRITICAL: Don't Guess!
- **DON'T** use trigger words alone to guess behavior/action
- **DON'T** assume "exploration" just because user said "scenarios"
- **DO** check conversation history, file context, workflow state for actual context
- **DO** use more general tool when context is unclear
- **DO** let the tool route you to the correct place

**Example of WRONG approach:**
- User: "continue story writing"
- AI sees trigger word "story" → guesses "exploration" behavior → calls `story_bot_exploration_gather_context`
- **Problem:** We were actually in "shape" behavior, not "exploration"

**Example of CORRECT approach:**
- User: "continue story writing"
- AI doesn't know current behavior/action → calls `story_bot_tool`
- Tool responds: "Current behavior: shape, current action: gather_context"
- AI now calls `story_bot_shape_gather_context` with proper context

## Behaviors and Trigger Words

### Shape Behavior

**When user is trying to:** Create initial story map outline (epics, features, stories) from user context  
**as indicated by Trigger words:** shape.*capability, scoping, initial.*planning, starting.*with.*requirements, begin.*capability.*shape, explore.*problem.*space, what.*are.*we.*solving, frame.*initiative, frame.*solution, kick.*off.*project, initiate.*request, describe.*need, start.*intake, capture.*ask, early.*shaping, solution.*intent, business.*intent, initial.*goal, who.*needs.*what, start.*mapping.*conversation, map.*user.*types, identify.*system.*touchpoints, start.*exploring.*flow, problem.*framing, story.*shape, build.*new, start.*new.*project, new.*project, begin.*new, create.*new, start.*on.*new, want.*to.*build.*new, want.*to.*start.*new, want.*to.*start.*on.*new, i.*want.*to.*build, i.*want.*to.*start, new.*initiative, new.*application, new.*solution, new.*system, new.*platform, new.*service, new.*product, new.*capability, new.*tool, new.*software, new.*technology, new.*tech.*stack, new.*architecture, new.*infrastructure, new.*integration, new.*api, new.*microservice, new.*component, new.*module, new.*framework, new.*library, new.*ecosystem, new.*transformation, new.*modernization, new.*digital, new.*automation, new.*enterprise, new.*program, launch.*new, develop.*new, design.*new, implement.*new, roll.*out.*new, deploy.*new, release.*new, introduce.*new, establish.*new, set.*up.*new, commence.*new, embark.*on.*new, undertake.*new

**Then check for:** `story_bot_shape_<action>` tool

**Example:** "shape.*capability" → use `story_bot_shape_gather_context`


### Prioritization Behavior

**When user is trying to:** Organize stories into delivery increments based on value and dependencies  
**as indicated by Trigger words:** prioritiz.*stories, rank.*epics, value.*based.*order, decide.*what.*first, slice.*for.*delivery, group.*stories.*by.*value, group.*stories.*by.*risk, group.*stories.*by.*assumption, define.*thin.*slice, organize.*story.*map, plan.*mvp.*delivery, choose.*mvp, decide.*initial.*release, pick.*first.*slice, stack.*stories.*by.*impact, delivery.*sequence, delivery.*order, assumption.*driven.*planning, cost.*of.*delay, delivery.*strategy, validate.*risk.*first, learn.*fast.*slice, test.*value.*proposition, explore.*release.*path, prioritization

**Then check for:** `story_bot_prioritization_<action>` tool

**Example:** "prioritiz.*stories" → use `story_bot_prioritization_gather_context`


### Arrange Behavior

**When user is trying to:** Arrange stories within increments and identify execution order  
**as indicated by Trigger words:** arrange.*folder, create.*folder.*structure, story.*arrange, build.*folder.*structure, arrange

**Then check for:** `story_bot_arrange_<action>` tool

**Example:** "arrange.*folder" → use `story_bot_arrange_gather_context`


### Discovery Behavior

**When user is trying to:** Elaborate stories with user flows, domain rules, and integration points  
**as indicated by Trigger words:** map.*next.*increment, discover.*all.*stories, explore.*end.*to.*end.*flow, get.*inventory.*of.*stories, list.*stories.*for.*increment, define.*increment.*scope, what.*are.*we.*building.*next, capture.*all.*stories.*next.*release, model.*next.*increment.*flow, visualize.*increment.*scope, build.*full.*story.*inventory, walk.*through.*increment.*flow, define.*story.*sequence, lay.*out.*increment.*plan, draft.*full.*map.*of.*increment, capture.*increment.*workflow, discovery, refine.*increment, story.*discovery

**Then check for:** `story_bot_discovery_<action>` tool

**Example:** "map.*next.*increment" → use `story_bot_discovery_gather_context`


### Exploration Behavior

**When user is trying to:** Define acceptance criteria (Given/When/Then) for each story  
**as indicated by Trigger words:** explore.*increment, explore.*increment.*flow, define.*acceptance.*criteria, walk.*through.*user.*steps, discover.*story.*details, model.*user.*behavior, what.*does.*user.*do, understand.*increment.*usage, map.*happy.*path, capture.*steps.*to.*complete, refine.*acceptance.*logic, describe.*usage.*scenario, define.*done.*for.*feature, explore.*workflow.*steps, user.*journey.*through.*feature, define.*success.*criteria, collaborate.*on.*acceptance, write.*acceptance.*examples, map.*real.*world.*usage, exploration, explore, story.*explore, acceptance.*criteria

**Then check for:** `story_bot_exploration_<action>` tool

**Example:** "explore.*increment" → use `story_bot_exploration_gather_context`


### Scenarios Behavior

**When user is trying to:** Write detailed plain-English scenarios (Given/When/Then) for each story  
**as indicated by Trigger words:** specify.*story.*scenarios, write.*scenarios, define.*test.*scenario, write.*story.*details, get.*to.*exact.*flow, describe.*step.*by.*step, elaborate.*story.*flow, model.*edge.*cases, walk.*through.*test.*case, spec.*acceptance.*scenario, detail.*story.*logic, story.*level.*specification, define.*preconditions, create.*test.*scenarios, scenario.*based.*design, specification.*scenarios, story.*scenarios

**Then check for:** `story_bot_scenarios_<action>` tool

**Example:** "specify.*story.*scenarios" → use `story_bot_scenarios_gather_context`


### Examples Behavior

**When user is trying to:** Create scenario outlines with examples tables for data-driven testing  
**as indicated by Trigger words:** specify.*story.*examples, add.*test.*data, define.*test.*data, write.*examples.*for.*story, create.*examples.*table, add.*variables.*to.*scenarios, convert.*to.*scenario.*outline, add.*examples.*to.*scenarios, define.*story.*inputs, define.*expected.*outcome, capture.*data.*needs, specification.*examples, story.*examples, test.*data.*for.*story

**Then check for:** `story_bot_examples_<action>` tool

**Example:** "specify.*story.*examples" → use `story_bot_examples_gather_context`


### Tests Behavior

**When user is trying to:** Generate executable test code from scenarios  
**as indicated by Trigger words:** generate.*test.*code, create.*test.*file, write.*pytest.*tests, implement.*step.*definitions, generate.*acceptance.*tests, create.*bdd.*tests, write.*test.*code, generate.*test.*implementation, create.*test.*cases, implement.*feature.*tests, specification.*tests, test.*code.*generation, bdd.*test.*code, write.*tests, 

**Then check for:** `story_bot_tests_<action>` tool

**Example:** "generate.*test.*code" → use `story_bot_tests_gather_context`



## Error Handling

**CRITICAL:** If a registered tool is broken or returns an error:

1. **DO NOT automatically attempt a workaround**
2. **Inform user of the exact error details** (include full error message, tool name, parameters used)
3. **Ask user:** "The tool returned an error. Should I attempt to repair the tool, or proceed manually?"
4. **Wait for user decision** before taking any action

## Workflow Pattern

When you recognize a trigger word or story work request:

1. **Check if MCP tools are available** (ask mode vs agent mode)
2. **If in ask mode:** Inform user to switch to agent mode for MCP tool access
3. **If in agent mode:** 
   - **Assess your context** (do you know behavior? action? neither?)
   - **Select appropriate tool** (specific → medium → general, don't guess)
   - **Invoke the tool**
4. **If tool returns error:** Follow error handling above (do NOT workaround)
5. **If no matching tool found:** Fall back to manual operations with explanation

## Example Usage

### Example 1: With Full Context

**User says:** "continue with gather_context for shape"
**AI has context:** behavior=shape, action=gather_context

**AI should:**
1. Check: Am I in agent mode? ✓
2. Assess context: I know behavior AND action
3. Call: `story_bot_shape_gather_context` (most specific tool)

### Example 2: With Partial Context

**User says:** "continue shape work"
**AI has context:** behavior=shape (but not which action)

**AI should:**
1. Check: Am I in agent mode? ✓
2. Assess context: I know behavior but NOT action
3. Call: `story_bot_shape_tool` (medium specificity - will route to current action)

### Example 3: Without Context

**User says:** "continue story writing" or "use mcp tool"
**AI has context:** None (don't know behavior or action)

**AI should:**
1. Check: Am I in agent mode? ✓
2. Assess context: I DON'T know behavior or action
3. Call: `story_bot_tool` (most general - will route to current behavior and action)
4. Tool responds with current state
5. Now proceed with proper context

**DO NOT** immediately start reading files manually without checking for tools first.
**DO NOT** guess behavior/action from trigger words alone without actual context.
